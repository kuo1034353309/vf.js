{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./packages/assets/Assets.ts","webpack:///./packages/player/src/Player.ts","webpack:///./packages/player/src/core/BaseInfo.ts","webpack:///./packages/player/src/core/Config.ts","webpack:///./packages/player/src/core/I18N.ts","webpack:///./packages/player/src/core/RES.ts","webpack:///./packages/player/src/core/VariableManager.ts","webpack:///./packages/player/src/core/actionTask/ActionList.ts","webpack:///./packages/player/src/core/actionTask/AddListenerCallTask.ts","webpack:///./packages/player/src/core/actionTask/AddListenerTask.ts","webpack:///./packages/player/src/core/actionTask/ArrayConcatTask.ts","webpack:///./packages/player/src/core/actionTask/ArrayInitTask.ts","webpack:///./packages/player/src/core/actionTask/ArrayPopTask.ts","webpack:///./packages/player/src/core/actionTask/ArrayPushTask.ts","webpack:///./packages/player/src/core/actionTask/ArrayRandomTask.ts","webpack:///./packages/player/src/core/actionTask/ArrayShiftTask.ts","webpack:///./packages/player/src/core/actionTask/ArraySpliceTask.ts","webpack:///./packages/player/src/core/actionTask/ArrayUnshiftTask.ts","webpack:///./packages/player/src/core/actionTask/BreakTask.ts","webpack:///./packages/player/src/core/actionTask/CallFunctionTask.ts","webpack:///./packages/player/src/core/actionTask/CallProtoFunctionTask.ts","webpack:///./packages/player/src/core/actionTask/DefineFunctionTask.ts","webpack:///./packages/player/src/core/actionTask/DefineVariableTask.ts","webpack:///./packages/player/src/core/actionTask/EmitEventTask.ts","webpack:///./packages/player/src/core/actionTask/EnterFrameTask.ts","webpack:///./packages/player/src/core/actionTask/ExpressTask.ts","webpack:///./packages/player/src/core/actionTask/ForTask.ts","webpack:///./packages/player/src/core/actionTask/FunctionTask.ts","webpack:///./packages/player/src/core/actionTask/IfTask.ts","webpack:///./packages/player/src/core/actionTask/JumpToNextSceneTask.ts","webpack:///./packages/player/src/core/actionTask/JumpToPrevSceneTask.ts","webpack:///./packages/player/src/core/actionTask/JumpToSceneTask.ts","webpack:///./packages/player/src/core/actionTask/PlayAnimationTask.ts","webpack:///./packages/player/src/core/actionTask/PrintTask.ts","webpack:///./packages/player/src/core/actionTask/RemoveListenerTask.ts","webpack:///./packages/player/src/core/actionTask/SetIntervalTask.ts","webpack:///./packages/player/src/core/actionTask/SetPropertyTask.ts","webpack:///./packages/player/src/core/actionTask/SetTimeoutTask.ts","webpack:///./packages/player/src/core/actionTask/SoundTask.ts","webpack:///./packages/player/src/core/actionTask/WaitTask.ts","webpack:///./packages/player/src/core/actionTask/core/ActionListUtils.ts","webpack:///./packages/player/src/core/actionTask/core/BaseTask.ts","webpack:///./packages/player/src/core/actionTask/core/ContainerTask.ts","webpack:///./packages/player/src/core/actionTask/core/QueueTask.ts","webpack:///./packages/player/src/core/animation/Animation.ts","webpack:///./packages/player/src/core/animation/AnimationClip.ts","webpack:///./packages/player/src/core/animation/BooleanFrame.ts","webpack:///./packages/player/src/core/animation/ColorFrame.ts","webpack:///./packages/player/src/core/animation/EventFrame.ts","webpack:///./packages/player/src/core/animation/EventTimeline.ts","webpack:///./packages/player/src/core/animation/Frame.ts","webpack:///./packages/player/src/core/animation/NumberFrame.ts","webpack:///./packages/player/src/core/animation/PathTimeline.ts","webpack:///./packages/player/src/core/animation/StringFrame.ts","webpack:///./packages/player/src/core/animation/Timeline.ts","webpack:///./packages/player/src/core/model/IVFData.ts","webpack:///./packages/player/src/core/transition/Tranistion.ts","webpack:///./packages/player/src/core/transition/filters/AbstractFilter.ts","webpack:///./packages/player/src/core/transition/filters/CircleFadeFilter.ts","webpack:///./packages/player/src/core/transition/filters/CrossFadeFilter.ts","webpack:///./packages/player/src/core/transition/filters/CrossZoomFilter.ts","webpack:///./packages/player/src/core/transition/filters/DoomScreenFilter.ts","webpack:///./packages/player/src/core/transition/filters/HeartWipeFilter.ts","webpack:///./packages/player/src/core/transition/filters/LinearBlurFilter.ts","webpack:///./packages/player/src/core/transition/filters/PageCurlFilter.ts","webpack:///./packages/player/src/core/transition/filters/PageFlipLeftFilter.ts","webpack:///./packages/player/src/core/transition/filters/PageFlipRightFilter.ts","webpack:///./packages/player/src/core/transition/filters/ToTearFilter.ts","webpack:///./packages/player/src/core/transition/filters/WindFilter.ts","webpack:///./packages/player/src/core/transition/trans/FadeoutTran.ts","webpack:///./packages/player/src/display/SceneDataUtils.ts","webpack:///./packages/player/src/display/VFComponent.ts","webpack:///./packages/player/src/display/VFScene.ts","webpack:///./packages/player/src/display/VFStage.ts","webpack:///./packages/player/src/display/plugs/BoardDrawPlug.ts","webpack:///./packages/player/src/display/plugs/DigitalLibraryPlug.ts","webpack:///./packages/player/src/display/plugs/Plug.ts","webpack:///./packages/player/src/display/plugs/PlugIndex.ts","webpack:///./packages/player/src/display/plugs/SliderEditorPlug.ts","webpack:///./packages/player/src/error/ErrorDisplay.ts","webpack:///./packages/player/src/event/StateEvent.ts","webpack:///./packages/player/src/index.ts","webpack:///./packages/player/src/sound/SoundManager.ts","webpack:///./packages/player/src/utils/CalculatePlayerSize.ts","webpack:///./packages/player/src/utils/ImportScript.ts","webpack:///./packages/player/src/utils/Trace.ts","webpack:///./packages/player/src/utils/VFUtil.ts","webpack:///./packages/player/src/utils/base64toBlob.ts","webpack:///./packages/player/src/utils/getFileExtension.ts","webpack:///./packages/player/src/utils/getUrl.ts","webpack:///./packages/player/src/utils/readFileSync.ts"],"names":[],"mappings":"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","file":"../packages/player/dist/player.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./packages/player/src/index.ts\");\n","import {AssetsType} from './IAssets'; \r\n// import * as IRES from './IRES';\r\n// import readFileSync from '../../src/utils/readFileSync';\r\n\r\nexport function getAssetType(extensionName:string){\r\n    switch(extensionName){\r\n        case 'gif':\r\n        case 'png':\r\n        case 'bmp':\r\n        case 'jpg':\r\n        case 'jpeg':\r\n        case 'tif':\r\n        case 'tiff':\r\n        case 'webp':\r\n        case 'tga':\r\n        case 'svg':\r\n        case 'svg+xml':\r\n            return AssetsType.Image;\r\n        case 'mp3':\r\n        case 'ogg':\r\n        case 'wav':\r\n            return AssetsType.Audio;\r\n        case 'mp4':\r\n        case 'webm':\r\n        case 'mov':   \r\n            return AssetsType.Video;\r\n        case 'json':\r\n            return AssetsType.Json;\r\n        default:\r\n            return AssetsType.Unknown;\r\n\r\n    }\r\n}\r\n// export class RES{\r\n\r\n//     private _defaultCdn:string[] = [];\r\n//     private _tempAnchor: HTMLAnchorElement | null = null;\r\n//     private _loadStrategyMap: Partial<Record<string, AbstractLoadStrategyCtor>> = {\r\n//         // images\r\n//         gif:        ImageLoadStrategy,\r\n//         png:        ImageLoadStrategy,\r\n//         bmp:        ImageLoadStrategy,\r\n//         jpg:        ImageLoadStrategy,\r\n//         jpeg:       ImageLoadStrategy,\r\n//         tif:        ImageLoadStrategy,\r\n//         tiff:       ImageLoadStrategy,\r\n//         webp:       ImageLoadStrategy,\r\n//         tga:        ImageLoadStrategy,\r\n//         svg:        ImageLoadStrategy,\r\n//         'svg+xml':  ImageLoadStrategy, // for SVG data urls\r\n\r\n//         // audio\r\n//         mp3:        AudioLoadStrategy,\r\n//         ogg:        AudioLoadStrategy,\r\n//         wav:        AudioLoadStrategy,\r\n\r\n//         // videos\r\n//         mp4:        VideoLoadStrategy,\r\n//         webm:       VideoLoadStrategy,\r\n//         mov:        VideoLoadStrategy,\r\n//     }\r\n\r\n//     public async getRes<K extends keyof XMLHttpRequestEventTargetEventMap>(url: string, options: Options = {}, listener?: Array<[ K , (this: XMLHttpRequestEventTarget, ev: XMLHttpRequestEventTargetEventMap[K]) => any]>): Promise < any > {\r\n//         const cdns = this._defaultCdn;\r\n//         for (const value of cdns) {\r\n//             const data = await readFileSync( (value || '') + url, options, listener);\r\n//             if (data) {\r\n//                 return data;\r\n//             }\r\n//         }\r\n//         return;\r\n//     }\r\n    \r\n\r\n// }","/* eslint-disable @typescript-eslint/explicit-function-return-type */\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\n/* eslint-disable no-unused-vars */\r\nimport { VFStage } from './display/VFStage';\r\nimport { calculateUpdatePlayerSize, getBoundingClientRect } from './utils/CalculatePlayerSize';\r\nimport importScript from './utils/ImportScript';\r\nimport IEvent from './event/IEvent';\r\nimport { IVFOptions, EngineAPI } from './IVFEngine';\r\nimport { IVFDataV1, ScaleMode, VFStateCode, ITransitionData, SceneEvent } from './core/model/IVFData';\r\nimport Config from './core/Config';\r\nimport { EventType } from './event/EventType';\r\nimport { EventLevel } from './event/EventLevel';\r\nimport ErrorDisplay from './error/ErrorDisplay';\r\n\r\ndeclare let VFBUILDDATE: any; // webpack全局变量，prod环境使用\r\n\r\nexport class Player implements EngineAPI {\r\n    /**\r\n     * @private\r\n     * @type {vf.Application}\r\n     */\r\n    public app: vf.Application;\r\n\r\n    /**\r\n     * @private\r\n     * @type {VFStage}\r\n     */\r\n    private stage?: VFStage;\r\n\r\n    /**\r\n     * @private\r\n     * @type {IVFDataV1}\r\n     */\r\n    private _data?: IVFDataV1;\r\n\r\n    /**\r\n     * 首次打开时，默认的场景\r\n     */\r\n    private defaultScene?: { callBack: Function;params: any[] };\r\n    /**\r\n     * @private\r\n     * @type {VFStage}\r\n     */\r\n    private _readyState: VFStateCode;\r\n    public get readyState(): VFStateCode {\r\n        return this._readyState;\r\n    }\r\n    public set readyState(value) {\r\n        this._readyState = value;\r\n        this.config.systemEvent.emit(EventType.STATUS, { code: value, level: EventLevel.STATUS, data: value });\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n    private _errpanel: ErrorDisplay;\r\n\r\n    /**\r\n     * @private\r\n     * @type {Config}\r\n     */\r\n    private config: Config;\r\n\r\n    private option: IVFOptions;\r\n\r\n    constructor(options: IVFOptions) {\r\n        //  1. 初始化配置\r\n        this.option = options;\r\n        this.config = new Config(options);\r\n\r\n        // 2. 初始化引擎\r\n        this.app = this.createApp();\r\n        this._errpanel = new ErrorDisplay(this.config, options.useCustomErrorPanel);\r\n        this.initSystemEvent();\r\n        this._readyState = VFStateCode.INIT;\r\n\r\n        //  3、如果配了资源地址，则启动数据加载\r\n        if (options.src) { this.play(options.src); }\r\n    }\r\n\r\n    private createApp(): vf.Application {\r\n        const options = this.option;\r\n        const config = this.config;\r\n\r\n        // eslint-disable-next-line no-undef\r\n        const app = new vf.Application({\r\n            backgroundColor: parseInt(config.bgcolor || '0', 16),\r\n            transparent: config.wmode === 'transparent',\r\n            antialias: true,\r\n            resolution: options.resolution,\r\n            forceCanvas: options.forceCanvas,\r\n            powerPreference: 'low-power'\r\n        });\r\n\r\n        const frameRate = options.frameRate || 30;\r\n        app.ticker.maxFPS = frameRate;\r\n        vf.Ticker.system.maxFPS = frameRate;\r\n        vf.Ticker.shared.stop();\r\n        vf.Ticker.shared.maxFPS = frameRate;\r\n        vf.gui.TickerShared.maxFPS = frameRate;\r\n        vf.gui.Utils.debug = options.debug || false;\r\n\r\n        return app;\r\n    }\r\n\r\n    public async play(src?: any): Promise<void> {\r\n        if (this._readyState !== VFStateCode.INIT\r\n            && this._readyState !== VFStateCode.LOADED) {\r\n            this.reload();\r\n        }\r\n        this.loadData(src);\r\n    }\r\n\r\n    public playData(src?: any, data?: any) {\r\n        if (data) {\r\n            this.config.conversionData = data;\r\n        }\r\n\r\n        this.play(src);\r\n    }\r\n\r\n    public pause(): void {\r\n        if (this.stage) {\r\n            this.stage.pause();\r\n        }\r\n    }\r\n\r\n    public resume(): void {\r\n        if (this.stage) {\r\n            this.stage.resume();\r\n        }\r\n    }\r\n\r\n    public reset(): void {\r\n        if (this.stage) {\r\n            this.stage.reset();\r\n        }\r\n    }\r\n\r\n    public message(msg: IEvent): void {\r\n        this.config.systemEvent.emit(EventType.ONMESSAGE, msg);\r\n    }\r\n\r\n    public runtimeLog(msg: IEvent): void {\r\n        if (this.onMessage) {\r\n            this.onMessage(msg);\r\n        }\r\n    }\r\n\r\n    public switchToNextScene(transition?: ITransitionData): void {\r\n        if (this.stage) {\r\n            this.stage.switchToNextScene(transition);\r\n        }\r\n    }\r\n\r\n    public switchToPrevScene(transition?: ITransitionData): void {\r\n        if (this.stage) {\r\n            this.stage.switchToPrevScene(transition);\r\n        }\r\n    }\r\n\r\n    public switchToSceneId(sceneId: string, transition?: ITransitionData): void {\r\n        sceneId = sceneId.toString();\r\n        if (this.stage) {\r\n            this.stage.switchToSceneId(sceneId, transition);\r\n        }\r\n        else {\r\n            this.defaultScene = { callBack: this.switchToSceneId, params: [sceneId, transition] };\r\n        }\r\n    }\r\n\r\n    public switchToSceneIndex(index: number, transition?: ITransitionData): void {\r\n        if (this.stage) {\r\n            this.stage.switchToSceneIndex(index, transition);\r\n        }\r\n        else {\r\n            this.defaultScene = { callBack: this.switchToSceneIndex, params: [index, transition] };\r\n        }\r\n    }\r\n\r\n    public dispose(removeView = false): void {\r\n        if (this.readyState === VFStateCode.DISABLED) {\r\n            return;\r\n        }\r\n\r\n        this.option = null as any;\r\n        this.defaultScene = undefined;\r\n\r\n        this.config.systemEvent.removeAllListeners();\r\n\r\n        if (this.stage) {\r\n            this.stage.dispose();\r\n        }\r\n        vf.AudioEngine.Ins().dispose();\r\n\r\n        if (this.app && this.app.stage) {\r\n            this.app.destroy(removeView, { children: true, texture: true, baseTexture: true });\r\n        }\r\n        this.stage = undefined;\r\n        this.app = null as any;\r\n        this.onDispose();\r\n        this.readyState = VFStateCode.DISABLED;\r\n    }\r\n\r\n    /**\r\n     * 接口，避免写入逻辑\r\n     */\r\n    // eslint-disable-next-line handle-callback-err\r\n    public readonly onError = (err: any) => {\r\n        //\r\n    };\r\n\r\n    /**\r\n     * 接口，避免写入逻辑\r\n     */\r\n    public readonly onInit = () => {\r\n        //\r\n    };\r\n\r\n    /**\r\n     * 接口，避免写入逻辑\r\n     */\r\n    public readonly onReady = () => {\r\n        //\r\n    };\r\n\r\n    /**\r\n     * 接口，避免写入逻辑\r\n     */\r\n    public readonly onSceneLoad = () => {\r\n        //\r\n    };\r\n    /**\r\n     * 接口，避免写入逻辑\r\n     */\r\n    public readonly onSceneCreate = () => {\r\n        //\r\n    };\r\n\r\n    /**\r\n     * 接口，避免写入逻辑\r\n     */\r\n    public readonly onMessage = (msg: IEvent) => {\r\n        //\r\n    };\r\n\r\n    /**\r\n     * 接口，避免写入逻辑\r\n     */\r\n    public readonly onDispose = () => {\r\n        //\r\n    };\r\n\r\n    private initSystemEvent(): void {\r\n        const event = this.config.systemEvent;\r\n\r\n        event.on(EventType.MESSAGE, this.sendMessage, this);\r\n        event.on(EventType.STATUS, this.onStatus, this);\r\n    }\r\n\r\n    private reload(): void {\r\n        const config = this.config;\r\n\r\n        config.systemEvent.removeAllListeners();\r\n\r\n        vf.AudioEngine.Ins().dispose();\r\n\r\n        if (this.stage) {\r\n            this.stage.dispose();\r\n        }\r\n\r\n        if (this.app) {\r\n            this.app.destroy(true, { children: true, texture: true, baseTexture: true });\r\n        }\r\n        this.stage = undefined;\r\n\r\n        this.app = this.createApp();\r\n\r\n        this.initSystemEvent();\r\n    }\r\n\r\n    /**\r\n     * 启动\r\n     * TODO：\r\n     *   1、目前是打包到一起的pixi引擎，后面需改改成按配置异步加载\r\n     *   2、按配置对画布做自适应布局\r\n     *   3、重新定义版本号的输出结构（VF标识、版本、编译时间、环境支持信息..），提到版本控制模块里\r\n     */\r\n    private async start(): Promise<void> {\r\n        if (!this._data) { return; }\r\n        const config = this.config;\r\n        const data = this._data;\r\n        const container = this.config.container;\r\n\r\n        const clientRect = getBoundingClientRect(container);\r\n\r\n        // 0、更新配置\r\n        config.width = vf.gui.Utils.formatRelative(data.width, clientRect.width);\r\n        config.height = vf.gui.Utils.formatRelative(data.height, clientRect.height);\r\n        if (config.scaleMode === undefined) {\r\n            config.scaleMode = this._data.scaleMode || ScaleMode.NO_SCALE;\r\n        }\r\n        config.output('Config Info：', config.info);\r\n        // 2、初始化渲染引擎，并将渲染器的画布添加到容器（目前是PIXI）\r\n        const view = this.app.view;\r\n\r\n        view.width = config.width;\r\n        view.height = config.height;\r\n        view.style.zIndex = '0';\r\n\r\n        container.appendChild(this.app.view);\r\n\r\n        // 3、初始化基于PX容器的VF场景\r\n        this.stage = new VFStage(this._data, this.config, this);\r\n        // 4、 适配处理\r\n        // eslint-disable-next-line max-len\r\n        calculateUpdatePlayerSize(container, this.app.view, this.stage, this.config.scaleMode as any, this.app.renderer.resolution);\r\n\r\n        // 5、初始化API模块，并通知外部'vf[hashid] api is ready'\r\n        this.readyState = VFStateCode.READY;\r\n\r\n        // 6、加载场景资源 \r\n        if (this.defaultScene) {\r\n            this.defaultScene.callBack.call(this, this.defaultScene.params[0], this.defaultScene.params[1]);\r\n        }\r\n        else {\r\n            this.stage.start();\r\n        }\r\n    }\r\n\r\n    private async loadData(src: any): Promise<void> {\r\n        this.readyState = VFStateCode.LOAD;\r\n\r\n        const onStatus = this.onStatus.bind(this);\r\n\r\n        await this.config.i18n.load(this.config.cdns.default, onStatus);\r\n\r\n        if (typeof src === 'string') {\r\n            this._data = await vf.utils.readFileSync(src, { responseType: 'json' }).catch((value) => { onStatus(value); });\r\n        }\r\n        else if (typeof src === 'object') {\r\n            this._data = src;\r\n        }\r\n\r\n        const data = this._data;\r\n\r\n        if (data) {\r\n            if (data.conversion) {\r\n                if (typeof src === 'string') {\r\n                    const version = src.split('?')[1] || 'v=0';\r\n                    // tslint:disable-next-line: max-line-length\r\n                    const conversionPath = `${src.substr(0, src.lastIndexOf('/'))}/${data.conversion}?${version}`;\r\n\r\n                    await importScript(conversionPath).catch((e: IEvent) => {\r\n                        this.onStatus(e);\r\n                    });\r\n                    const vFConversion = await new (window as any).VFConversion();\r\n\r\n                    await vFConversion.analysis(this.config.conversionData, this._data);\r\n                }\r\n                else {\r\n                    this.onStatus({ code: 'E0005', level: EventLevel.ERROR, data: data.conversion });\r\n                }\r\n            }\r\n            this.readyState = VFStateCode.LOADED;\r\n            await this.start();\r\n        }\r\n    }\r\n\r\n    // ------------------------- 外部与钩子 ---------------------------//\r\n    /**\r\n     * 接收到服务\r\n     * @param msg\r\n     */\r\n    private sendMessage(msg: IEvent): void {\r\n        this.onMessage(msg);\r\n    }\r\n\r\n    /**\r\n     * 接收到的状态\r\n     * @param msg\r\n     */\r\n    private onStatus(msg: IEvent): void {\r\n        if (msg.level === EventLevel.ERROR || msg.level === EventLevel.WARNING) {\r\n            if (msg.level === EventLevel.ERROR) {\r\n                this._errpanel.setMessage(msg.code, msg.data);\r\n            }\r\n            msg.message = this._errpanel.getText(msg.code, msg.data);\r\n            if (this.onError) {\r\n                this.onError(msg);\r\n            }\r\n\r\n            return;\r\n        }\r\n        switch (msg.code) {\r\n            case VFStateCode.INIT:\r\n                if (this.onInit) {\r\n                    this.onInit();\r\n                }\r\n                break;\r\n            case VFStateCode.READY:\r\n                if (this.onReady) {\r\n                    this.onReady();\r\n                }\r\n                break;\r\n            case SceneEvent.SceneLoad:\r\n                if (this.onSceneLoad) {\r\n                    this.onSceneLoad();\r\n                }\r\n                break;\r\n            case SceneEvent.ScenComplete:\r\n                if (this.onSceneCreate) {\r\n                    this.onSceneCreate();\r\n                }\r\n                break;\r\n            default:\r\n                if (this.onMessage) {\r\n                    this.onMessage(msg);\r\n                }\r\n        }\r\n    }\r\n}\r\nconst w = (window as any);\r\n\r\nif (w.vf === undefined) {\r\n    w.vf = {};\r\n}\r\n\r\nw.vf.player = { Player };\r\n","/**\r\n * 信息、参数、配置对象基类\r\n *\r\n * @author 8088\r\n */\r\nimport StateEvent from '../event/StateEvent';\r\nimport {EventType} from '../event/EventType';\r\nimport {EventLevel} from '../event/EventLevel';\r\n\r\nexport default class BaseInfo{\r\n\r\n    /** 系统与对外事件 */\r\n    public readonly systemEvent = new StateEvent();\r\n\r\n    constructor(){\r\n\r\n    }\r\n\r\n    /**\r\n     * Add a listener for a given event.\r\n     */\r\n    public on(event: string, fn: any, context?: any): this {\r\n    \tthis.systemEvent.on(event, fn, context);\r\n    \treturn this;\r\n    }\r\n    public addListener(event: string, fn: Function, context?: any): this {\r\n    \treturn this.on(event, fn, context);\r\n    }\r\n\r\n    /**\r\n     * Remove the listeners of a given event.\r\n     */\r\n    public removeListener(event: string, fn?: Function, context?: any, once?: boolean): this{\r\n    \treturn this.off(event, fn, context, once);\r\n    }\r\n    public off(event: string, fn?: any, context?: any, once?: boolean): this{\r\n    \tthis.systemEvent.off(event, fn, context, once);\r\n    \treturn this;\r\n    }\r\n\r\n    /**\r\n     * 生成唯一标识ID\r\n     *\r\n     * @return 随机码\r\n     */\r\n    public createRandomId(): string {\r\n    \t// return String((new Date()).getTime()) + this.createRandomIdentifier(3);\r\n    \tvar specialChars:Array<string> = new Array('8', '9', 'A', 'B');\r\n    \treturn this.createRandomIdentifier(8, 15) + '-' + this.createRandomIdentifier(4, 15) + '-8' + this.createRandomIdentifier(3, 15) + '-' + specialChars[this.randomIntegerWithinRange(0, 3)] + this.createRandomIdentifier(3, 15) + '-' + this.createRandomIdentifier(12, 15);\r\n    }\r\n\r\n    /**\r\n     * 生成会话ID\r\n     *\r\n     * @return 随机码\r\n     */\r\n    public getSessionId(): string\r\n    {\r\n    \tlet _sessionId: string;\r\n    \tlet date:Date = new Date();\r\n    \t_sessionId = String(date.getTime()) + String(1000 + date.getMilliseconds()) + String(Math.floor(Math.random() * 9000) + 1000);\r\n    \treturn _sessionId;\r\n    }\r\n\r\n    /**\r\n     * 属性被更改后抛出changed事件\r\n     *\r\n     * @param\tpropertyName 对应已更改的属性名称\r\n     */\r\n    protected propertyChange(propertyName: string)\r\n    {\r\n    \tthis.systemEvent.emit(EventType.STATE, {\r\n    \t\tcode: this.getClassName(this) + this.PROPERTY_CHANGE,\r\n    \t\tlevel: EventLevel.STATUS,\r\n    \t\tdata: {name:propertyName, value:(<any> this)[propertyName]},\r\n    \t\t// message: 'mark:是否需要加详细的描述 打运行时日志 待定...'\r\n    \t});\r\n    }\r\n\r\n    /**\r\n     * 属性设置\r\n     * - 超出了对应支持的范围，上报此错误。\r\n     *\r\n     * @param\tpropertyName 属性名称\r\n     * @param\tsetValue 想要更改的值\r\n     */\r\n    protected propertyError(propertyName: string, setValue?: any)\r\n    {\r\n    \tthis.systemEvent.emit(EventType.STATE, {\r\n    \t\tcode: this.getClassName(this) + this.PROPERTY_SET_ERROR,\r\n    \t\tlevel: EventLevel.ERROR,\r\n    \t\tdata: {name:propertyName, value:setValue}\r\n    \t\t// message: 'mark:是否需要加详细的描述 打运行时日志 待定...'\r\n    \t});\r\n    }\r\n\r\n    public get info(): object {\r\n    \treturn {};\r\n    }\r\n\r\n    public output(ttl: string, obj: any) {\r\n        console.groupCollapsed(ttl);\r\n        for(const key in obj) {\r\n            console.log('%c' + key + ':', 'color: violet;', obj[key]);\r\n        }\r\n        console.groupEnd();\r\n    }\r\n\r\n\r\n    // Internals..\r\n    //\r\n\r\n    private createRandomIdentifier(length: number, radix: number = 61): string {\r\n    \tlet characters: Array<string> = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];\r\n    \tlet id: Array<string> = [];\r\n    \tradix = (radix > 61) ? 61 : radix;\r\n    \twhile (length--) {\r\n    \t\tid.push(characters[this.randomIntegerWithinRange(0, radix)]);\r\n    \t}\r\n    \treturn id.join('');\r\n    }\r\n\r\n    private randomIntegerWithinRange(min: number, max: number): number {\r\n    \treturn Math.floor(Math.random() * (1 + max - min) + min);\r\n    }\r\n\r\n    private getClassName(value: any) {\r\n    \tlet regex = /function (.{1,})\\(/;\r\n    \tlet results = regex.exec((<any> value).constructor.toString());\r\n    \treturn (results && results.length > 1) ? results[1] : '';\r\n    }\r\n\r\n    private PROPERTY_CHANGE: string = '.Property.Changed';\r\n    private PROPERTY_SET_ERROR: string = '.Property.SetError';\r\n}\r\n","/**\r\n * 外部配置信息\r\n * - TODO:\r\n * 封装功能相关信息、参数配置 并提供默认值\r\n * 当有元素变化时 抛出事件\r\n * 当有元素异常时 抛出异常\r\n * - NOTE:\r\n * 初始化时虽然会抛出属性变化事件，但是vf并没初始化完成，不会受影响\r\n * 如需抛出更改之前的属性值，需要将事件改为先发 并带上老属性值和设置的value.\r\n * @author 8088\r\n */\r\nimport BaseInfo from './BaseInfo';\r\nimport {CDN, ScaleMode} from './model/IVFData';\r\nimport {IVFOptions} from '../IVFEngine';\r\nimport I18N from './I18N';\r\n\r\nexport default class Config extends BaseInfo {\r\n\r\n    private _container: HTMLElement;\r\n\r\n    public readonly uuid: number;\r\n\r\n    private _id: string;\r\n\r\n    private _src?: string;\r\n\r\n    private _play: boolean;\r\n\r\n    private _loop: boolean;\r\n\r\n    private _menu: boolean;\r\n\r\n    private _scaleMode?: ScaleMode;\r\n\r\n    private _align: string;\r\n\r\n    private _wmode: string;\r\n\r\n    private _bgcolor?: string;\r\n\r\n    private _vfvars: any = {};\r\n    \r\n    private _plugs: any[] = [];\r\n\r\n    private _frameRate: number;\r\n\r\n    private _width: number;\r\n\r\n    private _height: number;\r\n\r\n    private _orientation: string;\r\n\r\n    private _maxTouches: number;\r\n\r\n    private _showFPS: boolean;\r\n\r\n    private _showLog: boolean;\r\n\r\n    private _logAdvancedTrace: boolean;\r\n\r\n    private _conversionData: any;\r\n\r\n    private _debug: boolean;\r\n\r\n    private _language: string;\r\n\r\n    private _i18n: I18N;\r\n\r\n    public cdns: CDN;\r\n\r\n    public realFPS: boolean = true;\r\n\r\n    constructor(options: IVFOptions) {\r\n        super();\r\n        this._container = options.container;\r\n        this.uuid = vf.utils.uid();\r\n        this._id = options.id || this.createRandomId();\r\n        this._src = options.src || undefined;\r\n        this._play = options.play === undefined ? true : Boolean(options.play);\r\n        this._loop = options.loop === undefined ? false : Boolean(options.loop);\r\n        this._menu = options.menu === undefined ? true : Boolean(options.menu);\r\n        this._scaleMode = options.scaleMode || undefined;\r\n        this._align = options.align || 'tl';\r\n        this._wmode = options.wmode || 'transparent';\r\n        this._bgcolor = options.bgcolor;\r\n        this._vfvars = options.vfvars || {};\r\n        this._frameRate = options.frameRate || 30;\r\n        this._width = options.width || 320;\r\n        this._height = options.height || 240;\r\n        this._orientation = options.orientation || 'auto';\r\n        this._maxTouches = options.maxTouches || 2;\r\n        this._showFPS = options.showFPS === undefined ? true : Boolean(options.showFPS);\r\n        this._showLog = options.showLog === undefined ? true : Boolean(options.showLog);\r\n        this._conversionData = options.conversionData;\r\n        this._debug = options.debug || false; \r\n        this._plugs = options.plugs || this._plugs;\r\n        this._logAdvancedTrace = options.logAdvancedTrace || false;\r\n        this.cdns = Array.isArray(options.vfvars.cdns) ? {default:options.vfvars.cdns} : options.vfvars.cdns;\r\n        if(this.cdns.image === undefined){\r\n            this.cdns.image = this.cdns.default.concat();\r\n        }\r\n        if(this.cdns.media === undefined){\r\n            this.cdns.media = this.cdns.default.concat();\r\n        }\r\n        if(this.cdns.wx === undefined){\r\n            this.cdns.wx = this.cdns.default.concat();\r\n        }\r\n        this._language = options.language || vf.utils.getSystemInfo().language;\r\n        this._i18n = new I18N(this._language);\r\n        this.realFPS = options.realFPS === true ? true : false;\r\n    }\r\n\r\n    public get container(): HTMLElement {\r\n        return this._container;\r\n    }\r\n\r\n    public set container(value: HTMLElement) {\r\n        if (this._container === value) { return; }\r\n        this._container = value;\r\n        this.propertyChange('container');\r\n    }\r\n\r\n    public get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    public set id(value: string) {\r\n        if (this._id === value) { return; }\r\n        this._id = value;\r\n        this.propertyChange('id');\r\n    }\r\n\r\n    public get src() {\r\n        return this._src;\r\n    }\r\n\r\n    public set src(value) {\r\n        if (this._src === value) { return; }\r\n        this._src = value;\r\n        this.propertyChange('src');\r\n    }\r\n\r\n    public get play(): boolean {\r\n        return this._play;\r\n    }\r\n\r\n    public set play(value: boolean) {\r\n        if (this._play === value) { return; }\r\n        this._play = value;\r\n        this.propertyChange('play');\r\n    }\r\n\r\n    public get loop(): boolean {\r\n        return this._loop;\r\n    }\r\n\r\n    public set loop(value: boolean) {\r\n        if (this._loop === value) { return; }\r\n        this._loop = value;\r\n        this.propertyChange('loop');\r\n    }\r\n\r\n    public get menu(): boolean {\r\n        return this._menu;\r\n    }\r\n\r\n    public set menu(value: boolean) {\r\n        if (this._menu === value) { return; }\r\n        this._menu = value;\r\n        this.propertyChange('menu');\r\n    }\r\n\r\n    public get scaleMode() {\r\n        return this._scaleMode;\r\n    }\r\n\r\n    public set scaleMode(value) {\r\n        if (this._scaleMode === value) { return; }\r\n        this._scaleMode = value\r\n        this.propertyChange('scaleMode');\r\n    }\r\n\r\n    public get align(): string {\r\n        return this._align;\r\n    }\r\n\r\n    public set align(value: string) {\r\n        if (this._align === value) { return; }\r\n        this._align = value;\r\n        this.propertyChange('align');\r\n    }\r\n\r\n    public get wmode(): string {\r\n        return this._wmode;\r\n    }\r\n\r\n    public set wmode(value: string) {\r\n        if (this._wmode === value) { return; }\r\n        this._wmode = value;\r\n        this.propertyChange('wmode');\r\n    }\r\n\r\n    public get bgcolor() {\r\n        return this._bgcolor;\r\n    }\r\n\r\n    public set bgcolor(value) {\r\n        if (this._bgcolor === value) { return; }\r\n        this._bgcolor = value;\r\n        this.propertyChange('bgcolor');\r\n    }\r\n\r\n    /**\r\n     * useNativeAudio : boolean\r\n     * cdns: string[]\r\n     */\r\n    public get vfvars() {\r\n        return this._vfvars;\r\n    }\r\n\r\n    public set vfvars(value) {\r\n        // if (_.isEmpty(value)) { return; }\r\n        // if (_.isEqual(this._vfvars, value)) { return; }\r\n        if(this._vfvars === value) { return; }\r\n        this._vfvars = value;\r\n        this.propertyChange('vfvars');\r\n    }\r\n\r\n    public get plugs() {\r\n        return this._plugs;\r\n    }\r\n    public set plugs(value) {\r\n        this._plugs = value;\r\n    }\r\n\r\n    public get frameRate(): number {\r\n        return this._frameRate;\r\n    }\r\n\r\n    public set frameRate(value: number) {\r\n        if (this._frameRate === value) { return; }\r\n        this._frameRate = value;\r\n        this.propertyChange('frameRate');\r\n    }\r\n\r\n    public get width(): number {\r\n        return this._width;\r\n    }\r\n\r\n    public set width(value: number) {\r\n        if (this._width === value) { return; }\r\n        this._width = value;\r\n        this.propertyChange('width');\r\n    }\r\n\r\n    public get height(): number {\r\n        return this._height;\r\n    }\r\n\r\n    public set height(value: number) {\r\n        if (this._height === value) { return; }\r\n        this._height = value;\r\n        this.propertyChange('height');\r\n    }\r\n\r\n    public get orientation(): string {\r\n        return this._orientation;\r\n    }\r\n\r\n    public set orientation(value: string) {\r\n        if (this._orientation === value) { return; }\r\n        this._orientation = value;\r\n        this.propertyChange('orientation');\r\n    }\r\n\r\n    public get maxTouches(): number {\r\n        return this._maxTouches;\r\n    }\r\n\r\n    public set maxTouches(value: number) {\r\n        if (this._maxTouches === value) { return; }\r\n        this._maxTouches = value;\r\n        this.propertyChange('maxTouches');\r\n    }\r\n\r\n    public get showFPS(): boolean {\r\n        return this._showFPS;\r\n    }\r\n\r\n    public set showFPS(value: boolean) {\r\n        if (this._showFPS === value) { return; }\r\n        this._showFPS = value;\r\n        this.propertyChange('showFPS');\r\n    }\r\n\r\n    public get showLog(): boolean {\r\n        return this._showLog;\r\n    }\r\n\r\n    public set showLog(value: boolean) {\r\n        if (this._showLog === value) { return; }\r\n        this._showLog = value;\r\n        this.propertyChange('showLog');\r\n    }\r\n\r\n    public set conversionData(value: string) {\r\n        if (this._conversionData === value) { return; }\r\n        this._conversionData = value;\r\n        this.propertyChange('conversionData');\r\n    }\r\n    \r\n    public get conversionData() {\r\n        return this._conversionData;\r\n    }\r\n\r\n    public set debug(value: boolean) {\r\n        if (this._debug === value) { return; }\r\n        this._debug = value;\r\n        this.propertyChange('debug');\r\n    }\r\n\r\n    public get debug() {\r\n        return this._debug;\r\n    }\r\n\r\n    public set logAdvancedTrace(value: boolean) {\r\n        if (this._logAdvancedTrace === value) { return; }\r\n        this._logAdvancedTrace = value;\r\n        this.propertyChange('logAdvancedTrace');\r\n    }\r\n\r\n    public get logAdvancedTrace() {\r\n        return this._logAdvancedTrace;\r\n    }\r\n\r\n    public get language(): string {\r\n        return this._language;\r\n    }\r\n\r\n    public set language(value: string) {\r\n        if (this._language === value) { return; }\r\n        this._language = value;\r\n        this.propertyChange('language');\r\n    }\r\n\r\n    public get i18n(): I18N {\r\n        return this._i18n;\r\n    }\r\n\r\n    public get info(): object {\r\n        return {\r\n            container: this.container,\r\n            id: this.id,\r\n            src: this.src,\r\n            play: this.play,\r\n            loop: this.loop,\r\n            menu: this.menu,\r\n            scaleMode: this.scaleMode,\r\n            align: this.align,\r\n            wmode: this.wmode,\r\n            bgcolor: this.bgcolor,\r\n            vfvars: this.vfvars,\r\n            plugs: this.plugs,\r\n            frameRate: this.frameRate,\r\n            width: this.width,\r\n            height: this.height,\r\n            orientation: this.orientation,\r\n            maxTouches: this.maxTouches,\r\n            showFPS: this.showFPS,\r\n            showLog: this.showLog,\r\n            logAdvancedTrace: this.logAdvancedTrace,\r\n            conversionData: this.conversionData,\r\n            debug: this.debug,\r\n            language: this.language,\r\n            i18n: this.i18n.info,\r\n        };\r\n    }\r\n}\r\n","/**\r\n * 国际化\r\n * - TODO:\r\n * 1、根据配置/默认载入对应语言数据并初始化\r\n * 2、外部统一通过i18n实例接口 通过 key 取信息, 支持批量取\r\n * 3、支持语言切换\r\n * @author 8088\r\n */\r\nimport BaseInfo from './BaseInfo';\r\nimport { readFileSyncExt } from '../utils/readFileSync';\r\nimport IEvent from '../event/IEvent';\r\nimport { VFStateCode } from './model/IVFData';\r\nimport { stringFormat } from '../utils/VFUtil';\r\nexport default class I18N extends BaseInfo {\r\n    private readonly lang: string = '';\r\n\r\n    private _data: any;\r\n\r\n    private _readyState: VFStateCode = VFStateCode.INIT;\r\n\r\n    constructor(language: string) {\r\n        super();\r\n        this.lang = language.toLocaleLowerCase();\r\n        if (this.lang.indexOf('en') !== -1) {\r\n            this.lang = 'en-us';\r\n        }\r\n        else {\r\n            this.lang = 'zh-cn';\r\n        }\r\n    }\r\n\r\n    public get readyState(): VFStateCode {\r\n        return this._readyState;\r\n    }\r\n    public set readyState(value) {\r\n        this._readyState = value;\r\n    }\r\n\r\n    public get info(): object {\r\n        return ['zh-CN', 'en-US'];\r\n    }\r\n\r\n    public t(key: string, param?: string[]): string {\r\n        const data = this._data;\r\n\r\n        if (data && data[key]) {\r\n            return stringFormat(data[key].message.toString(), param);\r\n        }\r\n\r\n        return `This message code[${key}] is not defined. \\n JSON = ${JSON.stringify(param)}`;\r\n    }\r\n\r\n    public async load(cdns: string[], onError: (err: any) => void): Promise<boolean> {\r\n        if (this.lang && this._readyState !== VFStateCode.READY) {\r\n            let url = '';\r\n\r\n            if (process.env.NODE_ENV === 'production') {\r\n                url = `vf/engine/i18n/${this.lang}.json?v=2`;\r\n            }\r\n            else {\r\n                url = `packages/i18n/${this.lang}.json`;\r\n            }\r\n            this._data = await readFileSyncExt(url, cdns, { responseType: 'json' }).catch((value: IEvent) => {\r\n                onError(value);\r\n            });\r\n            if (this._data) {\r\n                this._readyState = VFStateCode.READY;\r\n\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n","/* eslint-disable no-undef */\r\n/* eslint-disable no-unused-vars */\r\nimport {\r\n    IVFDataV1, IAsset, IAssetFail, ComponentType, ICustomComponent, IDisplayComponent,\r\n    AssetType, SceneEvent, IAction, ActionType, IActionDefineVariable, AllAction,\r\n} from './model/IVFData';\r\nimport importScript from '../utils/ImportScript';\r\nimport IEvent from '../event/IEvent';\r\nimport { VFStage } from '../display/VFStage';\r\nimport { VFScene } from '../display/VFScene';\r\nimport { VariableManager } from './VariableManager';\r\nimport { VFComponent } from '../display/VFComponent';\r\nimport { ActionList } from './actionTask/ActionList';\r\nimport { Animation } from './animation/Animation';\r\nimport { EventLevel } from '../event/EventLevel';\r\nimport { getAssetType } from '../../../assets/Assets';\r\nimport { AssetsType } from '../../../assets/IAssets';\r\nimport { getUrl } from '../utils/getUrl';\r\nimport { compatible } from '../utils/base64toBlob';\r\nimport { getSceneData } from '../display/SceneDataUtils';\r\n\r\nexport class RES extends vf.utils.EventEmitter {\r\n    public vfResources: { [id: string]: vf.LoaderResource } = {};\r\n\r\n    public vfActions: IAction[] = [];\r\n    private stage: VFStage;\r\n\r\n    private _resources: IAsset[] = [];\r\n    private _sceneMap: { [id: string]: VFScene } = {};\r\n    private _loadNum = 0;\r\n    private _loader?: vf.Loader;\r\n    private _assetFails = new Map<string, IAssetFail>();\r\n\r\n    private _isLoadScript = false;\r\n    private _isLoadResource = false;\r\n\r\n    constructor(stage: VFStage) {\r\n        super();\r\n        vf.gui.Utils.setSourcePath(this.getImageAsset.bind(this) as any);\r\n        vf.gui.Utils.setDisplayObjectPath(this.getDisplayObject.bind(this) as any);\r\n        this.stage = stage;\r\n        this.initGlobalVariable();\r\n    }\r\n\r\n    public get data(): IVFDataV1 {\r\n        return this.stage.data;\r\n    }\r\n\r\n    public destroy(): void {\r\n        if (this.vfResources) {\r\n            for (const id in this.vfResources) {\r\n                if (this.vfResources[id]) {\r\n                    const resource = this.vfResources[id];\r\n\r\n                    if (resource.texture) {\r\n                        resource.texture.destroy(true);\r\n                        delete this.vfResources[id];\r\n                    }\r\n                    else if ((resource as any).sound) {\r\n                        if ((resource as any).sound.media) {\r\n                            (resource as any).sound.destroy();\r\n                        }\r\n                        delete this.vfResources[id];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        vf.utils.destroyTextureCache();\r\n        vf.utils.clearTextureCache();\r\n        if (this._loader) {\r\n            this._loader.destroy();\r\n        }\r\n        this.stage = undefined as any;\r\n        this._sceneMap = {};\r\n    }\r\n\r\n    public async loadData(assets: IAsset[], js: IAsset[]): Promise<void> {\r\n\r\n        if (assets.length === 0 && js.length === 0) {\r\n            this.emit(SceneEvent.LoadComplete, null);\r\n        }\r\n        else {\r\n            const stage = this.stage;\r\n\r\n            this._isLoadScript = false;\r\n            this._isLoadResource = false;\r\n            await this.loadAllScript(stage, js); // 先加载脚本 loadAllAsset 非同步，后续单独提取assets同步加载，此处js并不算入进度\r\n            await this.loadAllAsset(stage, assets);\r\n        }\r\n    }\r\n\r\n    public createScene(id: string, vfStage: VFStage): VFScene | null {\r\n        const sceneData = getSceneData(this.data, id);\r\n\r\n        if (sceneData) {\r\n            let vfScene: VFScene = this._sceneMap[id];\r\n\r\n            if (vfScene == null) {\r\n                vfScene = new VFScene(vfStage);\r\n                vfScene.transition = sceneData.transition;\r\n            }\r\n            vfScene.id = id;\r\n            this._sceneMap[id] = vfScene;\r\n            if (sceneData.libId) {\r\n                const scene: VFComponent = this.createComponent(sceneData.libId, sceneData.id) as any;\r\n\r\n                if (scene) {\r\n                    scene.width = vfStage.width;\r\n                    scene.height = vfStage.height;\r\n                    vfScene.addComponent(scene);\r\n                }\r\n            }\r\n\r\n            return vfScene;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    private dataURLtoBlob(dataurl: string) {\r\n        let arr = dataurl.split(',') as any[];\r\n        let mime = arr[0].match(/:(.*?);/)[1],\r\n            bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\r\n        while (n--) {\r\n            u8arr[n] = bstr.charCodeAt(n);\r\n        }\r\n        return new Blob([u8arr], { type: mime });\r\n    }\r\n\r\n    public getImageAsset(index: number | string): vf.Texture | string | undefined {\r\n        // base64\r\n        if (index.toString().substr(0, 4) === 'data') {\r\n            return compatible(index as string);\r\n        }\r\n\r\n        const resource = this.getAsset(index);\r\n\r\n        if (resource) {\r\n            const assetData = this.data.assets[index];\r\n\r\n            switch (assetData.type) {\r\n                case AssetType.IMAGE:\r\n                    return resource.texture as vf.Texture;\r\n                case AssetType.SHEET:\r\n                    return resource.spritesheet;\r\n                default:\r\n                    return resource;\r\n            }\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    public getDisplayObject(id: string, target?: vf.gui.DisplayObject): any | undefined {\r\n        if (id == undefined) {\r\n            return undefined;\r\n        }\r\n        // 单独写组件ID为创建一个组件复制到显示对象，如果是从场景ID - ID - ID为查找\r\n        if (id.toString().substr(0, 4) === 'this' && target && target.parent instanceof VFComponent) {\r\n            const childIds = id.split('#');\r\n\r\n            childIds.shift();\r\n            let child = target.parent as VFComponent;\r\n\r\n            while (childIds.length > 0 && child) {\r\n                const id = childIds.shift() as string;\r\n\r\n                child = child.getChildById(id) as VFComponent;\r\n            }\r\n            if (child) {\r\n                return child;\r\n            }\r\n            this.stage.systemEvent.emitError('E0006', [id], EventLevel.WARNING);\r\n\r\n            return undefined;\r\n        }\r\n\r\n        return this.creategui(id);\r\n    }\r\n\r\n    public getAsset(index: number | string): any {\r\n        const assetData = this.data.assets[index];\r\n\r\n        if (assetData === undefined || assetData.id === undefined) {\r\n            this.stage.systemEvent.emitError('E0003', [index], EventLevel.WARNING);\r\n\r\n            return undefined;\r\n        }\r\n\r\n        return this.vfResources[assetData.id.toString()];\r\n    }\r\n\r\n    private async loadAllScript(stage: VFStage, asstes: IAsset[]): Promise<void> {\r\n        let item: IAsset;\r\n\r\n        for (let i = 0; i < asstes.length; ++i) {\r\n            item = asstes[i];\r\n            const cls = await importScript(item.url, stage.config.cdns, item.name).catch((e: IEvent) => {\r\n                stage.systemEvent.error(e);\r\n            });\r\n\r\n            if (cls) {\r\n                if (cls.isFilter && item.name) {\r\n                    vf.gui.Filter.list.set(item.name, cls); // 添加到滤镜列表\r\n                }\r\n            }\r\n        }\r\n        this._isLoadScript = true;\r\n        this.loadResourceComplete();\r\n    }\r\n\r\n    private async loadAllAsset(stage: VFStage, assets: IAsset[]): Promise<void> {\r\n        assets.forEach((assetsItem) => {\r\n            if (assetsItem.type === undefined) {\r\n                stage.systemEvent.emitError('E0001', [assetsItem.id]);\r\n\r\n                return;\r\n            }\r\n            if (assetsItem.url === '' || assetsItem.url === undefined) {\r\n                stage.systemEvent.emitError('E0003', [assetsItem.id], EventLevel.WARNING);\r\n\r\n                return;\r\n            }\r\n            if (assetsItem.type === AssetType.AUDIO && stage.config.vfvars.useNativeAudio) {\r\n                stage.systemEvent.emitError('S0004', [assetsItem.id], EventLevel.WARNING);\r\n\r\n                return;\r\n            }\r\n\r\n            this._resources.push(assetsItem);\r\n        });\r\n\r\n        this.loadResources();\r\n    }\r\n\r\n    private initGlobalVariable(): void {\r\n        if (this.data.global) {\r\n            this.stage.variableManager.addVariableConfig(VariableManager.GLOBAL_ID, this.data.global);\r\n            this.stage.variableManager.addVariableToGlobal(this.data.global);\r\n        }\r\n        if (this.vfActions) {\r\n            for (let i = 0, len: number = this.vfActions.length; i < len; i++) {\r\n                const action = this.vfActions[i];\r\n\r\n                if (action && action.type === ActionType.DefineVariable) {\r\n                    const defAction: IActionDefineVariable = action as IActionDefineVariable;\r\n\r\n                    this.stage.variableManager.addVariableDataToGlobal(defAction.varId,\r\n                        defAction.variableType,\r\n                        defAction.value);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private createComponent(libId: string, id: string): vf.gui.DisplayObject | null {\r\n        if (id === undefined || id === '') {\r\n            this.stage.systemEvent.emitError('E0004', [id], undefined, `libId = ${libId}`);\r\n\r\n            return null;\r\n        }\r\n        const componentData = this.data.components[libId] as ICustomComponent;\r\n        let component: vf.gui.DisplayObject | null = null;\r\n\r\n        if (componentData) {\r\n            switch (componentData.type) {\r\n                case ComponentType.Custom:\r\n                    component = this.createCustomComponent(libId, id);\r\n                    if (componentData.interactabled !== undefined) {\r\n                        component.interactabled = componentData.interactabled; // 性能优化，有部分业务，并不需要自定义组件有事件功能，可提前禁用\r\n                    }\r\n                    if (componentData.style !== undefined) {\r\n                        component.style = componentData.style;\r\n                    }\r\n                    break;\r\n                default:\r\n                    component = this.creategui(libId);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return component;\r\n    }\r\n\r\n    private creategui(id: string): vf.gui.DisplayObject | null {\r\n        const componentData = this.data.components[id] as ICustomComponent;\r\n\r\n        if (!componentData) {\r\n            return null;\r\n        }\r\n        const type: any = componentData.type;\r\n        // tslint:disable-next-line: new-parens\r\n        let ui: any;\r\n\r\n        try {\r\n            const cls = vf.gui.Utils.getGuiClass(type);\r\n\r\n            ui = new cls();\r\n        }\r\n        catch (e) {\r\n            this.stage.systemEvent.emitError('E0004', [id]);\r\n            throw new Error(`guiNamespace['${type}'] === undefined`);\r\n        }\r\n        if (ui) {\r\n            for (const key in componentData) {\r\n                if (key in componentData) {\r\n                    switch (key) {\r\n                        case 'id':\r\n                            // tslint:disable-next-line: no-string-literal\r\n                            ui.libId = componentData[key];\r\n                            break;\r\n                        case 'name':\r\n                            // tslint:disable-next-line: no-string-literal\r\n                            ui.libName = componentData[key];\r\n                            break;\r\n                        case 'type':\r\n                        case 'children':\r\n                        case 'animations':\r\n                        case 'actions':\r\n                        case 'libs':\r\n                            break;\r\n                        default:\r\n                            ui[key] = (componentData as any)[key];\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return ui;\r\n    }\r\n    private createCustomComponent(libId: string, id: string): vf.gui.Container {\r\n        const componentData = this.data.components[libId];\r\n        const customData = componentData as ICustomComponent;\r\n        const vfComponent: VFComponent = new VFComponent();\r\n\r\n        vfComponent.name = customData.name;\r\n        vfComponent.libId = libId;\r\n        vfComponent.id = id;\r\n\r\n        if (customData.props) {\r\n            this.stage.variableManager.addVariableConfig(libId.toString(), customData.props);\r\n            this.stage.variableManager.addVariableToComponent(vfComponent);\r\n        }\r\n\r\n        if (customData.children) {\r\n            for (let i = 0, len: number = customData.children.length; i < len; i++) {\r\n                const childData: any = customData.children[i];\r\n\r\n                if ('libId' in childData) {\r\n                    const childComponentData = this.data.components[childData.libId] as ICustomComponent;\r\n                    const child = this.createComponent(childData.libId, childData.id);\r\n\r\n                    if (child) {\r\n                        switch (childComponentData.type) {\r\n                            default:\r\n                                this.applyDisplayComponentProperty(child, childData);\r\n                                break;\r\n                        }\r\n                        vfComponent.addChild(child);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (customData.actionList && customData.actionList !== '') {\r\n            const actionList = new ActionList(vfComponent, customData.actionList);\r\n\r\n            vfComponent.actionList = actionList;\r\n        }\r\n        else if (libId !== undefined) {\r\n            const actions = this.getVfsByComponentId(libId.toString());\r\n\r\n            if (actions) {\r\n                const actionList = new ActionList(vfComponent, actions);\r\n\r\n                vfComponent.actionList = actionList;\r\n            }\r\n        }\r\n        if (customData.animations) {\r\n            const realFPS = this.stage.config.realFPS;\r\n            const animation = new Animation(vfComponent, customData.animations, this.data.fps, realFPS);\r\n\r\n            vfComponent.animation = animation;\r\n        }\r\n\r\n        return vfComponent;\r\n    }\r\n\r\n    private applyDisplayComponentProperty(display: vf.gui.DisplayObject, data: IDisplayComponent): void {\r\n        for (const key in data) {\r\n            if (key in data) {\r\n                switch (key) {\r\n                    // case 'id':\r\n                    // case 'name':\r\n                    case 'libId':\r\n                    case 'type':\r\n                    case 'children':\r\n                    case 'animations':\r\n                    case 'actions':\r\n                        break;\r\n                    default:\r\n                        if (key.indexOf('filter') === 0) {\r\n                            this.applyFilter(display, key, (data as any)[key]);\r\n                        }\r\n                        else {\r\n                            (display as any)[key] = (data as any)[key];\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private applyFilter(display: vf.gui.DisplayObject, filterKey: string, value: any): void {\r\n        const filterKeys = filterKey.split('.');\r\n        let target = display as any;\r\n\r\n        for (let i = 0, len: number = filterKeys.length; i < len - 1; i++) {\r\n            const curkey = filterKeys[i];\r\n\r\n            if (target && target[curkey]) {\r\n                target = target[curkey];\r\n            }\r\n        }\r\n        if (target) {\r\n            target[filterKeys[filterKeys.length - 1]] = value;\r\n        }\r\n    }\r\n\r\n    private loadResourceComplete(): void{\r\n        if (this._isLoadResource && this._isLoadScript) {\r\n            this.emit(SceneEvent.LoadComplete, [this._loader, this._resources]);\r\n        }\r\n    }\r\n\r\n    private loadResources(): void {\r\n        if (this._loader === undefined) {\r\n            this._loader = new vf.Loader();\r\n        }\r\n        const loader = this._loader;\r\n        const urls: any = {};\r\n        const resources = this._resources;\r\n\r\n        this._loadNum = 0;\r\n\r\n        for (let i = 0, len = resources.length; i < len; i++) {\r\n            const res = resources[i];\r\n\r\n            if (res.id && loader.resources[res.id]) {\r\n                continue;\r\n            }\r\n            if (urls[res.url]) {\r\n                urls[res.url].push(res.id);\r\n                continue;\r\n            }\r\n            if (res.type === 'audio' || res.type === 'sound') {\r\n                // 微信wechat不能直接加载audio类型\r\n                // eslint-disable-next-line max-len\r\n                loader.add(res.id, getUrl(res.url, this.data.baseUrl), { loadType: vf.LoaderResource.LOAD_TYPE.XHR, xhrType: 'arraybuffer' });\r\n            }\r\n            else {\r\n                loader.add(res.id, getUrl(res.url, this.data.baseUrl));\r\n            }\r\n\r\n            urls[res.url] = [res.id];\r\n        }\r\n        let progressId = 0;\r\n        let completeId = 0;\r\n        let errorId = 0;\r\n\r\n        progressId = loader.onProgress.add((loader2: vf.Loader, resources: any) => {\r\n            this._loadNum++;\r\n            this.emit(SceneEvent.LoadProgress, [loader2.progress, this._loadNum, this._resources.length, resources]);\r\n        });\r\n        completeId = loader.onComplete.add((loader2: vf.Loader, resources: any) => {\r\n            this.vfResources = resources;\r\n            if (!this.loadFailResources()) {\r\n                for (const key in urls) {\r\n                    const id = urls[key].shift();\r\n\r\n                    while (urls[key].length > 0) {\r\n                        this.vfResources[urls[key].shift()] = resources[id];\r\n                    }\r\n                }\r\n                loader.onComplete.detach(progressId);\r\n                loader.onComplete.detach(completeId);\r\n                loader.onComplete.detach(errorId);\r\n                this._isLoadResource = true;\r\n                this.loadResourceComplete();\r\n            }\r\n        });\r\n        errorId = loader.onError.add((error: Error, loader2: vf.Loader, loaderResource: vf.LoaderResource) => {\r\n            const assetFail = this._assetFails.get(loaderResource.name);\r\n\r\n            if (assetFail) {\r\n                if (assetFail.count >= 4) {\r\n                    this._assetFails.delete(loaderResource.name);\r\n                    this.stage.systemEvent.emitError('404', [loaderResource.url]);\r\n                }\r\n                assetFail.count++;\r\n            }\r\n            else {\r\n                this._assetFails.set(loaderResource.name, { id: loaderResource.name,\r\n                    url: loaderResource.url,\r\n                    extension: loaderResource.extension, count: 1 });\r\n            }\r\n        });\r\n        loader.load();\r\n    }\r\n\r\n    /** */\r\n    private loadFailResources(): boolean {\r\n        if (this._loader === undefined) {\r\n            return false;\r\n        }\r\n\r\n        if (this._assetFails.size <= 0) {\r\n            return false;\r\n        }\r\n        const loader = this._loader;\r\n        const cdns = this.stage.config.cdns;\r\n\r\n        this._assetFails.forEach((res) => {\r\n            const type = getAssetType(res.extension);\r\n            let cdn: any[];\r\n\r\n            switch (type) {\r\n                case AssetsType.Image:\r\n                    cdn = cdns.image;\r\n                    break;\r\n                case AssetsType.Audio:\r\n                case AssetsType.Video:\r\n                    cdn = cdns.media;\r\n                    break;\r\n                default:\r\n                    cdn = cdns.default;\r\n            }\r\n            let url = cdn[(res.count - 1) % cdn.length];\r\n\r\n            if (res.url.indexOf('http') !== -1 || res.url.indexOf('//') === 0) {\r\n                url += res.url.substr(res.url.indexOf('/', res.url.indexOf('.')));\r\n            }\r\n            else {\r\n                url += res.url;\r\n            }\r\n            delete loader.resources[res.id];\r\n            loader.add(res.id, url);\r\n        });\r\n\r\n        return true;\r\n    }\r\n\r\n    private getVfsByComponentId(libId: string): AllAction[] | undefined {\r\n        if (this.vfActions) {\r\n            for (let i = 0, len: number = this.vfActions.length; i < len; i++) {\r\n                const action = this.vfActions[i];\r\n\r\n                if (action && action.type === ActionType.ActionList && action.value === libId) {\r\n                    return action.execute;\r\n                }\r\n            }\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n}\r\n\r\n","import { IVariableData, ExpressItem, ExpressType, ExpressItemType, \r\n         SystemValueType, VariableType, VariableDataValue } from './model/IVFData';\r\nimport { FunctionTask } from './actionTask/FunctionTask';\r\nimport { VFComponent } from '../display/VFComponent';\r\nimport { getTargetComponent, isObject, isArray, isNumber, isBoolean, isString } from '../utils/VFUtil';\r\nimport { EventLevel } from '../event/EventLevel';\r\n\r\nexport class VariableManager {\r\n\r\n        public static GLOBAL_ID: string = 'global';\r\n\r\n        public static OPERATE_PRIORITY = {\r\n            '*' : 100,\r\n            '/' : 100,\r\n            '%' : 98,\r\n            '+' : 97,\r\n            '-' : 97,\r\n            '>=' : 95,\r\n            '<=' : 94,\r\n            '>' : 93,\r\n            '<' : 92,\r\n            '==' : 91,\r\n            '===' : 91,\r\n            '!=' : 90,\r\n            '!==' : 90,\r\n            '!' : 89,\r\n            '&&' : 88,\r\n            '||' : 87,\r\n            '=' : 86,\r\n        };\r\n\r\n        public variableConfig: {[id: string]: {[vid: string]: IVariableData}} = {};\r\n        public variableMap: {[id: string]: {[vid: string]: IVariableData}} = {};\r\n\r\n        private runFunctionId: number = 0;\r\n        private functionMap: {[name: string]: FunctionTask} = {};\r\n\r\n        constructor() {\r\n            //\r\n        }\r\n\r\n\r\n        /**\r\n         * Fisher-Yates shuffle\r\n         * @param arr \r\n         */\r\n        public shuffle(arr: any[]): void {\r\n            for (let i = arr.length - 1; i >= 0; i--) {\r\n                const randomIndex = Math.floor(Math.random() * (i + 1));\r\n                const itemAtIndex = arr[randomIndex];\r\n                arr[randomIndex] = arr[i];\r\n                arr[i] = itemAtIndex;\r\n            }\r\n        }\r\n        public clear(): void {\r\n            this.variableMap = {};\r\n            this.functionMap = {};\r\n        }\r\n        public getFunctionId(): number {\r\n            return ++this.runFunctionId;\r\n        }\r\n        \r\n        public getFunctionTask(name: string): FunctionTask {\r\n            return this.functionMap[name];\r\n        }\r\n\r\n        public setFunctionTask(name: string, task: FunctionTask): void {\r\n            this.functionMap[name] = task;\r\n        }\r\n\r\n        public addVariableConfig(id: string, variableData: {[id: string]: IVariableData}): void {\r\n            if (!this.variableConfig[id]) {\r\n                const normalConfig = this.normalizeVariableConfig(variableData);\r\n                this.variableConfig[id] = normalConfig;\r\n            }\r\n        }\r\n\r\n        public normalizeVariableConfig(variableData: {[id: string]: VariableDataValue}): {[id: string]: IVariableData} {\r\n            for (const id in variableData) {\r\n                if (variableData.hasOwnProperty(id)) {\r\n                    const v = variableData[id];\r\n                    const varV = this.createIVariableData(id, v);\r\n                    variableData[id] = varV;\r\n                }\r\n            }\r\n            return variableData;\r\n        }\r\n\r\n        public addVariableToGlobal(variableData: {[id: string]: IVariableData}): void {\r\n            const globalId: string = VariableManager.GLOBAL_ID;\r\n            this.variableMap[globalId] = this.deepCopy(variableData);\r\n\r\n            if (this.variableConfig[globalId]) {\r\n                const variables = this.variableConfig[globalId];\r\n                this.variableMap[globalId] = this.deepCopy(variables);\r\n            } else {\r\n                this.addVariableConfig(globalId, variableData);\r\n                if (this.variableConfig[globalId]) {\r\n                    const variables = this.variableConfig[globalId];\r\n                    this.variableMap[globalId] = this.deepCopy(variables);\r\n                } \r\n            }\r\n        }\r\n\r\n        public addVariableToComponent(component: VFComponent): void {\r\n            const libId = component.libId;\r\n            if (libId) {\r\n                if (this.variableConfig[libId.toString()]) {\r\n                    const variables = this.variableConfig[libId.toString()];\r\n                    this.variableMap[component.id.toString()] = this.deepCopy(variables);\r\n                }\r\n            }\r\n        }\r\n        \r\n        public addVariableDataToComponent(component: VFComponent, varId: string, type: VariableType, data: any): void {\r\n            const libId = component.libId;\r\n            const compId = component.id;\r\n            this.addVariable(libId, compId, varId, type, data);\r\n        }\r\n        public addVariableDataToGlobal(varId: string, type: VariableType, data: any): void {\r\n            this.addVariable(VariableManager.GLOBAL_ID, VariableManager.GLOBAL_ID, varId, type, data);\r\n        }\r\n            \r\n        public addVariable(libId: string, targetId: string, varId: string, type: VariableType, data: any): void {\r\n            const variableData: IVariableData = {\r\n                id: varId,\r\n                type,\r\n                value: data,\r\n            };\r\n            const variable2: IVariableData = {\r\n                id: varId,\r\n                type,\r\n                value: data,\r\n            };\r\n\r\n            let globalVarConfig = this.variableConfig[libId];\r\n            if (!globalVarConfig) {\r\n                globalVarConfig = {};\r\n                this.variableConfig[libId] = globalVarConfig;\r\n            }\r\n            globalVarConfig[varId] = variableData;\r\n            \r\n            let globalVarMap = this.variableMap[targetId];\r\n            if (!globalVarMap) {\r\n                globalVarMap = {};\r\n                this.variableMap[targetId] = globalVarMap;\r\n            }\r\n            globalVarMap[varId] = variable2;\r\n        }\r\n\r\n        public getGlobalVariable(id: string): IVariableData | undefined {\r\n            return this.getVariable(VariableManager.GLOBAL_ID, id);\r\n        }\r\n        public getVariable(hasCode: string, id: string): IVariableData | undefined {\r\n            const varData: {[id: string]: IVariableData} = this.variableMap[hasCode];\r\n            if (varData && varData[id]) {\r\n                return varData[id];\r\n            }\r\n        }\r\n        public getVariableByData(component: VFComponent, expressItem: ExpressItem): IVariableData | undefined {\r\n            if (expressItem[0] === ExpressItemType.PARAM_VALUE) {\r\n                return this.getVariable(VariableManager.GLOBAL_ID, expressItem[2]);\r\n            }\r\n            const varComponent: VFComponent  = getTargetComponent(component, expressItem[1]) as VFComponent;\r\n            const hashCode = varComponent ? varComponent.id.toString() : VariableManager.GLOBAL_ID;\r\n            const varItem = this.getVariable(hashCode, expressItem[2]);\r\n            return varItem;\r\n        }\r\n\r\n        public caculateExpress(component: VFComponent, express: ExpressType): any {\r\n            const stackOut: ExpressType = [];\r\n            const stackOperate: ExpressType = [];\r\n            for (let i: number = 0, len: number = express.length; i < len; i++) {\r\n                const expressItem = express[i];\r\n                switch (expressItem[0]) {\r\n                    case ExpressItemType.CONST:\r\n                    case ExpressItemType.VARIABLE:\r\n                    case ExpressItemType.STSTEN:\r\n                    case ExpressItemType.RANDOM:\r\n                    case ExpressItemType.PROPERTY:\r\n                    case ExpressItemType.ARRAY_LEN:\r\n                    case ExpressItemType.ARRAY_VALUE:\r\n                    case ExpressItemType.OBJECT_VALUE:\r\n                    case ExpressItemType.PARAM_VALUE:\r\n                    case ExpressItemType.ARRAY_FUNCTION:\r\n                    case ExpressItemType.COMPONENT:\r\n                        stackOut.push(expressItem);\r\n                        break;\r\n                    case ExpressItemType.OPERATION:\r\n                        switch (expressItem[1]) {\r\n                            case '(':\r\n                                stackOperate.push(expressItem);\r\n                                break;\r\n                            case ')':\r\n                                let v = stackOperate.pop();\r\n                                while ( v && v[1] !== '(') {\r\n                                    stackOut.push(v);\r\n                                    v = stackOperate.pop();\r\n                                }\r\n                                break;\r\n                            default:\r\n                                const operateStr = expressItem[1];\r\n                                const curPriority = (VariableManager.OPERATE_PRIORITY as any)[operateStr];\r\n                                if (!curPriority) {\r\n                                    // can not support this operation:\r\n                                    this.emitError(component, 'E1001', [operateStr], EventLevel.WARNING);\r\n                                    return 0;\r\n                                } else {\r\n                                    if (stackOperate.length > 0) {\r\n                                        let topOperate = stackOperate[stackOperate.length - 1];\r\n                                        let topOperatePriority = \r\n                                            (VariableManager.OPERATE_PRIORITY as any)[topOperate[1]];\r\n                                        if (curPriority > topOperatePriority) {\r\n                                            stackOperate.push(expressItem);\r\n                                        } else {\r\n                                            while (curPriority <= topOperatePriority) {\r\n                                                stackOut.push(topOperate);\r\n                                                stackOperate.pop();\r\n                                                if (stackOperate.length > 0) {\r\n                                                    topOperate = stackOperate[stackOperate.length - 1];\r\n                                                    topOperatePriority = \r\n                                                        (VariableManager.OPERATE_PRIORITY as any)[topOperate[1]];\r\n                                                } else {\r\n                                                    break;\r\n                                                }\r\n                                            }\r\n                                            stackOperate.push(expressItem);\r\n                                        }\r\n                                    } else {\r\n                                        stackOperate.push(expressItem);\r\n                                    }\r\n                                }\r\n                                break;\r\n                        }\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n            if (stackOperate.length > 0) {\r\n                while (stackOperate.length > 0) {\r\n                    const operateStr = stackOperate.pop();\r\n                    if (operateStr) {\r\n                        stackOut.push(operateStr);\r\n                    }\r\n                }\r\n            }\r\n            const value = this.caculateExpressValue(component, stackOut);\r\n            return value;\r\n        }\r\n        public getExpressItemValue(component: VFComponent, expressItem: ExpressItem): any {\r\n            let result: any;\r\n            switch (expressItem[0]) {\r\n                case ExpressItemType.CONST:\r\n                    result = (expressItem[1]);\r\n                    break;\r\n                case ExpressItemType.VARIABLE:\r\n\r\n                    const varItem = this.getVariableByData(component, expressItem);\r\n                    if (varItem) {\r\n                        result = (varItem.value);\r\n                    } else {\r\n                        this.emitError(component, 'E1002', [expressItem.join(',')], EventLevel.WARNING);\r\n                        // can not find variable:\r\n                    }\r\n                    \r\n                    break;\r\n                case ExpressItemType.STSTEN:\r\n                    const curDate = new Date();\r\n                    let systemValue = 0;\r\n                    switch (expressItem[1]) {\r\n                        case SystemValueType.TIME:\r\n                            systemValue = curDate.getTime();\r\n                            break;\r\n                        case SystemValueType.YEAR:\r\n                            systemValue = curDate.getFullYear();\r\n                            break;\r\n                        case SystemValueType.MONTH:\r\n                            systemValue = curDate.getMonth();\r\n                            break;\r\n                        case SystemValueType.DAY:\r\n                            systemValue = curDate.getDay();\r\n                            break;\r\n                        case SystemValueType.DATE:\r\n                            systemValue = curDate.getDate();\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    result = (systemValue);\r\n                    break;\r\n                case ExpressItemType.RANDOM:\r\n                    let randomValue = 0;\r\n                    if (expressItem.length >= 3) {\r\n                        const min = expressItem[1];\r\n                        const max = expressItem[2];\r\n                        randomValue = Math.round(Math.random() * (max - min)) + min;\r\n                    } else {\r\n                        randomValue = Math.random();\r\n                    }\r\n                    result = (randomValue);\r\n                    break;\r\n                case ExpressItemType.COMPONENT:\r\n                    const targetArr0 = expressItem[1];\r\n                    const targetComponent0 = getTargetComponent(component, targetArr0);\r\n                    result = targetComponent0;\r\n                    break;\r\n                case ExpressItemType.PROPERTY:\r\n                    const targetArr = expressItem[1];\r\n                    const targetComponent = getTargetComponent(component, targetArr);\r\n                    let componentProperty: any = targetComponent;\r\n                    if (componentProperty && expressItem.length >= 3) {\r\n                        for (let i: number = 2, len: number = expressItem.length; i < len; i++) {\r\n                            const key = expressItem[i];\r\n                            if (componentProperty && key !== undefined) {\r\n                                componentProperty = componentProperty[key];\r\n                            }\r\n                        }\r\n                        result = componentProperty;\r\n                    } else {\r\n                        result = undefined;\r\n                    }\r\n                    break;\r\n                case ExpressItemType.ARRAY_LEN:\r\n                    const arrItem = this.getVariableByData(component, expressItem);\r\n                    if (arrItem) {\r\n                        result = (arrItem.value.length);\r\n                    } else {\r\n                        this.emitError(component, 'E1002', [expressItem.join(',')], EventLevel.WARNING);\r\n                        // can not find variable:\r\n                    }\r\n                    break;\r\n                case ExpressItemType.ARRAY_VALUE:\r\n                    // expressItem 0:type, 1:componentId, 2: variableId, 3: index, 4?: property\r\n                    const arrItem1 = this.getVariableByData(component, expressItem);\r\n                    if (arrItem1) {\r\n                        const arr = arrItem1.value;\r\n                        let index: number = expressItem[3];\r\n                        if (Array.isArray(index)) {\r\n                            const indexVar = this.getExpressItemValue(component, index);\r\n                            if (isNumber(indexVar) ) {\r\n                                index = indexVar;\r\n                            } else {\r\n                                // can not find array index by variable:\r\n                                this.emitError(component, 'E1003', [index], EventLevel.WARNING);\r\n                                index = 0;\r\n                            }\r\n                        }\r\n                        result = arr[index];\r\n                        if (expressItem.length >= 5 && result) {\r\n                            result = result[expressItem[4]]; \r\n                        } \r\n                    } else {\r\n                        this.emitError(component, 'E1002', [expressItem.join(',')], EventLevel.WARNING);\r\n                        // can not find variable:\r\n                        \r\n                    }\r\n                    break;\r\n                case ExpressItemType.ARRAY_FUNCTION:\r\n                    const arrItem2 = this.getVariableByData(component, expressItem);\r\n                    if (arrItem2) {\r\n                        if (Array.isArray(arrItem2.value)) {\r\n                            const targetArray: any[] = arrItem2.value;\r\n                            switch (expressItem[3]) {\r\n                                case 'pop': // [10, [], 'arr', 'pop']\r\n                                    result = targetArray.pop();\r\n                                    break;\r\n                                case 'push': // [10, [], 'arr', 'push', [0, 4]]\r\n                                    if (expressItem.length > 4) {\r\n                                        const pushTarget = this.getExpressItemValue(component, expressItem[4]);\r\n                                        result = targetArray.push(pushTarget);\r\n                                    }\r\n                                    break;\r\n                                case 'shift': // [10, [], 'arr', 'shift']\r\n                                    result = targetArray.shift();\r\n                                    break;\r\n                                case 'unshift': // [10, [], 'arr', 'unshift', [0, 4]]\r\n                                    if (expressItem.length > 4) {\r\n                                        const unshiftTarget = this.getExpressItemValue(component, expressItem[4]);\r\n                                        result = targetArray.unshift(unshiftTarget);\r\n                                    }\r\n                                    break;\r\n                                case 'concat': // [10, [], 'arr', 'concat', [0, [1,2]]]\r\n                                    if (expressItem.length > 3) {\r\n                                        if (expressItem.length > 4) {\r\n                                            const concatTarget = this.getExpressItemValue(component, expressItem[4]);\r\n                                            result = targetArray.concat(concatTarget);\r\n                                        } else {\r\n                                            result = targetArray.concat();\r\n                                        }\r\n                                    }\r\n                                    break;\r\n                                case 'splice': // [10, [], 'arr', 'splice', [0, 1], [0,1] => $arr.splice(1,1);\r\n                                    if (expressItem.length === 5) {\r\n                                        const startValue = this.getExpressItemValue(component, expressItem[4]);\r\n                                        result = targetArray.splice(startValue);\r\n                                    } else if (expressItem.length === 6) {\r\n                                        const startValue = this.getExpressItemValue(component, expressItem[4]);\r\n                                        const deleteCount = this.getExpressItemValue(component, expressItem[5]);\r\n                                        result = targetArray.splice(startValue, deleteCount);\r\n                                    } else if (expressItem.length > 6) {\r\n                                        const startValue = this.getExpressItemValue(component, expressItem[4]);\r\n                                        const deleteCount = this.getExpressItemValue(component, expressItem[5]);\r\n                                        const addValue = this.getExpressItemValue(component, expressItem[6]);\r\n                                        result = targetArray.splice(startValue, deleteCount, addValue);\r\n                                    }\r\n                                    break;\r\n                                default:\r\n                                    // array has not function: \r\n                                    this.emitError(component, 'E1004', [expressItem[3]], EventLevel.WARNING);\r\n                                    break;\r\n                            }\r\n                        } else {\r\n                            // variable is not array: \r\n                            this.emitError(component, 'E1005', [expressItem.join(',')], EventLevel.WARNING);\r\n                        }\r\n                    } else {\r\n                        this.emitError(component, 'E1002', [expressItem.join(',')], EventLevel.WARNING);\r\n                        // can not find variable:\r\n                    }\r\n                    break;\r\n                case ExpressItemType.OBJECT_VALUE:\r\n                case ExpressItemType.PARAM_VALUE:\r\n                    // expressItem 0:type, 1:componentId, 2: variableId, 3: property, 4?: property\r\n                    const objItem = this.getVariableByData(component, expressItem);\r\n                    if (objItem) {\r\n                        let obj = objItem.value;\r\n                        for (let i: number = 3, len: number = expressItem.length; i < len; i++) {\r\n                            const key = expressItem[i];\r\n                            if (obj && key !== undefined) {\r\n                                obj = obj[key];\r\n                            }\r\n                        }\r\n                        result = obj;\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            return result;\r\n        }\r\n\r\n        private caculateExpressValue(component: VFComponent, stackExpress: ExpressType): any {\r\n            const stackOut: ExpressType = [];\r\n            if (stackExpress.length === 1) {\r\n                return this.getExpressItemValue(component, stackExpress[0]);\r\n            }\r\n            for (let i: number = 0, len: number = stackExpress.length; i < len; i++) {\r\n                const expres = stackExpress[i];\r\n                switch (expres[0]) {\r\n                    case ExpressItemType.OPERATION:\r\n                        let expItem0: ExpressItem | undefined;\r\n                        let expItem1: ExpressItem | undefined;\r\n                        if (expres[1] === '!') {\r\n                            expItem0 = stackOut.pop();\r\n                        } else {\r\n                            expItem1 = stackOut.pop();\r\n                            expItem0 = stackOut.pop();\r\n                        }\r\n                        const resultItem = this.caculateOneExpress(component, expres[1], expItem0, expItem1);\r\n                        stackOut.push(resultItem);\r\n                        break;\r\n                    default:\r\n                        stackOut.push(expres);\r\n                        break;\r\n                }\r\n            }\r\n            if (stackOut.length === 1) {\r\n                return stackOut[0][1];\r\n            } else {\r\n                // caculateExpressValue error'\r\n                this.emitError(component, 'E1006', undefined, EventLevel.WARNING);\r\n                return 0;\r\n            }\r\n        }\r\n\r\n        private caculateOneExpress(component: VFComponent, operateStr: string, \r\n                                   expItem0?: ExpressItem, expItem1?: ExpressItem): ExpressItem {\r\n            const resultItem: ExpressItem = [ExpressItemType.CONST, 0];\r\n            let result0: any;\r\n            let result1: any;\r\n            let result: any;\r\n            if (expItem0) {\r\n                result0 = this.getExpressItemValue(component, expItem0);\r\n            }\r\n            if (expItem1) {\r\n                result1 = this.getExpressItemValue(component, expItem1);\r\n            }\r\n            switch (operateStr) {\r\n                case '*' :\r\n                    result = result0 * result1;\r\n                    break;\r\n                case '/' :\r\n                    result = result0 / result1;\r\n                    break;\r\n                case '%' :\r\n                    result = result0 % result1;\r\n                    break;\r\n                case '+' :\r\n                    result = result0 + result1;\r\n                    break;\r\n                case '-' :\r\n                    result = result0 - result1;\r\n                    break;\r\n                case '>=' :\r\n                    result = result0 >= result1;\r\n                    break;\r\n                case '<=' :\r\n                    result = result0 <= result1;\r\n                    break;\r\n                case '>' :\r\n                    result = result0 > result1;\r\n                    break;\r\n                case '<' :\r\n                    result = result0 < result1;\r\n                    break;\r\n                case '==' :\r\n                    // tslint:disable-next-line: triple-equals\r\n                    result = result0 == result1;\r\n                    break;\r\n                case '===' :\r\n                    result = result0 === result1;\r\n                    break;\r\n                case '!=' :\r\n                    // tslint:disable-next-line: triple-equals\r\n                    result = result0 != result1;\r\n                case '!==' :\r\n                    result = result0 !== result1;\r\n                    break;\r\n                case '!' :\r\n                    result = !result0;\r\n                    break;\r\n                case '&&' :\r\n                    result = result0 && result1;\r\n                    break;\r\n                case '||' :\r\n                    result = result0 || result1;\r\n                    break;\r\n                case '=' :\r\n                    result = result1;\r\n                    if (expItem0) {\r\n                        switch (expItem0[0]) {\r\n                            case ExpressItemType.VARIABLE:\r\n                                const varItem = this.getVariableByData(component, expItem0);\r\n                                if (varItem) {\r\n                                    varItem.value = result;\r\n                                } else {\r\n                                    this.emitError(component, 'E1002', [expItem0.join(',')], EventLevel.WARNING);\r\n                                    // can not find variable:\r\n                                }\r\n                                break;\r\n                            case ExpressItemType.PROPERTY:\r\n                                const targetArr = expItem0[1];\r\n                                const targetProperty = expItem0[2];\r\n                                const targetComponent = getTargetComponent(component, targetArr);\r\n                                if (targetComponent) {\r\n                                    if (expItem0.length >= 3) {\r\n                                        let targetProp: any = targetComponent;\r\n                                        let prop: any = targetProperty;\r\n                                        for (let i: number = 2, len: number = expItem0.length; i < len; i++) {\r\n                                            prop = expItem0[i];\r\n                                            if (i === len - 1) {\r\n                                                break;\r\n                                            } else {\r\n                                                if (targetProp) {\r\n                                                    targetProp = targetProp[prop];\r\n                                                } else {\r\n                                                    // can not find property: \r\n                                                    this.emitError(component, 'E1007', [expItem0.join(',')], \r\n                                                                    EventLevel.WARNING);\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                        if (targetProp && prop) {\r\n                                            targetProp[prop] = result;\r\n                                        } else {\r\n                                            // can not find property: \r\n                                            this.emitError(component, 'E1007', [expItem0.join(',')], \r\n                                                            EventLevel.WARNING);\r\n                                        }\r\n                                    } \r\n                                }\r\n                                break;\r\n                            case ExpressItemType.ARRAY_LEN:\r\n                                const arrItem = this.getVariableByData(component, expItem0);\r\n                                if (arrItem) {\r\n                                    arrItem.value.length = result;\r\n                                } else {\r\n                                    this.emitError(component, 'E1002', [expItem0.join(',')], EventLevel.WARNING);\r\n                                    // can not find variable:\r\n                                }\r\n                                break;\r\n                            case ExpressItemType.ARRAY_VALUE:\r\n                                // expItem0 0:type, 1:componentId, 2: variableId, 3: index, 4?: property\r\n                                const arrItem1 = this.getVariableByData(component, expItem0);\r\n                                if (arrItem1) {\r\n                                    const arr = arrItem1.value;\r\n                                    let index: number = expItem0[3] || 0;\r\n                                    if (Array.isArray(index)) {\r\n                                        const indexVar = this.getExpressItemValue(component, index);\r\n                                        if (isNumber(indexVar) ) {\r\n                                            index = indexVar;\r\n                                        } else {\r\n                                            // can not find array index by variable:\r\n                                            this.emitError(component, 'E1003', [index], \r\n                                                            EventLevel.WARNING);\r\n                                            index = 0;\r\n                                        }\r\n                                    }\r\n                                    if (expItem0.length >= 5) {\r\n                                        let obj = arr[index];\r\n                                        let key;\r\n                                        for (let i: number = 4, len: number = expItem0.length; i < len; i++) {\r\n                                            key = expItem0[i];\r\n                                            if (i < len - 1 && obj[key]) {\r\n                                                obj = obj[key];\r\n                                            }\r\n                                        }\r\n                                        if (obj && key !== undefined) {\r\n                                            obj[key] = result;\r\n                                        }\r\n                                    } else {\r\n                                        arr[index] = result;\r\n                                    }\r\n                                } else {\r\n                                    this.emitError(component, 'E1002', [expItem0.join(',')], EventLevel.WARNING);\r\n                                    // can not find variable:\r\n                                }\r\n                                break;\r\n                            case ExpressItemType.OBJECT_VALUE:\r\n                            case ExpressItemType.PARAM_VALUE:\r\n                                // expressItem 0:type, 1:componentId, 2: variableId, 3: property, 4?: property\r\n                                const objItem = this.getVariableByData(component, expItem0);\r\n                                if (objItem) {\r\n                                    let obj = objItem.value;\r\n                                    let key;\r\n                                    for (let i: number = 3, len: number = expItem0.length; i < len; i++) {\r\n                                        key = expItem0[i];\r\n                                        if (i < len - 1 && obj[key]) {\r\n                                            obj = obj[key];\r\n                                        }\r\n                                    }\r\n                                    if (obj && key !== undefined) {\r\n                                        obj[key] = result;\r\n                                    } else {\r\n                                        // 基本类型\r\n                                        objItem.value = result;\r\n                                    }\r\n                                }\r\n                                break;\r\n                            case ExpressItemType.CONST:\r\n                                // the left value can NOT be const:\r\n                                this.emitError(component, 'E1008', [expItem0.join(',')], EventLevel.WARNING);\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                    }\r\n                    break;\r\n                default:\r\n                    // can not support this operation:\r\n                    this.emitError(component, 'E1001', [operateStr], EventLevel.WARNING);\r\n                    break;\r\n            }\r\n            resultItem[1] = result;\r\n            return resultItem;\r\n        }\r\n\r\n        private deepCopy(variableData: {[id: string]: IVariableData}): {[id: string]: IVariableData} {\r\n                const str = JSON.stringify(variableData);\r\n                const newVariableData = JSON.parse(str) as {[id: string]: IVariableData};\r\n                return newVariableData;\r\n        }\r\n\r\n        private isIVariableData(v: any): boolean {\r\n            if (isObject(v)  &&  \r\n               v.hasOwnProperty('type') && \r\n               v.hasOwnProperty('value') &&\r\n               ( v.type === VariableType.ARRAY ||\r\n                 v.type === VariableType.BOOLEAN ||\r\n                 v.type === VariableType.NUMBER ||\r\n                 v.type === VariableType.OBJECT ||\r\n                 v.type === VariableType.STRING)\r\n               ) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        private createIVariableData(id: string, v: any): IVariableData {\r\n            if (!this.isIVariableData(v)) {\r\n                const varData: IVariableData = {\r\n                    id,\r\n                    type: VariableType.OBJECT,\r\n                    value: v,\r\n                };\r\n                if (isBoolean(v)) {\r\n                    varData.type = VariableType.BOOLEAN;\r\n                } else if ( isString(v)) {\r\n                    varData.type = VariableType.STRING;\r\n                } else if ( isNumber(v)) {\r\n                    varData.type = VariableType.STRING;\r\n                } else if ( isArray(v)) {\r\n                    varData.type = VariableType.ARRAY;\r\n                } else {\r\n                    varData.type = VariableType.OBJECT;\r\n                }\r\n                return varData;\r\n            } else {\r\n                return v;\r\n            }\r\n        }\r\n        private emitError(component: VFComponent, code: string, params?: any[], level: EventLevel = EventLevel.ERROR) {\r\n            if (component && component.vfStage) {\r\n                const vfStage = component.vfStage;\r\n                vfStage.systemEvent.emitError(code, params, level);\r\n            } else {\r\n                throw new Error( code + ': ' + params?.join(' '));\r\n            }\r\n\r\n        }\r\n        \r\n    }\r\n\r\n","import { VFComponent } from '../../display/VFComponent';\r\nimport { IAction, ActionType, ComponentEvent, IActionSetProperty, IActionExpress,\r\n    IActionIFPart, IActionFunction, IActionAddEventListener, IActionPlayAnimation,\r\n    IActionJump, IActionArraySplice, IActionArrayConcat, IActionEmitEvent,\r\n    IActionSound, IActionDefineVariable, IVariableData, IActionGoto, IActionCallFunction, IActionFor } from '../model/IVFData';\r\nimport { BaseTask } from './core/BaseTask';\r\nimport { AddListenerTask } from './AddListenerTask';\r\nimport { SetPropertyTask } from './SetPropertyTask';\r\nimport { ExpressTask } from './ExpressTask';\r\nimport { IfTask } from './IfTask';\r\nimport { QueueTask } from './core/QueueTask';\r\nimport { DefineFunctionTask } from './DefineFunctionTask';\r\nimport { FunctionTask } from './FunctionTask';\r\nimport { CallFunctionTask } from './CallFunctionTask';\r\nimport { PrintTask } from './PrintTask';\r\nimport { SoundTask } from './SoundTask';\r\nimport { PlayAnimationTask } from './PlayAnimationTask';\r\nimport { JumpToNextSceneTask } from './JumpToNextSceneTask';\r\nimport { JumpToPrevSceneTask } from './JumpToPrevSceneTask';\r\nimport { JumpToSceneTask } from './JumpToSceneTask';\r\nimport { ArrayPopTask } from './ArrayPopTask';\r\nimport { ArrayPushTask } from './ArrayPushTask';\r\nimport { ArraySpliceTask } from './ArraySpliceTask';\r\nimport { ArrayRandomTask } from './ArrayRandomTask';\r\nimport { ArrayInitTask } from './ArrayInitTask';\r\nimport { ArrayConcatTask } from './ArrayConcatTask';\r\nimport { ArrayShiftTask } from './ArrayShiftTask';\r\nimport { ArrayUnshiftTask } from './ArrayUnshiftTask';\r\nimport { AddListenerCallTask } from './AddListenerCallTask';\r\nimport { EmitEventTask } from './EmitEventTask';\r\nimport { DefineVariableTask } from './DefineVariableTask';\r\nimport { CallProtoFunctionTask } from './CallProtoFunctionTask';\r\nimport { RemoveListenerTask } from './RemoveListenerTask';\r\nimport { ForTask } from './ForTask';\r\nimport { BreakTask } from './BreakTask';\r\nimport { WaitTask } from './WaitTask';\r\nimport { SetTimeoutTask } from './SetTimeoutTask';\r\nimport { ContainerTask } from './core/ContainerTask';\r\nimport { SetIntervalTask } from './SetIntervalTask';\r\nimport { EnterFrameTask } from './EnterFrameTask';\r\n\r\nexport class ActionList {\r\n        public component: VFComponent;\r\n        public data: IAction[] | string;\r\n\r\n        private _actionList: BaseTask[] = [];\r\n\r\n        constructor(component: VFComponent, data: IAction[] | string) {\r\n            this.component = component;\r\n            this.data = data;\r\n            this.parseData();\r\n        }\r\n\r\n        public run(): void {\r\n            if (this._actionList && this._actionList.length) {\r\n                for (let i = 0, len: number = this._actionList.length; i < len; i++) {\r\n                    const task = this._actionList[i];\r\n\r\n                    task.run();\r\n                }\r\n            }\r\n        }\r\n\r\n        public stop(): void {\r\n            if (this._actionList && this._actionList.length) {\r\n                for (let i = 0, len: number = this._actionList.length; i < len; i++) {\r\n                    const task = this._actionList[i];\r\n\r\n                    task.stop();\r\n                }\r\n            }\r\n        }\r\n\r\n        public pause(): void {\r\n            if (this._actionList && this._actionList.length) {\r\n                for (let i = 0, len: number = this._actionList.length; i < len; i++) {\r\n                    const task = this._actionList[i];\r\n\r\n                    task.pause();\r\n                }\r\n            }\r\n        }\r\n\r\n        public resume(): void {\r\n            if (this._actionList && this._actionList.length) {\r\n                for (let i = 0, len: number = this._actionList.length; i < len; i++) {\r\n                    const task = this._actionList[i];\r\n\r\n                    task.resume();\r\n                }\r\n            }\r\n        }\r\n\r\n        private parseData(): void {\r\n            if (this.data) {\r\n                if (Array.isArray(this.data)) {\r\n                    this.parseAST(this.data);\r\n                }\r\n            }\r\n        }\r\n\r\n        private addGlobalVariable(action: IActionDefineVariable): void {\r\n            if (this.component && this.component.vfStage) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n\r\n                variableManager.addVariableDataToGlobal(action.varId, action.variableType, action.value);\r\n            }\r\n        }\r\n        private parseAST(actions: IAction[]): void {\r\n            if (actions) {\r\n                for (let i = 0, len: number = actions.length; i < len; i++) {\r\n                    const task = this.parseAction(actions[i]);\r\n\r\n                    if (task) {\r\n                        this._actionList.push(task);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        private parseAction(data: IAction): BaseTask | undefined {\r\n            let task: BaseTask | undefined;\r\n\r\n            switch (data.type) {\r\n                case ActionType.Add:\r\n                    task = this.parseAddToStageBefore(data);\r\n                    break;\r\n                case ActionType.Added:\r\n                    task = this.parseAddToStage(data);\r\n                    break;\r\n                case ActionType.SetProperty:\r\n                    task = this.parseSetProperty(data as any);\r\n                    break;\r\n                case ActionType.Click:\r\n                    task = this.parseClick(data);\r\n                    break;\r\n                case ActionType.Express:\r\n                    task = this.parseExpress(data as any);\r\n                    break;\r\n                case ActionType.IfGroup:\r\n                    task = this.parseIf(data);\r\n                    break;\r\n                case ActionType.DefineFunction:\r\n                    task = this.parseDefineFunction(data as any);\r\n                    break;\r\n                case ActionType.CallFunction:\r\n                    task = this.parseCallFunction(data as any);\r\n                    break;\r\n                case ActionType.Print:\r\n                    task = this.parsePrint(data as any);\r\n                    break;\r\n                case ActionType.AddEventListener:\r\n                    task = this.parseAddEventListener(data as any);\r\n                    break;\r\n                case ActionType.RemoveEventListener:\r\n                    task = this.parseRemoveEventListener(data as any);\r\n                    break;\r\n                case ActionType.EmitEvent:\r\n                    task = this.parseEmitEvent(data as IActionEmitEvent);\r\n                    break;\r\n                case ActionType.PlaySound:\r\n                case ActionType.PauseSound:\r\n                case ActionType.ResumeSound:\r\n                    task = this.parseSound(data as IActionSound);\r\n                    break;\r\n                case ActionType.PlayAnimation:\r\n                    task = this.parsePlayAnimation(data as any);\r\n                    break;\r\n                case ActionType.JumpToNextScene:\r\n                    task = this.parseJumpToNextScene(data);\r\n                    break;\r\n                case ActionType.JumpToPrevScene:\r\n                    task = this.parseJumpToPrevScene(data);\r\n                    break;\r\n                case ActionType.JumpToScene:\r\n                    task = this.parseJumpToScene(data);\r\n                    break;\r\n                case ActionType.ArrayInit:\r\n                    task = new ArrayInitTask(this.component, data);\r\n                    break;\r\n                case ActionType.ArrayPop:\r\n                    task = new ArrayPopTask(this.component, data);\r\n                    break;\r\n                case ActionType.ArrayPush:\r\n                    task = new ArrayPushTask(this.component, data);\r\n                    break;\r\n                case ActionType.ArraySplice:\r\n                    task = new ArraySpliceTask(this.component, data as IActionArraySplice);\r\n                    break;\r\n                case ActionType.ArrayRandom:\r\n                    task = new ArrayRandomTask(this.component, data);\r\n                    break;\r\n                case ActionType.ArrayConcat:\r\n                    task = new ArrayConcatTask(this.component, data as IActionArrayConcat);\r\n                    break;\r\n                case ActionType.ArrayShift:\r\n                    task = new ArrayShiftTask(this.component, data);\r\n                    break;\r\n                case ActionType.ArrayUnshift:\r\n                    task = new ArrayUnshiftTask(this.component, data);\r\n                    break;\r\n                case ActionType.AddEventListenerCall:\r\n                    task = this.parseAddEventListenerCall(data as IActionAddEventListener);\r\n                    break;\r\n                case ActionType.DefineVariable:\r\n                    task = new DefineVariableTask(this.component, data as IActionDefineVariable);\r\n                    break;\r\n                case ActionType.CallProtoFunction:\r\n                    task = new CallProtoFunctionTask(this.component, data as IActionCallFunction);\r\n                    break;\r\n                case ActionType.GotoPlay:\r\n                    const gotoData0 = data as IActionGoto;\r\n                    const gotoPlayData: IActionCallFunction = {\r\n                        type: ActionType.CallProtoFunction,\r\n                        target: gotoData0.target,\r\n                        name: 'gotoPlay',\r\n                    };\r\n\r\n                    gotoPlayData.params = [];\r\n                    if (Array.isArray(gotoData0.name)) {\r\n                        gotoPlayData.params.push(gotoData0.name);\r\n                    }\r\n                    else {\r\n                        gotoPlayData.params.push([0, gotoData0.name]);\r\n                    }\r\n                    if (Array.isArray(gotoData0.frame)) {\r\n                        gotoPlayData.params.push(gotoData0.frame);\r\n                    }\r\n                    else {\r\n                        gotoPlayData.params.push([0, gotoData0.frame]);\r\n                    }\r\n                    if (Array.isArray(gotoData0.times)) {\r\n                        gotoPlayData.params.push(gotoData0.times);\r\n                    }\r\n                    else {\r\n                        gotoPlayData.params.push([0, gotoData0.times]);\r\n                    }\r\n                    task = new CallProtoFunctionTask(this.component, gotoPlayData);\r\n                    break;\r\n                case ActionType.GotoStop:\r\n                    const gotoData1 = data as IActionGoto;\r\n                    const gotoStopData: IActionCallFunction = {\r\n                        type: ActionType.CallProtoFunction,\r\n                        target: gotoData1.target,\r\n                        name: 'gotoStop',\r\n                    };\r\n\r\n                    gotoStopData.params = [];\r\n                    if (Array.isArray(gotoData1.name)) {\r\n                        gotoStopData.params.push(gotoData1.name);\r\n                    }\r\n                    else {\r\n                        gotoStopData.params.push([0, gotoData1.name]);\r\n                    }\r\n                    if (Array.isArray(gotoData1.frame)) {\r\n                        gotoStopData.params.push(gotoData1.frame);\r\n                    }\r\n                    else {\r\n                        gotoStopData.params.push([0, gotoData1.frame]);\r\n                    }\r\n                    task = new CallProtoFunctionTask(this.component, gotoStopData);\r\n                    break;\r\n                case ActionType.For:\r\n                    task = this.parseFor(data as IActionFor);\r\n                    break;\r\n                case ActionType.Break:\r\n                    task = new BreakTask();\r\n                    break;\r\n                case ActionType.Wait:\r\n                    task = new WaitTask(this.component, data);\r\n                    break;\r\n                case ActionType.SetTimeout:\r\n                    task = this.parseSetTimeout(data);\r\n                    break;\r\n                case ActionType.SetInterval:\r\n                    task = this.parseSetInterval(data);\r\n                    break;\r\n                case ActionType.EnterFrame:\r\n                    task = this.parseEnterFrame(data);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseSubTask(task: ContainerTask, data: IAction): void {\r\n            if (data.execute) {\r\n                for (let i = 0, len: number = data.execute.length; i < len; i++) {\r\n                    const taskData = data.execute[i];\r\n                    const subTask = this.parseAction(taskData);\r\n\r\n                    if (subTask) {\r\n                        task.addSubTask(subTask);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        private parseAddToStageBefore(data: IAction): AddListenerTask {\r\n            const addAction: IActionAddEventListener = {\r\n                type: ActionType.AddEventListener,\r\n                event: ComponentEvent.Add,\r\n                target: [],\r\n            };\r\n            const task: AddListenerTask = new AddListenerTask(this.component, addAction);\r\n\r\n            this.parseSubTask(task, data);\r\n\r\n            return task;\r\n        }\r\n        private parseAddToStage(data: IAction): AddListenerTask {\r\n            const addedAction: IActionAddEventListener = {\r\n                type: ActionType.AddEventListener,\r\n                event: ComponentEvent.Added,\r\n                target: [],\r\n            };\r\n            const task: AddListenerTask = new AddListenerTask(this.component, addedAction);\r\n\r\n            this.parseSubTask(task, data);\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseSetProperty(data: IActionSetProperty): SetPropertyTask {\r\n            const task: SetPropertyTask = new SetPropertyTask(this.component, data);\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseClick(data: IAction): AddListenerTask | undefined {\r\n            const addlistenerAction: IActionAddEventListener = {\r\n                event: ComponentEvent.Click,\r\n                type: ActionType.AddEventListener,\r\n                target: data.target,\r\n            };\r\n            const task: AddListenerTask = new AddListenerTask(this.component, addlistenerAction);\r\n\r\n            this.parseSubTask(task, data);\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseExpress(data: IActionExpress): ExpressTask {\r\n            const task: ExpressTask = new ExpressTask(this.component, data);\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseIf(data: IAction): IfTask {\r\n            const task: IfTask = new IfTask(this.component);\r\n\r\n            if (data.execute) {\r\n                for (let i = 0, len: number = data.execute.length; i < len; i++) {\r\n                    const ifPart = data.execute[i];\r\n\r\n                    if (ifPart.type === ActionType.If\r\n                        || ifPart.type === ActionType.ElseIf\r\n                        || ifPart.type === ActionType.Else) {\r\n                        const condition = (ifPart as IActionIFPart).condition;\r\n                        const conditionQue = new QueueTask();\r\n\r\n                        if (ifPart.execute) {\r\n                            for (let j = 0, jlen: number = ifPart.execute.length; j < jlen; j++) {\r\n                                const subTask = this.parseAction(ifPart.execute[j]);\r\n\r\n                                if (subTask) {\r\n                                    conditionQue.addTask(subTask);\r\n                                }\r\n                            }\r\n                        }\r\n                        task.addCondition(condition, conditionQue);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseDefineFunction(data: IActionFunction): DefineFunctionTask {\r\n            const funTask: FunctionTask = new FunctionTask(this.component, data.name);\r\n\r\n            this.parseSubTask(funTask, data);\r\n            const task: DefineFunctionTask = new DefineFunctionTask(this.component, data.name, data, funTask);\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseCallFunction(data: IActionFunction): CallFunctionTask | undefined {\r\n            const task: CallFunctionTask = new CallFunctionTask(this.component, data.name, data);\r\n\r\n            return task;\r\n        }\r\n\r\n        private parsePrint(data: IAction): PrintTask {\r\n            const task: PrintTask = new PrintTask(this.component, data);\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseAddEventListener(data: IActionAddEventListener): AddListenerTask | undefined {\r\n            const task: AddListenerTask = new AddListenerTask(this.component, data);\r\n\r\n            this.parseSubTask(task, data);\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseRemoveEventListener(data: IActionAddEventListener): RemoveListenerTask | undefined {\r\n            const task: RemoveListenerTask = new RemoveListenerTask(this.component, data);\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseEmitEvent(data: IActionEmitEvent): EmitEventTask | undefined {\r\n            const task: EmitEventTask = new EmitEventTask(this.component, data);\r\n\r\n            return task;\r\n        }\r\n        private parseAddEventListenerCall(data: IActionAddEventListener): AddListenerCallTask | undefined {\r\n            if (data.funName) {\r\n                const task: AddListenerCallTask\r\n                    = new AddListenerCallTask(this.component, data);\r\n\r\n                return task;\r\n            }\r\n        }\r\n        private parseSound(data: IActionSound): SoundTask {\r\n            const task = new SoundTask(this.component, data);\r\n\r\n            return task;\r\n        }\r\n        private parsePlayAnimation(data: IActionPlayAnimation): PlayAnimationTask | undefined {\r\n            const task: PlayAnimationTask = new PlayAnimationTask(this.component, data);\r\n\r\n            return task;\r\n        }\r\n        private parseJumpToNextScene(data: IActionJump): JumpToNextSceneTask {\r\n            const task: JumpToNextSceneTask = new JumpToNextSceneTask(this.component, data.transition);\r\n\r\n            return task;\r\n        }\r\n        private parseJumpToPrevScene(data: IActionJump): JumpToPrevSceneTask {\r\n            const task: JumpToPrevSceneTask = new JumpToPrevSceneTask(this.component, data.transition);\r\n\r\n            return task;\r\n        }\r\n        private parseJumpToScene(data: IActionJump): JumpToSceneTask {\r\n            const task: JumpToSceneTask = new JumpToSceneTask(this.component, data.value, data.transition);\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseFor(data: IActionFor): ForTask {\r\n            const task = new ForTask(this.component, data);\r\n\r\n            this.parseSubTask(task, data);\r\n\r\n            return task;\r\n        }\r\n        private parseSetTimeout(data: IAction): SetTimeoutTask {\r\n            const task: SetTimeoutTask = new SetTimeoutTask(this.component, data);\r\n\r\n            this.parseSubTask(task, data);\r\n\r\n            return task;\r\n        }\r\n\r\n        private parseSetInterval(data: IAction): SetIntervalTask {\r\n            const task: SetIntervalTask = new SetIntervalTask(this.component, data);\r\n\r\n            this.parseSubTask(task, data);\r\n\r\n            return task;\r\n        }\r\n        private parseEnterFrame(data: IAction): EnterFrameTask {\r\n            const task: EnterFrameTask = new EnterFrameTask(this.component, data);\r\n\r\n            this.parseSubTask(task, data);\r\n\r\n            return task;\r\n        }\r\n}\r\n\r\n","/* eslint-disable no-mixed-spaces-and-tabs */\r\nimport { ContainerTask } from './core/ContainerTask';\r\nimport { TaskEvent } from './core/BaseTask';\r\nimport { CallFunctionTask } from './CallFunctionTask';\r\nimport { ActionType, IActionCallFunction, IActionAddEventListener } from '../model/IVFData';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { EventType } from '../../event/EventType';\r\nimport IEvent from '../../event/IEvent';\r\nimport { getTargetComponent } from '../../utils/VFUtil';\r\n\r\n\r\nexport class AddListenerCallTask extends ContainerTask {\r\n    public data: IActionAddEventListener;\r\n    public component: VFComponent;\r\n    public eventName: string;\r\n    public funName: string | undefined;\r\n    protected _component: vf.gui.DisplayObject | undefined;\r\n    protected _loopComplete: boolean;\r\n    protected system: boolean;\r\n    protected global: boolean;\r\n    protected runId: number = -1;\r\n    protected callfun?: CallFunctionTask;\r\n    protected callfunData?: IActionCallFunction;\r\n\r\n    constructor(component: VFComponent, data: IActionAddEventListener) {\r\n        super();\r\n        this._loopComplete = false;\r\n        this.data = data;\r\n        this.component = component;\r\n        this.eventName = data.event;\r\n        this.system = data.system === true;\r\n        this.global = data.global === true;\r\n        this.funName = data.funName;\r\n    }\r\n\r\n    public run() {\r\n        super.run();\r\n        this._loopComplete = true;\r\n        if (this.loopTask.tasks.length === 0 && this.component && this.funName) {\r\n            this.callfunData = {\r\n                type: ActionType.CallFunction,\r\n                name: this.funName,\r\n                params: [],\r\n            };\r\n\r\n            const callfunctionTask: CallFunctionTask = \r\n                new CallFunctionTask(this.component as any, this.funName, this.callfunData);\r\n            this.callfun = callfunctionTask;\r\n            this.loopTask.addTask(callfunctionTask);\r\n        }\r\n        if (this.loopTask) {\r\n            this.loopTask.on(TaskEvent.EVENT_COMPLETE, this.onLoopComplete, this);\r\n        }\r\n        if (this.component) {\r\n            if (this.system) {\r\n                const vfStage = (this.component as VFComponent).vfStage;\r\n                if (vfStage) {\r\n                    vfStage.systemEvent.on(this.eventName, this.onTriger, this);\r\n                }\r\n            } else if (this.global) {\r\n                const vfStage = (this.component as VFComponent).vfStage;\r\n                if (vfStage) {\r\n                    vfStage.on(this.eventName, this.onTriger, this);\r\n                }\r\n            } else {\r\n                this._component = getTargetComponent(this.component, this.data.target);\r\n                if (this._component) {\r\n                    this._component.on(this.eventName, this.onTriger, this);\r\n                }\r\n            }\r\n        }\r\n        this.complete();\r\n    }\r\n\r\n\r\n    public stop() {\r\n        this.complete();\r\n\r\n        if (this._component) {\r\n            if (this.system) {\r\n                const vfStage = (this._component as VFComponent).vfStage;\r\n                if (vfStage) {\r\n                    vfStage.systemEvent.off(this.eventName, this.onTriger, this);\r\n                }\r\n            } else if (this.global) {\r\n                const vfStage = (this._component as VFComponent).vfStage;\r\n                if (vfStage) {\r\n                    vfStage.off(this.eventName, this.onTriger, this);\r\n                }\r\n            } else {\r\n                this._component.off(this.eventName, this.onTriger, this);\r\n            }\r\n        }\r\n        if (this.loopTask) {\r\n            this.loopTask.off(TaskEvent.EVENT_COMPLETE, this.onLoopComplete);\r\n            this.loopTask.complete();\r\n        }\r\n\r\n        super.stop();\r\n    }\r\n    public break() {\r\n        this.complete();\r\n        super.break();\r\n    }\r\n\r\n    protected onLoopComplete() {\r\n        this._loopComplete = true;\r\n    }\r\n    \r\n    protected onSystemTriger(evt: IEvent) {\r\n        if (evt.code === this.eventName) {\r\n            this.onTriger(evt);\r\n        }\r\n    }\r\n\r\n    protected onTriger(...params: any) {\r\n        if (this._isPaused) {\r\n            return;\r\n        }\r\n        if (params && params.length > 0 && this.callfunData) {\r\n            this.callfunData.params = params;\r\n        }\r\n        if (this.loopTask && this._loopComplete) {\r\n            this._loopComplete = false;\r\n            this.loopTask.run();\r\n        }\r\n    }   \r\n}\r\n\r\n","import { ContainerTask } from './core/ContainerTask';\r\nimport { TaskEvent } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { EventType } from '../../event/EventType';\r\nimport IEvent from '../../event/IEvent';\r\nimport { IActionAddEventListener } from '../model/IVFData';\r\nimport { getTargetComponent } from '../../utils/VFUtil';\r\n\r\nexport class AddListenerTask extends ContainerTask {\r\n        public data: IActionAddEventListener;\r\n        public eventName: string;\r\n        public component: VFComponent;\r\n        protected _component: vf.gui.DisplayObject | undefined;\r\n        protected _loopComplete: boolean;\r\n        protected system: boolean;\r\n        protected global: boolean;\r\n\r\n        constructor(component: VFComponent, data: IActionAddEventListener) {\r\n            super();\r\n            this.component = component;\r\n            this._loopComplete = false;\r\n            this.data = data;\r\n            this.eventName = data.event;\r\n            this.system = data.system === true;\r\n            this.global = data.global === true;\r\n        }\r\n    \r\n        public run() {\r\n            super.run();\r\n            \r\n            this._loopComplete = true;\r\n            if (this.component) {\r\n                if (this.loopTask) {\r\n                    this.loopTask.on(TaskEvent.EVENT_COMPLETE, this.onLoopComplete, this);\r\n                }\r\n\r\n                if (this.system) {\r\n                    const vfStage = (this.component as VFComponent).vfStage;\r\n                    if (vfStage) {\r\n                        vfStage.systemEvent.on(this.eventName, this.onTriger, this);\r\n                    }\r\n                } else if (this.global) {\r\n                    const vfStage = (this.component as VFComponent).vfStage;\r\n                    if (vfStage) {\r\n                        vfStage.on(this.eventName, this.onTriger, this);\r\n                    }\r\n                } else {\r\n                    this._component = getTargetComponent(this.component, this.data.target);\r\n                    if (this._component) {\r\n                        this._component.on(this.eventName, this.onTriger, this);\r\n                    }\r\n                }\r\n            }\r\n            this.complete();\r\n        }\r\n\r\n    \r\n        public stop() {\r\n            this.complete();\r\n\r\n            if (this._component) {\r\n                if (this.system) {\r\n                    const vfStage = (this._component as VFComponent).vfStage;\r\n                    if (vfStage) {\r\n                        vfStage.systemEvent.off(this.eventName, this.onTriger, this);\r\n                    }\r\n                } else if (this.global) {\r\n                    const vfStage = (this._component as VFComponent).vfStage;\r\n                    if (vfStage) {\r\n                        vfStage.off(this.eventName, this.onTriger, this);\r\n                    }\r\n                } else {\r\n                    this._component.off(this.eventName, this.onTriger, this);\r\n                }\r\n            }\r\n            if (this.loopTask) {\r\n                this.loopTask.off(TaskEvent.EVENT_COMPLETE, this.onLoopComplete);\r\n                this.loopTask.complete();\r\n            }\r\n\r\n            super.stop();\r\n        }\r\n        public break() {\r\n            this.complete();\r\n            super.break();\r\n        }\r\n    \r\n        protected onLoopComplete() {\r\n            this._loopComplete = true;\r\n        }\r\n\r\n        protected onSystemTriger(evt: IEvent) {\r\n            if (evt.code === this.eventName) {\r\n                this.onTriger();\r\n            }\r\n        }\r\n    \r\n        protected onTriger() {\r\n            if (this._isPaused) {\r\n                return;\r\n            }\r\n            if (this.loopTask && this._loopComplete) {\r\n                this._loopComplete = false;\r\n                this.loopTask.run();\r\n            }\r\n        }    \r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IActionArraySplice, IActionArrayConcat } from '../model/IVFData';\r\n\r\nexport class ArrayConcatTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IActionArrayConcat;\r\n\r\n        constructor(compontent: VFComponent, data: IActionArrayConcat) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component.vfStage && this.data.target) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                const arrItem = variableManager.getVariableByData(this.component, this.data.target);\r\n                const concatItem = variableManager.getVariableByData(this.component, this.data.concatArr);\r\n                if (arrItem && concatItem) {\r\n                    if (this.data.value) {\r\n                        arrItem.value = concatItem.value.concat(this.data.value);\r\n                    } else {\r\n                        arrItem.value = concatItem.value.concat();\r\n                    }\r\n                }\r\n            }\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAction } from '../model/IVFData';\r\n\r\nexport class ArrayInitTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IAction;\r\n\r\n        constructor(compontent: VFComponent, data: IAction) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component.vfStage && this.data.target) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                const arrItem = variableManager.getVariableByData(this.component, this.data.target);\r\n                if (arrItem) {\r\n                    arrItem.value = this.data.value;\r\n                }\r\n            }\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAction } from '../model/IVFData';\r\n\r\nexport class ArrayPopTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IAction;\r\n\r\n        constructor(compontent: VFComponent, data: IAction) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component.vfStage && this.data.target) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                const arrItem = variableManager.getVariableByData(this.component, this.data.target);\r\n                if (arrItem) {\r\n                    arrItem.value.pop();\r\n                }\r\n            }\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAction } from '../model/IVFData';\r\n\r\nexport class ArrayPushTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IAction;\r\n\r\n        constructor(compontent: VFComponent, data: IAction) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component.vfStage && this.data.target) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                const arrItem = variableManager.getVariableByData(this.component, this.data.target);\r\n                if (arrItem) {\r\n                    const arr = arrItem.value;\r\n                    arr.push(this.data.value);\r\n                }\r\n            }\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAction } from '../model/IVFData';\r\n\r\nexport class ArrayRandomTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IAction;\r\n\r\n        constructor(compontent: VFComponent, data: IAction) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component.vfStage && this.data.target) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                const arrItem = variableManager.getVariableByData(this.component, this.data.target);\r\n                if (arrItem) {\r\n                    const arr = arrItem.value;\r\n                    variableManager.shuffle(arr);\r\n                }\r\n            }\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAction } from '../model/IVFData';\r\n\r\nexport class ArrayShiftTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IAction;\r\n\r\n        constructor(compontent: VFComponent, data: IAction) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component.vfStage && this.data.target) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                const arrItem = variableManager.getVariableByData(this.component, this.data.target);\r\n                if (arrItem) {\r\n                    arrItem.value.shift();\r\n                }\r\n            }\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IActionArraySplice } from '../model/IVFData';\r\n\r\nexport class ArraySpliceTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IActionArraySplice;\r\n\r\n        constructor(compontent: VFComponent, data: IActionArraySplice) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component.vfStage && this.data.target) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                const arrItem = variableManager.getVariableByData(this.component, this.data.target);\r\n                if (arrItem) {\r\n                    const value = this.data.value;\r\n                    if (value !== undefined) {\r\n                        arrItem.value.splice(this.data.start, this.data.deleteCount || 0, value);\r\n                    } else {\r\n                        arrItem.value.splice(this.data.start, this.data.deleteCount || 0);\r\n                    }\r\n                }\r\n            }\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAction } from '../model/IVFData';\r\n\r\nexport class ArrayUnshiftTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IAction;\r\n\r\n        constructor(compontent: VFComponent, data: IAction) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component.vfStage && this.data.target) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                const arrItem = variableManager.getVariableByData(this.component, this.data.target);\r\n                if (arrItem) {\r\n                    const arr = arrItem.value;\r\n                    arr.unshift(this.data.value);\r\n                }\r\n            }\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask, TaskEvent } from './core/BaseTask';\r\n\r\nexport class BreakTask extends BaseTask {\r\n        \r\n\r\n        constructor() {\r\n            super();\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            this.break();\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask, TaskEvent } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAction, IActionCallFunction, VariableType } from '../model/IVFData';\r\nimport { FunctionTask } from './FunctionTask';\r\nimport { VariableManager } from '../VariableManager';\r\nimport { getTargetComponent } from '../../utils/VFUtil';\r\n\r\nexport class CallFunctionTask extends BaseTask {\r\n\r\n        public component: VFComponent;\r\n        public funName: string;\r\n        public data: IActionCallFunction;\r\n        protected _component: VFComponent | undefined;\r\n        protected runId: number = -1;\r\n        protected fun?: FunctionTask;\r\n        protected paramIds: string[] = [];\r\n        constructor(compontent: VFComponent, funName: string, data: IActionCallFunction) {\r\n            super();\r\n            this.component = compontent;\r\n            this.funName = funName;\r\n            this.data = data;\r\n        }\r\n\r\n        public run(): void {\r\n            super.run();\r\n            this._component = getTargetComponent(this.component, this.data.target) as VFComponent;\r\n            if (this._component instanceof VFComponent && this._component && this._component.vfStage ) {\r\n                const variableManager = this._component.vfStage.variableManager;\r\n                let funId = this.funName;\r\n                this.runId = variableManager.getFunctionId();\r\n                funId = this._component.hashCode + this.funName;\r\n                // 注入参数\r\n                this.paramIds.length = 0;\r\n                if (this.data.params) {\r\n                    const paramValues: any[] = [];\r\n                    for ( let i: number = 0, len: number = this.data.params.length; i < len; i++) {\r\n                        const param = this.data.params[i];\r\n                        let paramValue = param;\r\n                        if (Array.isArray(param)) {\r\n                            const paramVar = variableManager.getExpressItemValue(this.component, param);\r\n                            paramValue = paramVar;\r\n                        }\r\n                        paramValues.push(paramValue);\r\n                    }\r\n                    for (let i: number = 0, len: number = paramValues.length; i < len; i++) {\r\n                        const paramId = funId + this.runId + 'param_' + i;\r\n                        this.paramIds.push(paramId);\r\n                        if (!variableManager.variableMap[VariableManager.GLOBAL_ID]) {\r\n                            variableManager.variableMap[VariableManager.GLOBAL_ID] = {};\r\n                        }\r\n                        variableManager.variableMap[VariableManager.GLOBAL_ID][paramId] = {\r\n                            id: paramId,\r\n                            type: VariableType.OBJECT,\r\n                            value: paramValues[i],\r\n                        };\r\n                    }\r\n                }\r\n                this.fun = variableManager.getFunctionTask(funId);\r\n                if (this.fun) {\r\n                    // 替换表达式中的参数\r\n                    if (this.paramIds.length) {\r\n                        this.fun.injectParams(this.paramIds);\r\n                    }\r\n                    this.fun.on(TaskEvent.FUNCTION_RUN_COMPLETE, this.onRunComplete, this);\r\n                    this.fun.runWithId(this.runId);\r\n                } else {\r\n                    this.complete();\r\n                }\r\n            } else {\r\n                if (this.component.vfStage) {\r\n                    const variableManager = this.component.vfStage.variableManager;\r\n                    const runTarget = this._component as any;\r\n                    let  funName = this.data.name;\r\n                    if (Array.isArray(funName)) {\r\n                        funName = variableManager.getExpressItemValue(this.component, funName);\r\n                    }\r\n                    const funParam = [];\r\n                    if (this.data.params) {\r\n                        for (let i: number = 0, len: number = this.data.params.length; i < len; i++) {\r\n                            const param = variableManager.getExpressItemValue(this.component, this.data.params[i]);\r\n                            funParam.push(param);\r\n                        }\r\n                    }\r\n                    if (runTarget && funName && runTarget[funName as string]) {\r\n                        // tslint:disable-next-line: ban-types\r\n                        (runTarget[funName as string] as Function).apply(runTarget, funParam);\r\n                    }\r\n                    \r\n                }\r\n                this.complete();\r\n            }\r\n        }\r\n\r\n        public stop(): void {\r\n            super.stop();\r\n            if (this.fun) {\r\n                this.fun.stopWithId(this.runId);\r\n            }\r\n            this.complete();\r\n        }\r\n\r\n        public break() {\r\n            super.break();\r\n            if (this.fun) {\r\n                this.fun.breakWithId(this.runId);\r\n            }\r\n            this.complete();\r\n        }\r\n\r\n        public complete(): void {\r\n            this.runId = 0;\r\n            if (this.fun) {\r\n                this.fun.off(TaskEvent.FUNCTION_RUN_COMPLETE,  this.onRunComplete, this);\r\n            }\r\n            // 删除参数\r\n            if (this.paramIds.length) {\r\n                if (this.component && this.component.vfStage) {\r\n                    const variableManager = this.component.vfStage.variableManager;\r\n                    for (let i: number = 0, len: number = this.paramIds.length; i < len; i++) {\r\n                        const paramId = this.paramIds[i];\r\n                        delete variableManager.variableMap[VariableManager.GLOBAL_ID][paramId];\r\n                    }\r\n                }\r\n            }\r\n            super.complete();\r\n        }\r\n\r\n        private onRunComplete(data: any): void {\r\n            if (data === this.runId) {\r\n                this.complete();\r\n            }\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IActionPlayAnimation, IActionCallFunction } from '../model/IVFData';\r\nimport { getTargetComponent } from '../../utils/VFUtil';\r\n\r\nexport class CallProtoFunctionTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IActionCallFunction;\r\n\r\n        constructor(compontent: VFComponent, data: IActionCallFunction) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n            \r\n        }   \r\n       \r\n        public get target(): any {\r\n            return getTargetComponent(this.component, this.data.target);\r\n        }\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component.vfStage) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                const runTarget = this.target;\r\n                let  funName = this.data.name;\r\n                if (Array.isArray(funName)) {\r\n                    funName = variableManager.getExpressItemValue(this.component, funName);\r\n                }\r\n                const funParam = [];\r\n                if (this.data.params) {\r\n                    for (let i: number = 0, len: number = this.data.params.length; i < len; i++) {\r\n                        const param = variableManager.getExpressItemValue(this.component, this.data.params[i]);\r\n                        funParam.push(param);\r\n                    }\r\n                }\r\n                if (runTarget && funName && runTarget[funName as string]) {\r\n                    // tslint:disable-next-line: ban-types\r\n                    (runTarget[funName as string] as Function).apply(runTarget, funParam);\r\n                }\r\n                \r\n            }\r\n            \r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { FunctionTask } from './FunctionTask';\r\nimport { IAction } from '../model/IVFData';\r\nimport { getTargetComponent } from '../../utils/VFUtil';\r\n\r\nexport class DefineFunctionTask extends BaseTask {\r\n\r\n        public funName: string;\r\n        protected component: VFComponent;\r\n        protected fun: FunctionTask;\r\n        protected data: IAction;\r\n        protected funId: string = '';\r\n\r\n        constructor(compontent: VFComponent, funName: string, data: IAction, fun: FunctionTask) {\r\n            super();\r\n            this.component = compontent;\r\n            this.funName = funName;\r\n            this.fun = fun;\r\n            this.data = data;\r\n        }\r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component.vfStage) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                let funId = this.funName;\r\n                const subComponent = getTargetComponent(this.component, this.data.target);\r\n                if (subComponent) {\r\n                    funId = (subComponent as VFComponent).hashCode + this.funName;\r\n                }\r\n                variableManager.setFunctionTask(funId, this.fun);\r\n                this.complete();\r\n            } else {\r\n                this.complete();\r\n            }\r\n            \r\n        }\r\n        public stop(): void {\r\n            super.stop();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IActionDefineVariable} from '../model/IVFData';\r\nimport { getTargetComponent } from '../../utils/VFUtil';\r\n\r\nexport class DefineVariableTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IActionDefineVariable;\r\n\r\n        constructor(compontent: VFComponent, data: IActionDefineVariable) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component && this.component.vfStage) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                const targetComponent: VFComponent = getTargetComponent(this.component, \r\n                                                                        this.data.target) as VFComponent;\r\n                if (targetComponent) {\r\n                    variableManager.addVariableDataToComponent(targetComponent, \r\n                                                               this.data.varId, \r\n                                                               this.data.variableType,\r\n                                                               this.data.value);\r\n                } else {\r\n                    variableManager.addVariableDataToGlobal( \r\n                                                            this.data.varId, \r\n                                                            this.data.variableType,\r\n                                                            this.data.value);\r\n                }\r\n            }\r\n            \r\n\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { EventType } from '../../event/EventType';\r\nimport IEvent from '../../event/IEvent';\r\nimport { EventLevel } from '../../event/EventLevel';\r\nimport { IActionEmitEvent } from '../model/IVFData';\r\nimport { getTargetComponent } from '../../utils/VFUtil';\r\n\r\nexport class EmitEventTask extends BaseTask {\r\n        public data: IActionEmitEvent;\r\n        public eventName: string;\r\n        public eventData: any;\r\n\r\n        protected target: vf.utils.EventEmitter | undefined;\r\n        protected component: VFComponent;\r\n        protected system: boolean;\r\n        protected global: boolean;\r\n\r\n\r\n        constructor(component: VFComponent, data: IActionEmitEvent) {\r\n            super();\r\n            this.component = component;\r\n            this.data = data;\r\n            this.eventName = data.event;\r\n            this.eventData = data.eventData;\r\n            this.system = data.system === true;\r\n            this.global = data.global === true;\r\n        }\r\n    \r\n        public run() {\r\n            super.run();\r\n            const {component} = this;\r\n            if (component) {\r\n                const emitEventData = this.getEmitEventData();\r\n                if (this.system) {\r\n                    if (component.vfStage ){\r\n                        const systemEvent = component.vfStage.systemEvent;\r\n                        if (typeof emitEventData === 'object') {\r\n                            (emitEventData as IEvent).type = this.eventName;\r\n                            if (this.eventName !== EventType.MESSAGE) {\r\n                                systemEvent.emit(this.eventName, emitEventData);\r\n                            }\r\n                            systemEvent.emit(EventType.MESSAGE, emitEventData); // 外部 \r\n                        } else {\r\n                            systemEvent.emitError('S0003', [this.eventName, \r\n                                                            JSON.stringify(emitEventData)], EventLevel.WARNING, this);\r\n                        }\r\n                    }\r\n                } else if (this.global) {\r\n                    if (component.vfStage) {\r\n                        component.vfStage.emit(this.eventName, emitEventData);\r\n                    }\r\n                } else {\r\n                    this.target = getTargetComponent(this.component, this.data.target);\r\n                    if (this.target) {\r\n                        this.target.emit(this.eventName, emitEventData);\r\n                    }\r\n                    \r\n                }\r\n            }\r\n            this.complete();\r\n        }\r\n\r\n        public stop() {\r\n            this.complete();\r\n            super.stop();\r\n        }\r\n        public break() {\r\n            this.complete();\r\n            super.break();\r\n        }\r\n        private getEmitEventData(): any {\r\n            if (Array.isArray(this.eventData)) {\r\n                if (this.component) {\r\n                    const vfStage = (this.component).vfStage;\r\n                    if (vfStage) {\r\n                        const data = vfStage.variableManager.getExpressItemValue(this.component, this.eventData);\r\n                        return data;\r\n                    }\r\n                }\r\n            }\r\n            return this.eventData;\r\n        }\r\n    }\r\n\r\n","import { BaseTask, TaskEvent } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAction } from '../model/IVFData';\r\nimport { isNumber } from '../../utils/VFUtil';\r\nimport { ContainerTask } from './core/ContainerTask';\r\n\r\nexport class EnterFrameTask extends ContainerTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IAction;\r\n        private loopTaskComplete: boolean = true;\r\n\r\n        constructor(component: VFComponent, data: IAction) {\r\n            super();\r\n            this.component = component;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n\r\n            if (this.component) {\r\n                const vfStage = this.component.vfStage;\r\n                if (vfStage && vfStage.app) {\r\n                    if (this.loopTask) {\r\n                        this.loopTask.addListener(TaskEvent.EVENT_COMPLETE, this.onLoopComplete, this);\r\n                    }\r\n                    vfStage.app.ticker.add(this.tick, this);\r\n                } else {\r\n                    this.complete();\r\n                }\r\n            } else {\r\n                this.complete();\r\n            }\r\n        }\r\n\r\n        public complete(): void {\r\n            super.complete();\r\n            if (this.loopTask) {\r\n                this.loopTask.removeListener(TaskEvent.EVENT_COMPLETE, this.onLoopComplete, this);\r\n            }\r\n            if (this.component) {\r\n                const vfStage = this.component.vfStage;\r\n                if (vfStage && vfStage.app) {\r\n                    vfStage.app.ticker.remove(this.tick, this);\r\n                }\r\n            }\r\n        }\r\n        public stop(): void {\r\n            super.stop();\r\n            this.complete();\r\n        }\r\n\r\n        public pause(): void {\r\n            super.pause();\r\n            if (this.component) {\r\n                const vfStage = this.component.vfStage;\r\n                if (vfStage && vfStage.app) {\r\n                    vfStage.app.ticker.remove(this.tick, this);\r\n                }\r\n            }\r\n        }\r\n\r\n        public resume(): void {\r\n            if (this._isPaused) {\r\n                if (this.component) {\r\n                    const vfStage = this.component.vfStage;\r\n                    if (vfStage && vfStage.app) {\r\n                        vfStage.app.ticker.add(this.tick, this);\r\n                    }\r\n                }\r\n            }\r\n            super.resume();\r\n        }\r\n\r\n        private onLoopComplete(): void {\r\n            this.loopTaskComplete = true;\r\n        }\r\n        private tick(): void {\r\n            if (this.loopTaskComplete) {\r\n                if (this.loopTask) {\r\n                    this.loopTask.run();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IActionExpress } from '../model/IVFData';\r\n\r\nexport class ExpressTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IActionExpress;\r\n\r\n        constructor(compontent: VFComponent, data: IActionExpress) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component && this.component.vfStage) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                variableManager.caculateExpress(this.component, this.data.express);\r\n            }\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask, TaskEvent } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IActionFor, VariableType } from '../model/IVFData';\r\nimport { ContainerTask } from './core/ContainerTask';\r\nimport { VariableManager } from '../VariableManager';\r\nimport { injectParamsToQueueTask } from './core/ActionListUtils';\r\n\r\nexport class ForTask extends ContainerTask {\r\n    \r\n    public component: VFComponent;\r\n    public data: IActionFor;\r\n    private _totalTimes: number = 0;\r\n    private _curTimes: number = 0;\r\n    private _paramId: string = '';\r\n    private _paramIds: string[] = [];\r\n    constructor(compontent: VFComponent, data: IActionFor) {\r\n        super();\r\n        this.component = compontent;\r\n        this.data = data;\r\n    }\r\n\r\n    public run() {\r\n        super.run();\r\n        this._totalTimes = this.getforin();\r\n        this._curTimes = -1;\r\n        if (this.loopTask) {\r\n            this.loopTask.on(TaskEvent.EVENT_COMPLETE, this.onLoopComplete, this);\r\n            this.loopTask.on(TaskEvent.EVENT_FAIL, this.onLoopComplete, this);\r\n        }\r\n        this.addParams();\r\n        this.runFor();\r\n    }\r\n\r\n    public break() {\r\n        this._isRunning = false;\r\n        if (this.loopTask) {\r\n            this.loopTask.stop();\r\n        }\r\n        this.complete();\r\n    }\r\n    public complete(): void {\r\n        this.removeParams();\r\n        super.complete();\r\n    }\r\n\r\n    public injectParams(paramIds: string[]): void {\r\n        if (paramIds && paramIds.length) {\r\n            this._paramIds = paramIds;\r\n        }\r\n    }\r\n\r\n    private runFor(): void {\r\n        if (this._totalTimes > 0 && this._curTimes < this._totalTimes - 1) {\r\n            if (this.loopTask) {\r\n                this._curTimes++;\r\n                if (this.component && this.component.vfStage) {\r\n                    const variableManager = this.component.vfStage.variableManager;\r\n                    const paramI = variableManager.getGlobalVariable(this._paramId);\r\n                    if (paramI) {\r\n                        paramI.value = this._curTimes;\r\n                    }\r\n                }\r\n                this.loopTask.run();\r\n            } else {\r\n                this.complete();\r\n            }\r\n        } else {\r\n            this.complete();\r\n        }\r\n    }\r\n    private getforin(): number {\r\n        if (this.component.vfStage) {\r\n            const variableManager = this.component.vfStage.variableManager;\r\n            const forin = variableManager.getExpressItemValue(this.component, this.data.forin);\r\n            if (Array.isArray(forin)) {\r\n                return forin.length;\r\n            } else {\r\n                return parseInt(forin, 10);\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    private onLoopComplete() {\r\n        this.runFor();\r\n    }\r\n    private addParams(): void {\r\n        if (this.component && this.component.vfStage) {\r\n            const variableManager = this.component.vfStage.variableManager;\r\n            const paramValues: any[] = [];\r\n            const runId = variableManager.getFunctionId();\r\n            const paramId = runId + '_for';\r\n            this._paramId = paramId;\r\n            if (!variableManager.variableMap[VariableManager.GLOBAL_ID]) {\r\n                variableManager.variableMap[VariableManager.GLOBAL_ID] = {};\r\n            }\r\n            variableManager.variableMap[VariableManager.GLOBAL_ID][paramId] = {\r\n                id: paramId,\r\n                type: VariableType.OBJECT,\r\n                value: 0,\r\n            };\r\n            ///\r\n            if (this.loopTask) {\r\n                const paramIds: string[] = this._paramIds.concat([this._paramId]);\r\n                injectParamsToQueueTask(this.loopTask, paramIds);\r\n            }\r\n        }\r\n    }\r\n    private removeParams(): void {\r\n        if (this.component && this.component.vfStage) {\r\n            const variableManager = this.component.vfStage.variableManager;\r\n            const paramId = this._paramId;\r\n            delete variableManager.variableMap[VariableManager.GLOBAL_ID][paramId];\r\n        }\r\n    }\r\n}\r\n","import { ContainerTask } from './core/ContainerTask';\r\nimport { TaskEvent, BaseTask } from './core/BaseTask';\r\nimport { ExpressTask } from './ExpressTask';\r\nimport { ExpressItemType, ExpressType, ExpressItem } from '../model/IVFData';\r\nimport { IfTask } from './IfTask';\r\nimport { QueueTask } from './core/QueueTask';\r\nimport { SetPropertyTask } from './SetPropertyTask';\r\nimport { PlayAnimationTask } from './PlayAnimationTask';\r\nimport { SoundTask } from './SoundTask';\r\nimport { CallFunctionTask } from './CallFunctionTask';\r\nimport { PrintTask } from './PrintTask';\r\nimport { injectParamsToQueueTask } from './core/ActionListUtils';\r\n\r\n\r\nexport class FunctionTask extends ContainerTask {\r\n        public funName: string;\r\n\r\n        protected _component: vf.gui.DisplayObject;\r\n        protected _loopComplete: boolean;\r\n        protected callTargets: number[] = [];\r\n\r\n        constructor(compontent: vf.gui.DisplayObject, funName: string) {\r\n            super();\r\n            this._loopComplete = false;\r\n            this._component = compontent;\r\n            this.funName = funName;\r\n        }\r\n    \r\n        public injectParams(paramIds: string[]): void {\r\n            if (this.loopTask) {\r\n                injectParamsToQueueTask(this.loopTask, paramIds);\r\n            }\r\n        }\r\n\r\n        \r\n        public runWithId(id: number): void {\r\n            if (!this._isRunning) {\r\n                this.callTargets.push(id);\r\n                this.run();\r\n            }\r\n        }\r\n\r\n        public stopWithId(id: number): void {\r\n            const index = this.callTargets.indexOf(id);\r\n            if (index >= 0) {\r\n                if (index > 0) {\r\n                    this.callTargets.splice(index, 1);\r\n                } else {\r\n                    this.callTargets.splice(index, 1);\r\n                    if (this._isRunning) {\r\n                        this.loopTask.stop();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        public breakWithId(id: number): void {\r\n            const index = this.callTargets.indexOf(id);\r\n            if (index >= 0) {\r\n                if (index > 0) {\r\n                    this.callTargets.splice(index, 1);\r\n                } else {\r\n                    this.callTargets.splice(index, 1);\r\n                    if (this._isRunning) {\r\n                        this.loopTask.break();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        public run() {\r\n            super.run();\r\n            this._loopComplete = true;\r\n            if (this.loopTask) {\r\n                this.loopTask.on(TaskEvent.EVENT_COMPLETE, this.onLoopComplete, this);\r\n                this.loopTask.on(TaskEvent.EVENT_BREAK, this.onBreak, this);\r\n            }\r\n            if (this.callTargets.length > 0) {\r\n                this.loopTask.run();\r\n            } else {\r\n                this.complete();\r\n            }\r\n        }\r\n\r\n    \r\n        public stop() {\r\n            this.complete();\r\n            super.stop();\r\n        }\r\n        public break() {\r\n            this.complete();\r\n            super.break();\r\n        }\r\n    \r\n        public complete() {\r\n            this.callTargets.length = 0;\r\n            this.loopTask.off(TaskEvent.EVENT_COMPLETE, this.onLoopComplete, this);\r\n            this.loopTask.off(TaskEvent.EVENT_BREAK, this.onBreak, this);\r\n            super.complete();\r\n        }\r\n        protected onLoopComplete() {\r\n            if (this.callTargets.length > 0) {\r\n                const callId = this.callTargets[0];\r\n                this.callTargets.shift();\r\n                this._isRunning = false;\r\n                this.emit(TaskEvent.FUNCTION_RUN_COMPLETE, callId);\r\n            }\r\n            if (this.callTargets.length > 0) {\r\n                this.loopTask.run();\r\n            } else {\r\n                this.complete();\r\n            }\r\n        }\r\n   \r\n    }\r\n\r\n","import { BaseTask, TaskEvent } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { ExpressType } from '../model/IVFData';\r\nimport { QueueTask } from './core/QueueTask';\r\n\r\nexport class IfTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public conditions: ExpressType[] = [];\r\n        public conditionsRun: QueueTask[] = [];\r\n        public elseRun?: QueueTask;\r\n        private curRun?: QueueTask;\r\n\r\n        constructor(compontent: VFComponent) {\r\n            super();\r\n            this.component = compontent;\r\n        }   \r\n\r\n        public addCondition(condition: ExpressType, run: QueueTask): void {\r\n            if (condition && condition.length) {\r\n                this.conditions.push(condition);\r\n                this.conditionsRun.push(run);\r\n            } else {\r\n                this.addElse(run);\r\n            }\r\n        }\r\n        public addElse(run: QueueTask): void {\r\n            this.elseRun = run;\r\n        }\r\n\r\n        public run(): void {\r\n            super.run();\r\n            this.curRun = this.findTask();\r\n            if (this.curRun) {\r\n                this.curRun.on(TaskEvent.EVENT_COMPLETE, this.onTaskComplete, this);\r\n                this.curRun.on(TaskEvent.EVENT_BREAK, this.onTaskBreak, this);\r\n                this.curRun.run();\r\n            } else {\r\n                this.complete();\r\n            }\r\n        }\r\n        private findTask(): QueueTask | undefined {\r\n            if (this.component.vfStage) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                for (let i: number = 0, len: number = this.conditions.length; i < len; i++) {\r\n                    const condition = this.conditions[i];\r\n                    const result = variableManager.caculateExpress(this.component, condition);\r\n                    if (result) {\r\n                        return this.conditionsRun[i];\r\n                    }\r\n                }\r\n                if (this.elseRun) {\r\n                    return this.elseRun;\r\n                }\r\n            }\r\n            \r\n        }\r\n        private onTaskComplete(data: any): void {\r\n            if (this.curRun) {\r\n                this.curRun.off(TaskEvent.EVENT_COMPLETE, this.onTaskComplete, this);\r\n            }\r\n            this.complete();\r\n        }\r\n        private onTaskBreak(data: any): void {\r\n            this.break();\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { ITransitionData } from '../model/IVFData';\r\n\r\nexport class JumpToNextSceneTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public transition?: ITransitionData;\r\n\r\n        constructor(compontent: VFComponent, transition?: ITransitionData) {\r\n            super();\r\n            this.component = compontent;\r\n            this.transition = transition;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            const vfStage = this.component.vfStage;\r\n            if (vfStage) {\r\n                vfStage.switchToNextScene(this.transition);\r\n                this.complete();\r\n            } else {\r\n                this.complete();\r\n            }\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { ITransitionData } from '../model/IVFData';\r\n\r\nexport class JumpToPrevSceneTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public transition?: ITransitionData;\r\n\r\n        constructor(compontent: VFComponent, transition?: ITransitionData) {\r\n            super();\r\n            this.component = compontent;\r\n            this.transition = transition;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            const vfStage = this.component.vfStage;\r\n            if (vfStage) {\r\n                vfStage.switchToPrevScene(this.transition);\r\n                this.complete();\r\n            } else {\r\n                this.complete();\r\n            }\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { ITransitionData } from '../model/IVFData';\r\n\r\nexport class JumpToSceneTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public sceneId: string;\r\n        public transition?: ITransitionData;\r\n\r\n        constructor(compontent: VFComponent, sceneId: string, transition?: ITransitionData) {\r\n            super();\r\n            this.component = compontent;\r\n            this.sceneId = sceneId;\r\n            this.transition = transition;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            const vfStage = this.component.vfStage;\r\n            if (vfStage) {\r\n                vfStage.switchToSceneId(this.sceneId, this.transition);\r\n                this.complete();\r\n            } else {\r\n                this.complete();\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IActionPlayAnimation } from '../model/IVFData';\r\nimport { getTargetComponent } from '../../utils/VFUtil';\r\n\r\nexport class PlayAnimationTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IActionPlayAnimation;\r\n        protected _component: VFComponent | undefined;\r\n\r\n        constructor(compontent: VFComponent, data: IActionPlayAnimation) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n            \r\n        }   \r\n       \r\n        public run(): void {\r\n            super.run();\r\n            this._component = getTargetComponent(this.component, this.data.target) as VFComponent;\r\n            const name = this.getValue();\r\n            const times = this.getTimes();\r\n            if (this._component && this._component.vfStage) {\r\n                this._component.play(name, times);\r\n            }\r\n            \r\n            this.complete();\r\n        }\r\n\r\n        private getValue(): any {\r\n            if (Array.isArray(this.data.name)) {\r\n                if (this._component && this.component.vfStage) {\r\n                    const variableManager = this.component.vfStage.variableManager;\r\n                    return variableManager.getExpressItemValue(this._component, this.data.name);\r\n                }\r\n                \r\n            } \r\n            return this.data.name;\r\n        }\r\n        private getTimes(): any {\r\n            if (Array.isArray(this.data.times)) {\r\n                if (this._component && this.component.vfStage) {\r\n                    const variableManager = this.component.vfStage.variableManager;\r\n                    return variableManager.getExpressItemValue(this._component, this.data.times);\r\n                }\r\n                \r\n            } \r\n            return this.data.times;\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport trace from '../../utils/Trace';\r\nimport { IAction } from '../model/IVFData';\r\nimport { VFComponent } from '../../display/VFComponent';\r\n\r\nexport class PrintTask extends BaseTask {\r\n        public data: IAction;\r\n        private component: VFComponent;\r\n        constructor(component: VFComponent, data: IAction) {\r\n            super();\r\n            this.component = component;\r\n            this.data = data;\r\n        }\r\n\r\n        public run(): void {\r\n            // mark: 运行日志统一移到日志模块处理\r\n            if(this.component.vfStage?.config.debug) trace(this.getValue());\r\n            this.complete();\r\n        }\r\n\r\n        private getValue(): any {\r\n            if (Array.isArray(this.data.value)) {\r\n                if (this.component.vfStage) {\r\n                    const variableManager = this.component.vfStage.variableManager;\r\n                    return variableManager.getExpressItemValue(this.component, this.data.value);\r\n                }\r\n                \r\n            } \r\n            return this.data.value;\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IActionAddEventListener } from '../model/IVFData';\r\nimport { getTargetComponent } from '../../utils/VFUtil';\r\n\r\n\r\nexport class RemoveListenerTask extends BaseTask {\r\n        public data: IActionAddEventListener;\r\n        public eventName: string;\r\n        public component: VFComponent;\r\n        protected _component: vf.gui.DisplayObject | undefined;\r\n        protected _loopComplete: boolean;\r\n        protected system: boolean;\r\n        protected global: boolean;\r\n\r\n        constructor(component: VFComponent, data: IActionAddEventListener) {\r\n            super();\r\n            this._loopComplete = false;\r\n            this.component = component;\r\n            this.data = data;\r\n            this.eventName = data.event;\r\n            this.system = data.system === true;\r\n            this.global = data.global === true;\r\n        }\r\n    \r\n        public run() {\r\n            super.run();\r\n            if (this.component) {\r\n                if (this.system) {\r\n                    const vfStage = (this.component as VFComponent).vfStage;\r\n                    if (vfStage) {\r\n                        vfStage.systemEvent.off(this.eventName);\r\n                    }\r\n                } else if (this.global) {\r\n                    const vfStage = (this.component as VFComponent).vfStage;\r\n                    if (vfStage) {\r\n                        vfStage.off(this.eventName);\r\n                    }\r\n                } else {\r\n                    this._component = getTargetComponent(this.component, this.data.target);\r\n                    if (this._component) {\r\n                        this._component.off(this.eventName);\r\n                    }\r\n                }\r\n            }\r\n            this.complete();\r\n        }   \r\n    }\r\n\r\n","import { BaseTask, TaskEvent } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAction, IActionInterval } from '../model/IVFData';\r\nimport { isNumber } from '../../utils/VFUtil';\r\nimport { ContainerTask } from './core/ContainerTask';\r\n\r\nexport class SetIntervalTask extends ContainerTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IActionInterval;\r\n        private timeoutHandler?: vf.gui.Scheduler;\r\n        private lastTimes: number = 0;\r\n        private loopTaskComplete: boolean = true;\r\n        private intervalComplete: boolean = true;\r\n        private _timeout: number = 0;\r\n        private _times: number = 1;\r\n        constructor(component: VFComponent, data: IActionInterval) {\r\n            super();\r\n            this.component = component;\r\n            this.data = data;\r\n        }   \r\n\r\n        private get timeout(): number {\r\n            let time: number = 0;\r\n            if (Array.isArray(this.data.value)) {\r\n                if (this.component && this.component.vfStage) {\r\n                    const variableManager = this.component.vfStage.variableManager;\r\n                    time = variableManager.getExpressItemValue(this.component, this.data.value);\r\n                }\r\n            } else {\r\n                time = this.data.value;\r\n            }\r\n            if (!isNumber(time)) {\r\n                time = 1;\r\n            }\r\n            return time;\r\n        }\r\n\r\n        private get times(): number {\r\n            let times: number = 0;\r\n            if (Array.isArray(this.data.times)) {\r\n                if (this.component && this.component.vfStage) {\r\n                    const variableManager = this.component.vfStage.variableManager;\r\n                    times = variableManager.getExpressItemValue(this.component, this.data.times);\r\n                }\r\n                \r\n            } else {\r\n                if (this.data.times === undefined) {\r\n                    times = 0;\r\n                } else {\r\n                    times = this.data.times;\r\n                }\r\n                \r\n            }\r\n            if (!isNumber(times)) {\r\n                times = 0;\r\n            }\r\n            return times;\r\n        }\r\n\r\n        public run(): void {\r\n            super.run();\r\n            this._timeout = this.timeout;\r\n            this._times = this.times;\r\n            this.lastTimes = this._times;\r\n            if (this.loopTask) {\r\n                this.loopTask.addListener(TaskEvent.EVENT_COMPLETE, this.onLoopComplete, this);\r\n            }\r\n            \r\n            this.runOnce(this._timeout, this._times);\r\n        }\r\n\r\n        public complete(): void {\r\n            \r\n            super.complete();\r\n            if (this.timeoutHandler) {\r\n                this.timeoutHandler.stop();\r\n                this.timeoutHandler = undefined;\r\n            }\r\n            if (this.loopTask) {\r\n                this.loopTask.removeListener(TaskEvent.EVENT_COMPLETE, this.onLoopComplete, this);\r\n            }\r\n        }\r\n\r\n        public stop(): void {\r\n            super.stop();\r\n            this.complete();\r\n        }\r\n\r\n        public resume(): void {\r\n            if (this._isPaused) {\r\n                if (this.loopTaskComplete && this.intervalComplete) {\r\n                    this.checkComplete(this._timeout, this._times);\r\n                }\r\n            }\r\n            super.resume();\r\n        }\r\n        private onLoopComplete(): void {\r\n            this.loopTaskComplete = true;\r\n            if (this.intervalComplete) {\r\n                this.checkComplete(this._timeout, this._times);\r\n            }\r\n        }\r\n\r\n        private runOnce(timeout: number, times: number): void {  \r\n            this.intervalComplete = false;\r\n            if (this.timeoutHandler === undefined) {\r\n                this.timeoutHandler = vf.gui.Scheduler.setTimeout(timeout, () => {\r\n                    this.intervalComplete = true;\r\n                    if (this.timeoutHandler) {\r\n                        this.timeoutHandler.stop();\r\n                    }\r\n    \r\n                    if (this.loopTaskComplete && this.intervalComplete) {\r\n                        this.checkComplete(timeout, times);\r\n                    }\r\n                });\r\n            } else {\r\n                this.timeoutHandler.restart();\r\n            }\r\n            \r\n            \r\n        }\r\n\r\n        private checkComplete(timeout: number, times: number): void {\r\n            if (this._isPaused || this._isCompleted) {\r\n                return;\r\n            }\r\n            let isComplete: boolean = false;\r\n            if (times > 0) {\r\n                if (this.lastTimes > 0) {\r\n                    isComplete =  false;\r\n                } else {\r\n                    isComplete =  true;\r\n                }\r\n            } else {\r\n                isComplete =  false;\r\n            }\r\n\r\n            if (isComplete) {\r\n                this.complete();\r\n            } else {\r\n                this.lastTimes--;\r\n                if (this.loopTask) {\r\n                    this.loopTaskComplete = false;\r\n                    this.runOnce(timeout, times);\r\n                    this.loopTask.run();\r\n                    \r\n                } else {\r\n                    this.complete();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IActionSetProperty } from '../model/IVFData';\r\nimport { getTargetComponent } from '../../utils/VFUtil';\r\n\r\nexport class SetPropertyTask extends BaseTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IActionSetProperty;\r\n\r\n        constructor(compontent: VFComponent, data: IActionSetProperty) {\r\n            super();\r\n            this.component = compontent;\r\n            this.data = data;\r\n        }   \r\n\r\n        public run(): void {\r\n            super.run();\r\n            const component = getTargetComponent(this.component, this.data.target);\r\n            if (component) {\r\n                (component as any)[this.data.property] = this.getValue();\r\n            }\r\n            this.complete();\r\n        }\r\n\r\n        private getValue(): any {\r\n            if (Array.isArray(this.data.value)) {\r\n                if (this.component.vfStage) {\r\n                    const variableManager = this.component.vfStage.variableManager;\r\n                    return variableManager.getExpressItemValue(this.component, this.data.value);\r\n                }\r\n                \r\n            } \r\n            return this.data.value;\r\n        }\r\n    }\r\n\r\n","import { BaseTask, TaskEvent } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAction } from '../model/IVFData';\r\nimport { isNumber } from '../../utils/VFUtil';\r\nimport { ContainerTask } from './core/ContainerTask';\r\n\r\nexport class SetTimeoutTask extends ContainerTask {\r\n        \r\n        public component: VFComponent;\r\n        public data: IAction;\r\n        private timeoutHandler?: vf.gui.Scheduler;\r\n\r\n        constructor(component: VFComponent, data: IAction) {\r\n            super();\r\n            this.component = component;\r\n            this.data = data;\r\n        }   \r\n\r\n        private get timeout(): number {\r\n            let time: number = 0;\r\n            if (Array.isArray(this.data.value)) {\r\n                if (this.component && this.component.vfStage) {\r\n                    const variableManager = this.component.vfStage.variableManager;\r\n                    time = variableManager.getExpressItemValue(this.component, this.data.value);\r\n                }\r\n                \r\n            } else {\r\n                time = this.data.value;\r\n            }\r\n            if (!isNumber(time)) {\r\n                time = 1;\r\n            }\r\n            return time;\r\n        }\r\n\r\n        public run(): void {\r\n            super.run();\r\n            const timeout = this.timeout;\r\n            this.timeoutHandler = vf.gui.Scheduler.setTimeout(timeout, () => {\r\n                if (this.timeoutHandler) {\r\n                    this.timeoutHandler.stop();\r\n                    this.timeoutHandler = undefined;\r\n                }\r\n                if (this.loopTask) {\r\n                    this.loopTask.run();\r\n                }   \r\n            });\r\n\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n","import { BaseTask } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IActionSound, ActionType } from '../model/IVFData';\r\n\r\nexport class SoundTask extends BaseTask {\r\n        public component: VFComponent;\r\n        public readonly data: IActionSound;\r\n        public readonly dataType: number;\r\n\r\n        constructor(compontent: VFComponent, actionData: IActionSound) {\r\n            super();\r\n            this.component = compontent;\r\n            this.dataType = actionData.type;\r\n            this.data = actionData;\r\n        }\r\n\r\n        public run(): void {\r\n            super.run();\r\n            if (this.component.vfStage) {\r\n                const soundManager = this.component.vfStage.soundManager;\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                let data: any;\r\n\r\n                try {\r\n                    data = variableManager.getExpressItemValue(this.component, this.data.value);\r\n                }\r\n                catch (e) {\r\n                    vf.utils.deprecation('5.2.1-v14', 'Please use the new sound API');\r\n                }\r\n                if (data === undefined) {\r\n                    console.log('Please use the new sound API');\r\n\r\n                    return;\r\n                }\r\n                if (data.assetId === undefined) {\r\n                    console.log('execute sound failed, missing assetId');\r\n\r\n                    return;\r\n                }\r\n                if (data.trackId === undefined) {\r\n                    console.log('execute sound failed, missing trackId');\r\n\r\n                    return;\r\n                }\r\n                data.mode = data.mode || 'sound';\r\n                let soundId: number | string | undefined;\r\n\r\n                if (Array.isArray(data.assetId)) {\r\n                    const soundIdVar = variableManager.getExpressItemValue(this.component, data.assetId);\r\n\r\n                    if (soundIdVar && soundIdVar.value !== undefined) {\r\n                        soundId = soundIdVar.value;\r\n                    }\r\n                    else {\r\n                        soundId = soundIdVar;\r\n                    }\r\n                }\r\n                else {\r\n                    soundId = data.assetId;\r\n                }\r\n                data.assetId = soundId as number;\r\n                switch (this.dataType) {\r\n                    case ActionType.PlaySound:\r\n                        soundManager.playSound(data);\r\n                        break;\r\n                    case ActionType.PauseSound:\r\n                        soundManager.pauseSound(data);\r\n                        break;\r\n                    case ActionType.ResumeSound:\r\n                        soundManager.resumeSound(data);\r\n                        break;\r\n                }\r\n                this.complete();\r\n            }\r\n            else {\r\n                this.complete();\r\n            }\r\n        }\r\n}\r\n\r\n","import { BaseTask, TaskEvent } from './core/BaseTask';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAction } from '../model/IVFData';\r\nimport { isNumber } from '../../utils/VFUtil';\r\n\r\nexport class WaitTask extends BaseTask {\r\n        \r\n    public component: VFComponent;\r\n    public data: IAction;\r\n    private timeoutHandler?: vf.gui.Scheduler;\r\n\r\n    constructor(component: VFComponent, data: IAction) {\r\n        super();\r\n        this.component = component;\r\n        this.data = data;\r\n    }   \r\n\r\n    private get timeout(): number {\r\n        let time: number = 0;\r\n        if (Array.isArray(this.data.value)) {\r\n            if (this.component && this.component.vfStage) {\r\n                const variableManager = this.component.vfStage.variableManager;\r\n                time = variableManager.getExpressItemValue(this.component, this.data.value);\r\n            }\r\n            \r\n        } else {\r\n            time = this.data.value;\r\n        }\r\n        if (!isNumber(time)) {\r\n            time = 1;\r\n        }\r\n        return time;\r\n    }\r\n\r\n    public run(): void {\r\n        super.run();\r\n        const timeout = this.timeout;\r\n        this.timeoutHandler = vf.gui.Scheduler.setTimeout(timeout, () => {\r\n            if (this.timeoutHandler) {\r\n                this.timeoutHandler.stop();\r\n                this.timeoutHandler = undefined;\r\n            }\r\n            \r\n            this.complete();\r\n        });\r\n    }\r\n}\r\n\r\n","import { QueueTask } from './QueueTask';\r\nimport { BaseTask } from './BaseTask';\r\nimport { ExpressTask } from '../ExpressTask';\r\nimport { IfTask } from '../IfTask';\r\nimport { SetPropertyTask } from '../SetPropertyTask';\r\nimport { PlayAnimationTask } from '../PlayAnimationTask';\r\nimport { SoundTask } from '../SoundTask';\r\nimport { CallFunctionTask } from '../CallFunctionTask';\r\nimport { PrintTask } from '../PrintTask';\r\nimport { ExpressType, ExpressItem, ExpressItemType } from '../../model/IVFData';\r\nimport { ForTask } from '../ForTask';\r\nimport { CallProtoFunctionTask } from '../CallProtoFunctionTask';\r\nimport { AddListenerTask } from '../AddListenerTask';\r\nimport { AddListenerCallTask } from '../AddListenerCallTask';\r\nimport { RemoveListenerTask } from '../RemoveListenerTask';\r\nimport { EmitEventTask } from '../EmitEventTask';\r\n\r\nexport function injectParamsToQueueTask(queue: QueueTask, paramIds: string[]): void {\r\n    const tasks = queue.tasks;\r\n    if (tasks) {\r\n        for (let i: number = 0, len: number = tasks.length; i < len; i++) {\r\n            injectParamsToTask(tasks[i], paramIds);\r\n        }\r\n    }\r\n}\r\nfunction injectParamsToTask(task: BaseTask, paramIds: string[]): void {\r\n    if (task instanceof ExpressTask) {\r\n        const express = (task).data.express;\r\n        modifyParamValue(express, paramIds);\r\n    } else if (task instanceof IfTask) {\r\n        const conditions = task.conditions;\r\n        for (let j: number = 0, jlen: number = conditions.length; j < jlen; j++) {\r\n            const exp = conditions[j];\r\n            modifyParamValue(exp, paramIds);\r\n        }\r\n        if (task.conditionsRun) {\r\n            const conditionRun = task.conditionsRun;\r\n            for (let i: number = 0, len: number = conditionRun.length; i < len; i++) {\r\n                const oneRun = conditionRun[i];\r\n                injectParamsToQueueTask(oneRun, paramIds);\r\n            }\r\n        }\r\n        if (task.elseRun) {\r\n            injectParamsToQueueTask(task.elseRun, paramIds);\r\n        }\r\n    } else if (task instanceof SetPropertyTask) {\r\n        if (task.data.value && Array.isArray(task.data.value)) {\r\n            modiyExpressItemParamValue(task.data.value, paramIds);\r\n        }\r\n    } else if (task instanceof PlayAnimationTask) {\r\n        if (task.data.name && Array.isArray(task.data.name)) {\r\n            modiyExpressItemParamValue(task.data.name as any, paramIds);\r\n        }\r\n        if (task.data && task.data.target) {\r\n            modiyExpressItemParamValue(task.data.target, paramIds);\r\n        }\r\n    } else if (task instanceof SoundTask) {\r\n        if (task.data.assetId && Array.isArray(task.data.assetId)) {\r\n            modiyExpressItemParamValue(task.data.assetId, paramIds);\r\n        }\r\n    } else if (task instanceof CallFunctionTask) {\r\n        if (task.data && task.data.params) {\r\n            modifyParamValue(task.data.params, paramIds);\r\n        }\r\n        if (task.data && task.data.target) {\r\n            modiyExpressItemParamValue(task.data.target, paramIds);\r\n        }\r\n    } else if (task instanceof PrintTask) {\r\n        if (task.data && task.data.value) {\r\n            modiyExpressItemParamValue(task.data.value, paramIds);\r\n        }\r\n    } else if (task instanceof ForTask) {\r\n        task.injectParams(paramIds);\r\n    } else if (task instanceof AddListenerTask ||\r\n        task instanceof AddListenerCallTask ||\r\n        task instanceof RemoveListenerTask ||\r\n        task instanceof EmitEventTask ||\r\n        task instanceof CallProtoFunctionTask) {\r\n\r\n        if (task.data && task.data.target) {\r\n            modiyExpressItemParamValue(task.data.target, paramIds);\r\n        }\r\n    }\r\n}\r\nfunction modifyParamValue(express: ExpressType, paramIds: any[]): void {\r\n    if (!express || !Array.isArray(express)) {\r\n        return;\r\n    }\r\n    for (let j: number = 0, jlen: number = express.length; j < jlen; j++) {\r\n        const expressItem = express[j];\r\n        modiyExpressItemParamValue(expressItem, paramIds);\r\n    }\r\n}\r\nfunction modiyExpressItemParamValue(expressItem: ExpressItem, paramIds: any[]): void {\r\n    if (expressItem[0] === ExpressItemType.PARAM_VALUE) {\r\n        const paramIndex = expressItem[1];\r\n        if (paramIds.length > paramIndex) {\r\n            expressItem[2] = paramIds[paramIndex];\r\n        }\r\n    } else if (expressItem[0] === ExpressItemType.ARRAY_VALUE) {\r\n        // expressItem 0:type, 1:componentId, 2: variableId, 3: index, 4?: property\r\n        if (Array.isArray(expressItem[3])) {\r\n            modiyExpressItemParamValue(expressItem[3], paramIds);\r\n        }\r\n    }\r\n}\r\n","export enum TaskEvent {\r\n    EVENT_COMPLETE = 'EVENT_COMPLETE',\r\n    EVENT_FAIL = 'EVENT_FAIL',\r\n    EVENT_BREAK = 'EVENT_BREAK',\r\n    FUNCTION_RUN_COMPLETE = 'FUNCTION_RUN_COMPLETE',\r\n}\r\nexport class BaseTask extends vf.utils.EventEmitter {\r\n\r\n    protected _isRunning: boolean = false;\r\n    protected _isPaused: boolean = false;\r\n    protected _isCompleted: boolean = false;\r\n    protected _isFailed: boolean = false;\r\n    protected _asynchronous: boolean = false;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    public run(): void {\r\n        this._isRunning = true;\r\n        this._isCompleted = false;\r\n        this._isFailed = false;\r\n    }\r\n\r\n    public stop(): void {\r\n        this._isRunning = false;\r\n    }\r\n\r\n    public pause(): void {\r\n        this._isPaused = true;\r\n    }\r\n\r\n    public resume(): void {\r\n        this._isPaused = false;\r\n    }\r\n    public break() {\r\n        this._isRunning = false;\r\n        this.emit(TaskEvent.EVENT_BREAK);\r\n    }\r\n\r\n    public complete(): void {\r\n        this._isRunning = false;\r\n        this._isCompleted = true;\r\n        this.emit(TaskEvent.EVENT_COMPLETE);\r\n    }\r\n\r\n    public fail(type: string, data: any = null): void {\r\n        this._isRunning = false;\r\n        this._isFailed = true;\r\n        this.emit(TaskEvent.EVENT_FAIL, data);\r\n    }\r\n\r\n    public get asynchronous(): boolean {\r\n        return this._asynchronous;\r\n    }\r\n\r\n    public get isRunning(): boolean {\r\n        return this._isRunning;\r\n    }\r\n\r\n    public get isCompleted(): boolean {\r\n        return this._isCompleted;\r\n    }\r\n    public get isFailed(): boolean {\r\n        return this._isFailed;\r\n    }\r\n\r\n    public get isPaused(): boolean {\r\n        return this._isPaused;\r\n    }\r\n}\r\n\r\n","import { BaseTask, TaskEvent } from './BaseTask';\r\nimport { QueueTask } from './QueueTask';\r\n\r\nexport class ContainerTask extends BaseTask {\r\n\r\n        protected loopTask: QueueTask;\r\n\r\n        constructor() {\r\n            super();\r\n            this.loopTask = new QueueTask();\r\n            this.loopTask.on(TaskEvent.EVENT_BREAK, this.onBreak, this);\r\n        }\r\n    \r\n        public addSubTask(task: BaseTask) {\r\n            if (this.loopTask) {\r\n                this.loopTask.addTask(task);\r\n                if (this.loopTask.asynchronous) {\r\n                    this._asynchronous = true;\r\n                }\r\n            }\r\n        }\r\n    \r\n        public stop() {\r\n            super.stop();\r\n            if (this.loopTask) {\r\n                this.loopTask.off(TaskEvent.EVENT_BREAK);\r\n                this.loopTask.stop();\r\n            }\r\n        }\r\n    \r\n        public break() {\r\n            super.break();\r\n            if (this.loopTask) {\r\n                this.loopTask.off(TaskEvent.EVENT_BREAK);\r\n                this.loopTask.break();\r\n            }\r\n        }\r\n\r\n        public pause(): void {\r\n            super.pause();\r\n            if (this.loopTask) {\r\n                this.loopTask.pause();\r\n            }\r\n        }\r\n\r\n        public resume(): void {\r\n            super.resume();\r\n            if (this.loopTask) {\r\n                this.loopTask.resume();\r\n            }\r\n        }\r\n\r\n        protected onBreak(data: any) {\r\n            this.break();\r\n        }\r\n    }\r\n\r\n","import { BaseTask, TaskEvent } from './BaseTask';\r\n\r\nexport class QueueTask extends BaseTask {\r\n\r\n        private _tasks: BaseTask[] = [];\r\n        private _currentTask: BaseTask = null as any;\r\n        private _curTaskIndex: number = 0;\r\n\r\n        constructor() {\r\n            super();\r\n        }\r\n        \r\n        public get tasks(): BaseTask[] {\r\n            return this._tasks;\r\n        }\r\n\r\n        public run(): void {\r\n            if (this.isRunning) {\r\n                return;\r\n            }\r\n            this._curTaskIndex = 0;\r\n            super.run();\r\n            this._nextTask();\r\n        }\r\n\r\n        public stop(): void {\r\n            super.stop();\r\n\r\n            if (this._currentTask) {\r\n                this.clearEvent(this._currentTask);\r\n                this._currentTask.stop();\r\n                this._currentTask = null as any;\r\n            }\r\n            this._curTaskIndex = Number.MAX_VALUE;\r\n            this.off(TaskEvent.EVENT_COMPLETE);\r\n            this.off(TaskEvent.EVENT_BREAK);\r\n            this.off(TaskEvent.EVENT_FAIL);\r\n            this.complete();\r\n        }\r\n\r\n        public pause(): void {\r\n            super.pause();\r\n            if (this._tasks) {\r\n                for (let i: number = 0, len: number = this._tasks.length; i < len; i++) {\r\n                    this._tasks[i].pause();\r\n                }\r\n            }\r\n        }\r\n\r\n        public resume(): void {\r\n            super.resume();\r\n            if (this._tasks) {\r\n                for (let i: number = 0, len: number = this._tasks.length; i < len; i++) {\r\n                    this._tasks[i].resume();\r\n                }\r\n            }\r\n        }\r\n\r\n        public break(): void {\r\n            super.break();\r\n\r\n            if (this._currentTask) {\r\n                this.clearEvent(this._currentTask);\r\n                this._currentTask.break();\r\n                this._currentTask = null as any;\r\n            }\r\n            this._curTaskIndex = Number.MAX_VALUE;\r\n            this.off(TaskEvent.EVENT_COMPLETE);\r\n            this.off(TaskEvent.EVENT_BREAK);\r\n            this.off(TaskEvent.EVENT_FAIL);\r\n            this.complete();\r\n        }\r\n\r\n        public addTask(task: BaseTask): BaseTask {\r\n            if (task) {\r\n                if (task.asynchronous) {\r\n                    this._asynchronous = true;\r\n                }\r\n                if (this._tasks.indexOf(task) < 0) {\r\n                    this._tasks.push(task);\r\n                } else {\r\n                    throw new Error('duplicate task');\r\n                }\r\n            } else {\r\n                throw new Error('ArgumentError');\r\n            }\r\n            return task;\r\n        }\r\n        private _nextTask(prevTask?: BaseTask): void {\r\n\r\n            let task: BaseTask = null as any;\r\n            if (this._curTaskIndex < this._tasks.length) {\r\n                task = this._tasks[this._curTaskIndex];\r\n            }\r\n            if (task) {\r\n                this._currentTask = task;\r\n                this._currentTask.on(TaskEvent.EVENT_COMPLETE, this.onOneTaskComplete, this);\r\n                this._currentTask.on(TaskEvent.EVENT_FAIL, this.onOneTaskFail, this);\r\n                this._currentTask.on(TaskEvent.EVENT_BREAK, this.onOneTaskBreak, this);\r\n\r\n                this._currentTask.run();\r\n            } else {\r\n                this.complete();\r\n            }\r\n        }\r\n\r\n        private clearEvent(task: BaseTask): void {\r\n            if (task) {\r\n                task.off(TaskEvent.EVENT_COMPLETE, this.onOneTaskComplete, this);\r\n                task.off(TaskEvent.EVENT_FAIL, this.onOneTaskFail, this);\r\n                task.off(TaskEvent.EVENT_BREAK, this.onOneTaskBreak, this);\r\n            }\r\n        }\r\n\r\n        private onOneTaskBreak(data: any): void {\r\n            if (this._currentTask) {\r\n                this.clearEvent(this._currentTask);\r\n                this.emit(TaskEvent.EVENT_BREAK);\r\n                this.complete();\r\n            }\r\n        }\r\n\r\n        private onOneTaskFail(data: any): void {\r\n            if (this._currentTask) {\r\n                this.clearEvent(this._currentTask);\r\n                this.fail(data.type, data.data);\r\n            } else {\r\n                // debug\r\n                throw new Error('no task');\r\n            }\r\n        }\r\n\r\n        private onOneTaskComplete(data: any): void {\r\n            this.clearEvent(this._currentTask);\r\n            this._curTaskIndex++;\r\n            this._nextTask(this._currentTask);\r\n        }\r\n    }\r\n\r\n","import { AnimationClip } from './AnimationClip';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { IAnimation, ITimeline, TimelineType, IFrame, ISubAnimation, AnimationEvent, AnimationStatus } from '../model/IVFData';\r\nimport { Timeline } from './Timeline';\r\nimport { NumberFrame } from './NumberFrame';\r\nimport { BooleanFrame } from './BooleanFrame';\r\nimport { StringFrame } from './StringFrame';\r\nimport { ColorFrame } from './ColorFrame';\r\nimport { Frame } from './Frame';\r\nimport { EventTimeline } from './EventTimeline';\r\nimport { EventFrame } from './EventFrame';\r\nimport { PathTimeline } from './PathTimeline';\r\n\r\nexport class Animation {\r\n\r\n        private animationMap: {[name: string]: AnimationClip[]} = {};\r\n        private animationConfig: {[name: string]: {loop?: boolean, totalTime: number, autoPlay?: boolean}} = {};\r\n\r\n        private status: number = AnimationStatus.STOP;\r\n        private curAnimationClips: AnimationClip[] = [];\r\n\r\n        /**\r\n         * realFPS 为 true时，真实的fps和设置的fps不一致时，动画的刷新率取最低的那个。\r\n         * 默认是false， 真实的fps和设置的fps不一致时，动画的刷新率取真实的fps\r\n         */\r\n        private realFPS: boolean = false;\r\n        private curTime: number = 0;\r\n        private lastTime: number = 0;\r\n        private curPlayTime: number = 0;\r\n        private startTime: number = 0;\r\n        private passedTime: number = 0;\r\n        private component: VFComponent;\r\n        private data: IAnimation[];\r\n        private minDeltaT: number = 33;\r\n        private deltaT: number = 0;\r\n        private fps: number = 30;\r\n        private curAnimatinName: string = '';\r\n        private curAnimatinDuration: number = 0;\r\n        private curAnimatinDurationTime: number = 0;\r\n        private curAnimationTimes: number = 0;\r\n        private curAnimationTotalTime: number = 0;\r\n        private _curPlayTimes: number = 0;\r\n\r\n        constructor(component: VFComponent, data: IAnimation[], fps: number = 30, realFPS: boolean = true) {\r\n            this.component = component;\r\n            this.data = data;\r\n            this.realFPS = realFPS;\r\n            if (fps > 0) {\r\n                this.fps = fps;\r\n            }\r\n            this.minDeltaT = Math.ceil(1000 / this.fps);\r\n            this.deltaT = 0;\r\n            this.parseData();\r\n        }\r\n\r\n        public addAnimationClip(clip: AnimationClip): void {\r\n            const name = clip.name;\r\n            let animations = this.animationMap[name];\r\n            if (animations == null) {\r\n                animations = [];\r\n                this.animationMap[name] = animations;\r\n            }\r\n            animations.push(clip);\r\n        }\r\n\r\n        public getPauseData(): {animation: string, frame: number, times: number} | undefined {\r\n            if (this.status === AnimationStatus.PLAYING) {\r\n                return {\r\n                    animation: this.curAnimatinName,\r\n                    frame: Math.round(this.curPlayTime * this.fps / 1000),\r\n                    times: this.curAnimationTimes <= 0 ? \r\n                                this.curAnimationTimes : \r\n                                (this.curAnimationTimes - this._curPlayTimes),\r\n                };\r\n            }\r\n            return undefined;\r\n        }\r\n        public playDefaultAnimation(): void {\r\n            if (this.status === AnimationStatus.PLAYING) {\r\n                return;\r\n            }\r\n            for ( const name in this.animationConfig) {\r\n                if (this.animationConfig[name]) {\r\n                    const config = this.animationConfig[name];\r\n                    if (config.autoPlay) {\r\n                        this.play(name, config.loop ? -1 : 1);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        public gotoPlay(name: string, frameIndex: number, times: number = 1): void  {\r\n            if (this.status === AnimationStatus.PLAYING) {\r\n                this.stop();\r\n            }\r\n            const config = this.animationConfig[name];\r\n            if (config) {\r\n                this.curAnimatinDuration = config.totalTime;\r\n            } else {\r\n                // tslint:disable-next-line: no-console\r\n                console.warn('can not find animation:', name);\r\n                return;\r\n            }\r\n            this.curAnimatinName = name;\r\n            this.curAnimationClips = this.animationMap[name];\r\n            this.curAnimationTimes = times;\r\n            this.curAnimationTotalTime = Math.round(this.curAnimatinDuration * \r\n                                                    this.curAnimationTimes * (1000 / this.fps));\r\n            this.curAnimatinDurationTime = Math.round(this.curAnimatinDuration * 1000 / this.fps);\r\n            this.curPlayTime = frameIndex * (1000 / this.fps);\r\n            this.deltaT = 0;\r\n            this.setCurTime(this.curPlayTime);\r\n            this.status = AnimationStatus.PLAYING;\r\n            this.startTime = new Date().getTime();\r\n            this.curTime = this.startTime;\r\n            this.lastTime = this.startTime;\r\n            this.startTime -= this.curPlayTime;\r\n            this._curPlayTimes = 0;\r\n            vf.gui.TickerShared.add(this.tick, this);\r\n        }\r\n        public gotoStop(name: string, frameIndex: number): void {\r\n            if (this.status === AnimationStatus.PLAYING) {\r\n                this.stop();\r\n            }\r\n            const config = this.animationConfig[name];\r\n            if (config) {\r\n                this.curAnimatinDuration = config.totalTime;\r\n            } else {\r\n                // tslint:disable-next-line: no-console\r\n                console.warn('can not find animation:', name);\r\n                return;\r\n            }\r\n\r\n            this.curAnimationClips = this.animationMap[name];\r\n            this.curAnimationTimes = 1;\r\n            this.curAnimationTotalTime = Math.round(this.curAnimatinDuration * \r\n                                                    this.curAnimationTimes * (1000 / this.fps));\r\n            this.curAnimatinDurationTime = Math.round(this.curAnimatinDuration * 1000 / this.fps);\r\n            this.curPlayTime = frameIndex * (1000 / this.fps);\r\n            this.deltaT = 0;\r\n            this.setCurTime(this.curPlayTime);\r\n            this.status = AnimationStatus.STOP;\r\n            this.startTime = new Date().getTime();\r\n            this.curTime = this.startTime;\r\n            this.lastTime = this.startTime;\r\n            this.startTime -= this.curPlayTime;\r\n            this._curPlayTimes = 0;\r\n            this.tick();\r\n        }\r\n\r\n        public play(name: string, times = 1): void {\r\n            this.gotoPlay(name, 0, times);\r\n        }\r\n\r\n        public stop(): void {\r\n            vf.gui.TickerShared.remove(this.tick, this);\r\n            this.status = AnimationStatus.STOP;\r\n            this.skipNextEvent();\r\n        }\r\n\r\n        protected set curPlayTimes(v: number) {\r\n            if (v !== this._curPlayTimes) {\r\n                this._curPlayTimes = v;\r\n                if (this.component) {\r\n                    this.component.emit(AnimationEvent.AnimationLoopComplete, v);\r\n                    if (this.curAnimationTimes > 0 && this._curPlayTimes >= this.curAnimationTimes) {\r\n                        this.component.emit(AnimationEvent.AnimationComplete);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        protected tick(): void {\r\n            const curTime = new Date().getTime();\r\n            this.curTime = curTime;\r\n            const dt = this.curTime - this.lastTime;\r\n            this.curPlayTime += dt;\r\n            if (this.realFPS) {\r\n                this.deltaT += dt;\r\n                if (this.deltaT < this.minDeltaT) {\r\n                    this.lastTime = this.curTime;\r\n                    this.passedTime = this.curTime - this.startTime;\r\n\r\n                    if (this.curAnimationTimes > 0 && \r\n                        this.passedTime > this.curAnimationTotalTime) {\r\n                        this.stop();\r\n                    }\r\n                    this.curPlayTimes = Math.floor(this.passedTime / this.curAnimatinDurationTime);\r\n                    return;\r\n                }\r\n                while (this.deltaT > this.minDeltaT) {\r\n                    this.deltaT -= this.minDeltaT;\r\n                }\r\n            }\r\n            if (this.curPlayTime > this.curAnimatinDurationTime) {\r\n                if (this.curAnimationTimes < 0 || // 循环播放\r\n                    this.curAnimationTimes > 1 && this._curPlayTimes < this.curAnimationTimes - 1) { // 非最后一次播放\r\n                    this.curPlayTime = this.curPlayTime % this.curAnimatinDurationTime;\r\n                }\r\n            }\r\n            this.setCurTime(this.curPlayTime);\r\n\r\n            this.lastTime = this.curTime;\r\n            this.passedTime = this.curTime - this.startTime;\r\n\r\n            if (this.curAnimationTimes > 0 && \r\n                this.passedTime > this.curAnimationTotalTime) {\r\n                this.stop();\r\n            }\r\n            this.curPlayTimes = Math.floor(this.passedTime / this.curAnimatinDurationTime);\r\n            \r\n        }\r\n\r\n        protected setCurTime(curTime: number): void { \r\n            if (this.curAnimationClips) {\r\n                for (let i: number = 0, len: number = this.curAnimationClips.length; i < len; i++) {\r\n                    const clip = this.curAnimationClips[i];\r\n                    clip.curTime = curTime;\r\n                }\r\n            }\r\n        }\r\n\r\n        protected skipNextEvent(): void {\r\n            if (this.curAnimationClips) {\r\n                for (let i: number = 0, len: number = this.curAnimationClips.length; i < len; i++) {\r\n                    const clip = this.curAnimationClips[i];\r\n                    clip.skipNextEvent();\r\n                }\r\n            }\r\n        }\r\n        //  parse\r\n        private parseData(): void {\r\n            if (this.component && this.data) {\r\n                for (let i: number = 0, len: number = this.data.length; i < len; i++) {\r\n                    this.parseAnimation(this.data[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        private parseAnimation(anim: IAnimation): void {\r\n            const name = anim.name;\r\n            const totalTime = anim.duration || 0;\r\n            const loop = anim.loop;\r\n            const autoPlay = anim.autoPlay;\r\n\r\n            const config = {\r\n                loop,\r\n                totalTime,\r\n                autoPlay,\r\n            };\r\n            this.animationConfig[name] = config;\r\n            let duration: number = 0;\r\n            for (const key in anim.children) {\r\n                if (anim.children[key]) {\r\n                    const ac = this.parseAnimationClip( key, name, anim.children[key]);\r\n                    if (ac && ac.totalTime > duration) {\r\n                        duration = ac.totalTime;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!anim.duration || anim.duration <= 0) {\r\n                anim.duration = duration;\r\n                config.totalTime = duration;\r\n            }\r\n        }\r\n\r\n        private parseAnimationClip(componentId: string, animName: string, \r\n                                   subAnimation: ISubAnimation): AnimationClip | undefined {\r\n            const childId = componentId;\r\n            let component: vf.gui.DisplayObject;\r\n            if (childId === TimelineType.EVENT) {\r\n                component = this.component;\r\n            } else {\r\n                component = this.component.getChildById(childId);\r\n            }\r\n            if (component) {\r\n                const animClip = new AnimationClip(animName);\r\n                animClip.name = animName;\r\n                animClip.fps = this.fps;\r\n                animClip.target = component;\r\n                animClip.totalTime = subAnimation.duration || 0;\r\n                animClip.loop = !!subAnimation.loop;\r\n                let duration: number = 0;\r\n                for (let i: number = 0, len: number = subAnimation.timelines.length; i < len; i++) {\r\n                    const timelineData = subAnimation.timelines[i];\r\n                    const timeline = this.parseTimeline(timelineData, subAnimation.duration);\r\n                    if (timeline) {\r\n                        animClip.timelines.push(timeline);\r\n                        if (timeline.totalTime > duration) {\r\n                            duration = timeline.totalTime;\r\n                        }\r\n                    }\r\n                }\r\n                \r\n                if (!animClip.totalTime || animClip.totalTime <= 0) {\r\n                    animClip.totalTime = duration;\r\n                }\r\n                this.addAnimationClip(animClip);\r\n                return animClip;\r\n            }\r\n        }\r\n\r\n        private parseTimeline(data: ITimeline, duration: number = -1): Timeline<any> | undefined {\r\n            let timeline: Timeline<any> | undefined;\r\n\r\n            switch (data.type) {\r\n                case TimelineType.X:\r\n                case TimelineType.Y:\r\n                case TimelineType.SCALE_X:\r\n                case TimelineType.SCALE_Y:\r\n                case TimelineType.ROTATION:\r\n                case TimelineType.SKEW_X:\r\n                case TimelineType.SKEW_Y:\r\n                case TimelineType.ALPHA:\r\n                case TimelineType.PROGRESS:\r\n                case TimelineType.ALPHA:\r\n                case TimelineType.VOLUME:\r\n                case TimelineType.FITERBLUR:   \r\n                    timeline = new Timeline<number>();\r\n                    this.parseFrames(timeline, data.frames, NumberFrame);\r\n                    break;\r\n                case TimelineType.VISIBLE:\r\n                case TimelineType.ENABLED:\r\n                    timeline = new Timeline<boolean>();\r\n                    this.parseFrames(timeline, data.frames, BooleanFrame);\r\n                    break;\r\n                case TimelineType.TEXT:\r\n                case TimelineType.PLAY:\r\n                    timeline = new Timeline<string>();\r\n                    this.parseFrames(timeline, data.frames, StringFrame);\r\n                    break;\r\n                case TimelineType.COLOR:\r\n                    timeline = new Timeline<number>();\r\n                    this.parseFrames(timeline, data.frames, ColorFrame);\r\n                    break;\r\n                case TimelineType.EVENT:\r\n                    timeline = new EventTimeline();\r\n                    this.parseFrames(timeline, data.frames, EventFrame);\r\n                    break;\r\n                case TimelineType.PATH:\r\n                    if(data.path) {\r\n                        timeline = new PathTimeline(data.path);\r\n                        this.parseFrames(timeline, data.frames, NumberFrame);\r\n                    }\r\n                    break;\r\n                default:\r\n                    timeline = new Timeline<number>();\r\n                    this.parseFrames(timeline, data.frames, NumberFrame);\r\n                    break;\r\n            }\r\n            if (timeline) {\r\n                timeline.type = data.type;\r\n                timeline.loop = !!data.loop;\r\n                if (data.frames && data.frames.length) {\r\n                    timeline.totalTime = data.frames[data.frames.length - 1].frame;\r\n                } else {\r\n                    timeline.totalTime = 0;\r\n                }\r\n                \r\n            }\r\n            return timeline;\r\n        }\r\n        private parseFrames(timeline: Timeline<any>, data: IFrame[], frameClass: new () => Frame<any>): void {\r\n            for (let i: number = 0, len: number = data.length; i < len; i++) {\r\n                const frameData = data[i];\r\n                const frame = new frameClass();\r\n                frame.time = frameData.frame;\r\n                frame.curve = frameData.curve;\r\n                frame.value = frameData.value;\r\n                timeline.frames.push(frame);\r\n            }\r\n        }\r\n    }\r\n\r\n","import { Timeline } from './Timeline';\r\nimport { TimelineType, IEventData } from '../model/IVFData';\r\nimport { VFComponent } from '../../display/VFComponent';\r\nimport { EventTimeline } from './EventTimeline';\r\nimport { PathTimeline } from './PathTimeline';\r\n\r\nexport class AnimationClip {\r\n\r\n        private get targetDisplay(): vf.gui.DisplayObject {\r\n            return this.target as vf.gui.DisplayObject;\r\n        }\r\n\r\n        public set curTime(v: number) {\r\n            this._curTime = v;\r\n            this._curFrame = this._curTime * this.fps / 1000;\r\n            if (this.loop) {\r\n                this._curFrame = this._curFrame % this.totalTime;\r\n            }\r\n            for (let i = 0, len = this.timelines.length; i < len; i++) {\r\n                this.timelines[i].globalTime = this._curFrame;\r\n            }\r\n            this.applyTimeline();\r\n        }\r\n\r\n        public name: string;\r\n        public timelines: Array<Timeline<any>> = [];\r\n        public fps: number = 30;\r\n        public target: any;\r\n        public totalTime: number = 0;\r\n        public loop: boolean = false;\r\n        private _curTime: number = 0;\r\n        private _curFrame: number = 0;\r\n        constructor(name: string) {\r\n            this.name = name;\r\n        }\r\n\r\n        public skipNextEvent(): void {\r\n            for (let i = 0, len = this.timelines.length; i < len; i++) {\r\n                const timeline = this.timelines[i];\r\n                if (timeline instanceof EventTimeline) {\r\n                    timeline.skipNextEmit();\r\n                }\r\n            }\r\n        }\r\n        private applyTimeline(): void {\r\n            if (this.target == null) {\r\n                return;\r\n            }\r\n            for (let i: number = 0, len: number = this.timelines.length; i < len; i++) {\r\n                const timeline = this.timelines[i];\r\n                const targetDisplay = this.targetDisplay;\r\n                const curValue = timeline.curValue;\r\n                switch (timeline.type) {\r\n                    case TimelineType.X:\r\n                        targetDisplay.x = curValue;\r\n                        break;\r\n                    case TimelineType.Y:\r\n                        targetDisplay.y = curValue;\r\n                        break;\r\n                    case TimelineType.SCALE_X:\r\n                        targetDisplay.scaleX = curValue;\r\n                        break;\r\n                    case TimelineType.SCALE_Y:\r\n                        targetDisplay.scaleY = curValue;\r\n                        break;\r\n                    case TimelineType.ROTATION:\r\n                        targetDisplay.rotation = curValue;\r\n                        break; \r\n                    case TimelineType.VISIBLE:\r\n                        targetDisplay.visible = curValue;\r\n                        break;\r\n                    case TimelineType.ALPHA:\r\n                        targetDisplay.alpha = curValue;\r\n                        break;\r\n                    case TimelineType.TEXT:\r\n                        (targetDisplay as vf.gui.Label).text = curValue;\r\n                        break;\r\n                    case TimelineType.ENABLED:\r\n                        targetDisplay.enabled = curValue;\r\n                        break;\r\n                    case TimelineType.FITERBLUR:\r\n                        targetDisplay.filterBlur = curValue;\r\n                        break;\r\n                    case TimelineType.EVENT:\r\n                        const events = curValue as IEventData[];\r\n                        if (events) {\r\n                            for (let j: number = 0, jlen: number = events.length; j < jlen; j++) {\r\n                                const event = events[j];\r\n                                (targetDisplay as VFComponent).emit(event.type, event.data);\r\n                            }\r\n                        }\r\n                        break;\r\n                    case TimelineType.PATH:\r\n                        let pos = (timeline as PathTimeline).curPos;\r\n                        targetDisplay.x = pos[0];\r\n                        targetDisplay.y = pos[1];\r\n                        break;\r\n                    default:\r\n                        if (timeline.type.indexOf('filter') === 0) {\r\n                            this.applyFilter(targetDisplay, timeline.type, curValue);\r\n                        } else {\r\n                            (targetDisplay as any)[timeline.type] = curValue;\r\n                        }\r\n                        break;\r\n                    \r\n                }\r\n            }\r\n        }\r\n        private applyFilter(display: vf.gui.DisplayObject, filterKey: string, value: any): void {\r\n            const filterKeys = filterKey.split('.');\r\n            let target = display as any;\r\n            for (let i: number = 0, len: number = filterKeys.length; i < len - 1 ; i++) {\r\n                const curkey = filterKeys[i];\r\n                if (target && target[curkey]) {\r\n                    target = target[curkey];\r\n                }\r\n            }\r\n            if (target) {\r\n                target[filterKeys[filterKeys.length - 1]] = value;\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n","import { Frame } from './Frame';\r\n\r\nexport class BooleanFrame extends Frame<boolean> {\r\n\r\n        constructor() {\r\n            super();\r\n        }\r\n\r\n        public getValue(progress: number, value: boolean): boolean {\r\n            return this.value;\r\n        }\r\n    }\r\n\r\n","import { Frame } from './Frame';\r\n\r\nexport class ColorFrame extends Frame<number> {\r\n\r\n        constructor() {\r\n            super();\r\n        }\r\n\r\n        public getValue(progress: number, value: number): number {\r\n            const rgbData = this.changeColor2RGB(this.value);\r\n            const rgbValue = this.changeColor2RGB(value);\r\n            const resultArr = [\r\n                rgbData[0] + (rgbValue[0] - rgbValue[0]) * progress,\r\n                rgbData[1] + (rgbValue[1] - rgbValue[1]) * progress,\r\n                rgbData[2] + (rgbValue[2] - rgbValue[2]) * progress,\r\n            ];\r\n            return this.changeRGB2Color(resultArr);\r\n        }\r\n\r\n        protected changeColor2RGB(color: number): number[] {\r\n            // tslint:disable-next-line: no-bitwise\r\n            const r = (color >> 16) & 0xFF;\r\n            // tslint:disable-next-line: no-bitwise\r\n            const g = (color >> 8) & 0xFF;\r\n            // tslint:disable-next-line: no-bitwise\r\n            const b = (color >> 0) & 0xFF;\r\n            return [r, g, b];\r\n        }\r\n        protected changeRGB2Color(rgb: number[]): number {\r\n            return rgb[0] * 0x10000 + rgb[1] * 0x100 + rgb[2];\r\n        } \r\n    }\r\n\r\n","import { Frame } from './Frame';\r\nimport { IEventData } from '../model/IVFData';\r\n\r\nexport class EventFrame extends Frame<IEventData[]> {\r\n\r\n        constructor() {\r\n            super();\r\n        }\r\n\r\n        public getValue(progress: number, value: IEventData[]): IEventData[] {\r\n            return this.value;\r\n        }\r\n    }\r\n\r\n","import { Timeline } from './Timeline';\r\nimport { IEventData } from '../model/IVFData';\r\nimport { EventFrame } from './EventFrame';\r\n\r\nexport class EventTimeline extends Timeline<IEventData[]> {\r\n    \r\n    private nextFrame?: EventFrame;\r\n    private nextFrameIndex: number = 0;\r\n    private skipEmit: boolean = false;\r\n    constructor() {\r\n        super();\r\n        this._curValue = [];\r\n    }\r\n\r\n    public skipNextEmit(): void {\r\n        //\r\n        this.lastTime = 0;\r\n        this.nextFrame = undefined;\r\n    }\r\n\r\n    protected getProgress(cur: number, min: number, max: number, curve: number[] | null = null): number {\r\n        return cur;\r\n    }\r\n\r\n    protected updateCurFrame(): void {\r\n        if (this.frames.length === 0) {\r\n            return;\r\n        }\r\n    }\r\n    protected updateCurValue(): void {\r\n        this._curValue.length = 0;\r\n        if (this.frames.length === 0) {\r\n            return;\r\n        }\r\n        if (this.nextFrame === undefined) {\r\n            this.nextFrame = this.frames[0];\r\n            this.nextFrameIndex = 0;\r\n        }\r\n        \r\n        if (this.curTime >= this.lastTime) {\r\n            if (this.curTime > this.nextFrame.time) {\r\n                this.findEvents(this.nextFrameIndex, false);\r\n            }\r\n        } else {\r\n            this.findEvents(0, true);\r\n        }\r\n    }\r\n\r\n    private findEvents(startIndex: number, turnBack: boolean = false): void {\r\n        if (turnBack) {\r\n            for (let i = this.nextFrameIndex, len: number = this.frames.length; i < len; i++) {\r\n                const frame = this.frames[i];\r\n                this.addEvent(frame);\r\n            }\r\n        }\r\n        for (let i = startIndex, len: number = this.frames.length; i < len; i++) {\r\n            const frame = this.frames[i];\r\n            if (frame.time < this.curTime && (turnBack || frame.time >= this.lastTime) ) {\r\n                this.addEvent(frame);\r\n            } else if (frame.time > this.curTime) {\r\n                this.nextFrame = frame;\r\n                this.nextFrameIndex = i;\r\n                break;\r\n            }\r\n            this.nextFrameIndex = Number.MAX_VALUE;\r\n        }\r\n    }\r\n    private addEvent(frame: EventFrame): void {\r\n        if (frame.value) {\r\n            for (let j: number = 0, jlen: number = frame.value.length; j < jlen; j++) {\r\n                this._curValue.push(frame.value[j]);\r\n            }\r\n        }\r\n    }\r\n}\r\n","\r\n    export class Frame<T> {\r\n\r\n        public time: number = -1;\r\n        public curve?: number[] = [];\r\n        public value: T  = null as any;\r\n\r\n        constructor() {\r\n            //\r\n        }\r\n\r\n        public getValue(progress: number, value: T): T {\r\n            return null as any;\r\n        }\r\n    }\r\n\r\n","import { Frame } from './Frame';\r\n\r\nexport class NumberFrame extends Frame<number> {\r\n\r\n        constructor() {\r\n            super();\r\n        }\r\n\r\n        public getValue(progress: number, value: number): number {\r\n            return this.value + (value - this.value) * progress;\r\n        }\r\n    }\r\n","import { Timeline } from './Timeline';\r\nimport { IEventData } from '../model/IVFData';\r\nimport { EventFrame } from './EventFrame';\r\n\r\nexport class PathTimeline extends Timeline<number> {\r\n    \r\n    private path: SVGPathElement;\r\n    private length: number = 0;\r\n    constructor(path: string) {\r\n        super();\r\n        this.path = document.createElementNS('http://www.w3.org/2000/svg','path');\r\n        this.path.setAttribute(\"d\", path); \r\n        this.length = this.path.getTotalLength();\r\n    }\r\n\r\n\r\n    public get curPos(): [number, number] {\r\n        if(this.path) {\r\n            const p = this.path.getPointAtLength(this._curValue * this.length);\r\n            return [p.x, p.y];\r\n        }\r\n        return [0,0]\r\n    }\r\n\r\n    public get angle(): number {\r\n        let p0 = this.path.getPointAtLength(this._curValue * this.length - 1);\r\n        let p1 = this.path.getPointAtLength(this._curValue * this.length + 1);\r\n        return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\r\n    }\r\n\r\n}\r\n","import { Frame } from './Frame';\r\n\r\nexport class StringFrame extends Frame<string> {\r\n\r\n        constructor() {\r\n            super();\r\n        }\r\n\r\n        public getValue(progress: number, value: string): string {\r\n            return this.value;\r\n        }\r\n    }\r\n\r\n","import { TimelineType } from '../model/IVFData';\r\nimport { Frame } from './Frame';\r\nimport { getCurveProgress } from '../../utils/VFUtil';\r\n\r\nexport class Timeline<T> {\r\n\r\n        public set defaultValue(value: T) {\r\n            this._defaultValue = value;\r\n            this._curValue = value;\r\n        }\r\n        public get curValue(): T {\r\n            return this._curValue;\r\n        }\r\n\r\n        public set globalTime(v: number) {\r\n            this._globalTime = v;\r\n            this.tick();\r\n            this._lastGlobalTime = v;\r\n        }\r\n\r\n        public type: TimelineType = null as any;\r\n        public frames: Array<Frame<T>> = [];\r\n        public curTime: number = 0;\r\n        public lastTime: number = 0;\r\n        public loop: boolean = false;\r\n        public totalTime: number = 0;\r\n        protected _defaultValue: T = null as any;\r\n        protected _globalTime: number = 0;\r\n\r\n        protected _lastGlobalTime: number = 0; \r\n        protected _lastFrame: Frame<T> | null = null as any;\r\n        protected _curFrame: Frame<T> | null = null;\r\n        protected _nextFrame: Frame<T> = null as any;\r\n        protected _times: number = -1;\r\n\r\n        protected _curValue: T = null as any;\r\n\r\n        constructor() {\r\n            //\r\n        }\r\n\r\n        protected getProgress(cur: number, min: number, max: number, curve: number[] | null = null): number {\r\n            let lineProgress: number = 0;\r\n            let curveProgress: number = 0;\r\n            if (max === min) {\r\n                lineProgress =  0;\r\n            } else {\r\n                lineProgress =  (cur - min) / (max - min);\r\n            }\r\n            curveProgress = lineProgress;\r\n            if (curve && curve.length) {\r\n                if (curve.length === 1) {\r\n                    const curveType = curve[0];\r\n                    curveProgress = getCurveProgress(curveType, lineProgress);\r\n                }\r\n                // todo bezier\r\n            }\r\n            return curveProgress;\r\n        }\r\n\r\n        protected tick(): void {\r\n            this.curTime = this._globalTime;\r\n            if (this.loop) {\r\n                this._times = Math.floor(this.curTime / this.totalTime);\r\n                this.curTime = this.curTime - this.totalTime * this._times;\r\n            }\r\n            this.updateCurFrame();\r\n            this.updateCurValue();\r\n            this.lastTime = this.curTime;\r\n        }\r\n        protected updateCurFrame(): void {\r\n            if (this.frames.length === 0) {\r\n                return;\r\n            }\r\n            this._lastFrame = this._curFrame;\r\n            let i: number = 0;\r\n            let len: number = 0;\r\n            for (i = 0, len = this.frames.length; i < len; i++) {\r\n                if (this.frames[i].time > this.curTime) {\r\n                    if (i === 0) {\r\n                        this._curFrame = null;\r\n                        this._nextFrame = this.frames[i];\r\n                    } else {\r\n                        this._curFrame = this.frames[i - 1];\r\n                        this._nextFrame = this.frames[i];\r\n                    }\r\n                    return;\r\n                }\r\n            }\r\n            this._curFrame = this.frames[this.frames.length - 1];\r\n            this._nextFrame = this._curFrame;\r\n        }\r\n\r\n        protected updateCurValue(): void {\r\n            if (this._curFrame && this._nextFrame) {\r\n                const p = this.getProgress(this.curTime, this._curFrame.time, \r\n                                           this._nextFrame.time, this._curFrame.curve);\r\n\r\n                this._curValue = this._curFrame.getValue(p, this._nextFrame.value);\r\n            }\r\n        }\r\n    }\r\n\r\n","\r\nexport interface IVFDataV1 {\r\n    name: string;\r\n    version: string;\r\n    width: number;\r\n    height: number;\r\n    fps: number;\r\n    scaleMode: ScaleMode;\r\n    loadMode: LoadMode;\r\n    baseUrl: string;\r\n    conversion: string;\r\n    global?: { [id: string]: IVariableData };\r\n    assets: { [id: string]: IAsset };\r\n    components: { [id: string]: AllComponent };\r\n    scenes: IScene[];\r\n}\r\n\r\nexport const enum ScaleMode {\r\n    SHOW_ALL = 'showAll',\r\n    NO_SCALE = 'noScale',\r\n    COVER = 'cover',\r\n    CONTAIN = 'contain',\r\n}\r\nexport const enum LoadMode {\r\n    SINGLE = 'single',\r\n    ALL = 'all',\r\n}\r\n\r\nexport const enum VariableType {\r\n    NUMBER = 'number',\r\n    STRING = 'string',\r\n    BOOLEAN = 'boolean',\r\n    ARRAY = 'array',\r\n    OBJECT = 'object',\r\n}\r\n// tslint:disable-next-line: array-type\r\nexport type VariableDataValue = number | string | boolean | Array<any> | any;\r\nexport interface IVariableData {\r\n    id?: string;\r\n    type: VariableType;\r\n    value: VariableDataValue;\r\n}\r\n\r\nexport interface CDN{\r\n    default:string[];\r\n    image:string[];\r\n    media:string[];\r\n    wx:string[];\r\n}\r\n\r\nexport const enum AssetType {\r\n    IMAGE = 'image',\r\n    SOUND = 'sound',\r\n    SHEET = 'sheet',\r\n    SVG = 'svg',\r\n    FONT = 'font',\r\n    AUDIO = 'audio',\r\n    VIDEO = 'video',\r\n    JS = 'js',\r\n}\r\nexport interface IAsset {\r\n    id?: string;\r\n    name?: string;\r\n    type: AssetType;\r\n    url: string;\r\n}\r\n/**\r\n * 加载失败项\r\n */\r\nexport interface IAssetFail {\r\n    id: string;\r\n    url: string;\r\n    extension:string;\r\n    count:number;\r\n}\r\n\r\n/**\r\n * 其他类型查阅 https://vipkid-edu.github.io/vf-gui/play/#example/TestLabel 控件\r\n */\r\nexport const enum ComponentType {\r\n    // CUSTOM\r\n    Custom = 'custom',\r\n}\r\nexport interface IComponent {\r\n    id: string;\r\n    name: string;\r\n    type?: ComponentType;\r\n    resourceIds?: number[];\r\n    libId?: number;\r\n    interactabled?: any;\r\n}\r\nexport interface IDisplayComponent extends IComponent {\r\n    x: number;\r\n    y: number;\r\n    scaleX: number;\r\n    scaleY: number;\r\n    alpha: number;\r\n    color: number | undefined;\r\n    visible: boolean;\r\n\r\n    rotation: any;\r\n    width: number;\r\n    height: number;\r\n\r\n}\r\n\r\nexport interface IImage extends vf.gui.Image {\r\n\r\n}\r\nexport interface IText extends vf.gui.Label {\r\n\r\n}\r\nexport interface IRadio extends vf.gui.CheckBox {\r\n\r\n}\r\nexport interface IRect extends vf.gui.Rect {\r\n\r\n}\r\nexport interface IAnimation {\r\n    name: string;\r\n    duration?: number;\r\n    autoPlay?: boolean;\r\n    loop?: boolean;\r\n    children: { [id: string]: ISubAnimation };\r\n}\r\nexport interface ISubAnimation {\r\n    duration?: number;\r\n    loop?: boolean;\r\n    timelines: ITimeline[];\r\n}\r\nexport interface ITimeline {\r\n    type: TimelineType;\r\n    loop?: boolean;\r\n    frames: IFrame[];\r\n    path?: string;\r\n}\r\nexport interface IEventData {\r\n    type: string;\r\n    data?: any;\r\n}\r\nexport const enum TimelineType {\r\n    X = 'x',\r\n    Y = 'y',\r\n    SCALE_X = 'scaleX',\r\n    SCALE_Y = 'scaleY',\r\n    ROTATION = 'rotation',\r\n    COLOR = 'color',\r\n    ALPHA = 'alpha',\r\n    VISIBLE = 'visible',\r\n    TEXT = 'text',\r\n    PROGRESS = 'progress',\r\n    SKEW_X = 'skewX',\r\n    SKEW_Y = 'skewY',\r\n    PLAY = 'play',\r\n    VOLUME = 'volume',\r\n    ENABLED = 'enabled',\r\n    FITERBLUR = 'filterBlur',\r\n    EVENT = 'event',\r\n    PATH = 'path',\r\n}\r\nexport const enum CurveType {\r\n    None,\r\n    Linear,\r\n    EaseOutQuad,\r\n    EaseInQuad,\r\n    EaseInOutQuad,\r\n    EaseInCubic,\r\n    EaseOutCubic,\r\n    EaseInOutCubic,\r\n    EaseInQuart,\r\n    EaseOutQuart,\r\n    EaseInOutQuart,\r\n    EaseInQuint,\r\n    EaseOutQuint,\r\n    EaseInOutQuint,\r\n    EaseInSine,\r\n    EaseOutSine,\r\n    EaseInOutSine,\r\n    EaseInExpo,\r\n    EaseOutExpo,\r\n    EaseInOutExpo,\r\n    EaseInCirc,\r\n    EaseOutCirc,\r\n    EaseInOutCirc,\r\n    EaseOutBounce,\r\n    EaseInBack,\r\n    EaseOutBack,\r\n    EaseInOutBack,\r\n    Elastic,\r\n    EaseOutElastic,\r\n    EaseOutElasticTmp,\r\n    SwingFromTo,\r\n    SwingFrom,\r\n    SwingTo,\r\n    Bounce,\r\n    BouncePast,\r\n    EaseFromTo,\r\n    EaseFrom,\r\n    EaseTo,\r\n    Sinusoidal,\r\n    Reverse,\r\n    Wobble,\r\n    Spring,\r\n}\r\nexport interface IFrame {\r\n    frame: number;\r\n    value: any;\r\n    curve?: number[];\r\n}\r\n\r\nexport interface ICustomComponent extends IDisplayComponent {\r\n    children?: AllComponent[];\r\n    animations?: IAnimation[];\r\n    props?: { [id: string]: IVariableData };\r\n    actionList?: AllAction[] | string;\r\n    style?: any;\r\n}\r\n\r\nexport const enum TransitionType {\r\n    NONE = 'none',\r\n    FADE_OUT = 'fadeOut',\r\n    CIRCLE_WIPE = 'circleWipe',\r\n    CROSS_ZOOM = 'crossZoom',\r\n    DOOM_SCREEN = 'doomScreen',\r\n    HEART_WIPE = 'heartWipe',\r\n    LINEAR_BLUR = 'linearBlur',\r\n    PAGE_CURL = 'pageCurl',\r\n    TO_TEAR = 'toTear',\r\n    WIND = 'wind',\r\n    PAGE_FLIP_RIGHT = 'pageFlipRight',\r\n    PAGE_FLIP_LEFT = 'pageFlipLeft',\r\n}\r\nexport interface ITransitionData {\r\n    type: TransitionType;\r\n    duration: number;\r\n}\r\nexport interface IScene {\r\n    id: string;\r\n    libId: string;\r\n    transition?: ITransitionData;\r\n    assets?: string[];\r\n}\r\n\r\nexport type AllComponent = (IComponent | IDisplayComponent | ICustomComponent |\r\n    IRadio | IImage | IText | IRect);\r\n\r\n/// actionList ////////////////////////////////\r\n\r\nexport enum ExpressItemType {\r\n    CONST,     // 常量\r\n    VARIABLE,  // 变量\r\n    RANDOM,    // 随机值\r\n    STSTEN,    // 系统数值\r\n    PROPERTY,  // 组件属性\r\n    OPERATION, // 运算符\r\n    ARRAY_LEN,     // 数组长度\r\n    ARRAY_VALUE,   // 数组取值\r\n    OBJECT_VALUE,  // 对象取值\r\n    PARAM_VALUE,   // 参数取值\r\n    ARRAY_FUNCTION, // 数组 pop push shift unshift concat splice\r\n    COMPONENT, // 组件，仅在trace中使用\r\n}\r\nexport enum SystemValueType {\r\n    TIME,\r\n    YEAR,\r\n    MONTH,\r\n    DAY,\r\n    DATE,\r\n}\r\nexport type ExpressItem = any[];   // 表达式的项\r\nexport type ExpressType = ExpressItem[]; // 表达式\r\n\r\n/** 通用状态 */\r\nexport const enum VFStateCode {\r\n    INIT = 'init',\r\n    LOAD = 'load',\r\n    LOADED = 'loaded',\r\n    READY = 'ready',\r\n    DISABLED = 'disabled'\r\n}\r\n\r\nexport const enum ActionType {\r\n        Print,\r\n        Add,\r\n        Added,\r\n        Remove,\r\n        SetProperty,\r\n        Click,\r\n        Express,\r\n        IfGroup,\r\n        If,\r\n        ElseIf,\r\n        Else,\r\n        DefineFunction,\r\n        CallFunction,\r\n        AddEventListener,\r\n        RemoveEventListener,\r\n        EmitEvent,\r\n        PlaySound,\r\n        PlayAnimation,\r\n        JumpToNextScene,\r\n        JumpToPrevScene,\r\n        JumpToScene,\r\n        ArrayInit,\r\n        ArrayPop,\r\n        ArrayPush,\r\n        ArraySplice,\r\n        ArrayRandom,\r\n        ArrayConcat,\r\n        ArrayShift,\r\n        ArrayUnshift,\r\n        AddEventListenerCall,\r\n        CallProtoFunction,\r\n        GotoPlay,\r\n        GotoStop,\r\n        PauseSound,\r\n        ResumeSound,\r\n        Comment,\r\n        ActionList,\r\n        DefineVariable,\r\n        For,\r\n        Break,\r\n        Wait,\r\n        SetTimeout,\r\n        SetInterval,\r\n        EnterFrame,\r\n    }\r\nexport const enum ComponentEvent {\r\n    Add = 'Add',\r\n    Added = 'Added',\r\n    Remove = 'Remove',\r\n    Removed = 'Removed',\r\n    Click = 'click',\r\n}\r\n\r\nexport const enum SceneEvent {\r\n    TransitionStart = 'TransitionStart',\r\n    TransitionEnd = 'TransitionEnd',\r\n    LoadProgress = 'LoadProgress',\r\n    LoadComplete = 'LoadComplete',\r\n    SceneLoad = 'SceneLoad',\r\n    ScenComplete = 'ScenComplete',\r\n}\r\nexport const enum AnimationEvent {\r\n    AnimationComplete = 'AnimationComplete',\r\n    AnimationLoopComplete = 'AnimationLoopComplete',\r\n}\r\n\r\nexport const enum AnimationStatus {\r\n    STOP,\r\n    PLAYING,\r\n}\r\n\r\n\r\nexport interface IActionSetProperty extends IAction {\r\n        property: string;\r\n        value: any;\r\n    }\r\nexport interface IActionPlayAnimation extends IAction {\r\n        name: string | ExpressItem;\r\n        times?: number;\r\n    }\r\nexport interface IActionExpress extends IAction {\r\n        express: ExpressType;\r\n    }\r\nexport interface IActionIFPart extends IAction {\r\n        condition: ExpressType;\r\n    }\r\nexport interface IActionFunction extends IAction {\r\n        name: string;\r\n    }\r\nexport interface IActionAddEventListener extends IAction {\r\n        event: string;\r\n        system?: boolean;\r\n        global?: boolean;\r\n        funName?: string;\r\n    }\r\nexport interface IActionEmitEvent extends IAction {\r\n        event: string;\r\n        system?: boolean;\r\n        global?: boolean;\r\n        eventData?: any;\r\n    }\r\nexport interface IActionJump extends IAction {\r\n        transition?: ITransitionData;\r\n    }\r\nexport interface IActionArraySplice extends IAction {\r\n        start: number;\r\n        deleteCount: number;\r\n    }\r\nexport interface IActionArrayConcat extends IAction {\r\n        concatArr: ExpressItem;\r\n    }\r\nexport interface IActionCallFunction extends IAction {\r\n        name: string | ExpressItem;\r\n        params?: ExpressItem[];\r\n    }\r\nexport interface IActionSound extends IAction {\r\n        assetId: number | string | any[];\r\n        trackId: string;\r\n        time?: number;\r\n        offset?: number;\r\n        length?: number;\r\n        mode?: 'sound' | 'effect';\r\n    }\r\nexport interface IActionGoto extends IAction {\r\n        name: string | ExpressItem;\r\n        frame: number| ExpressItem;\r\n        times?: number | ExpressItem;\r\n    }\r\nexport interface IActionDefineVariable extends IAction {\r\n        variableType: VariableType;\r\n        varId: string;\r\n    }\r\nexport interface IActionFor extends IAction {\r\n        forin: ExpressItem;\r\n    }\r\nexport type AllAction = (IAction | IActionSetProperty | IActionExpress | IActionFunction\r\n    | IActionAddEventListener | IActionPlayAnimation);\r\n\r\nexport interface IAction {\r\n    type: ActionType;\r\n    execute?: AllAction[];\r\n    target?: string[];\r\n    value?: any;\r\n}\r\n\r\nexport interface IActionSetProperty extends IAction {\r\n    property: string;\r\n    value: any;\r\n}\r\nexport interface IActionPlayAnimation extends IAction {\r\n    name: string | ExpressItem;\r\n    times?: number;\r\n}\r\nexport interface IActionExpress extends IAction {\r\n    express: ExpressType;\r\n}\r\nexport interface IActionIFPart extends IAction {\r\n    condition: ExpressType;\r\n}\r\nexport interface IActionFunction extends IAction {\r\n    name: string;\r\n}\r\nexport interface IActionAddEventListener extends IAction {\r\n    event: string;\r\n    system?: boolean;\r\n    global?: boolean;\r\n    funName?: string;\r\n}\r\nexport interface IActionEmitEvent extends IAction {\r\n    event: string;\r\n    system?: boolean;\r\n    global?: boolean;\r\n    eventData?: any;\r\n}\r\nexport interface IActionJump extends IAction {\r\n    transition?: ITransitionData;\r\n}\r\nexport interface IActionArraySplice extends IAction {\r\n    start: number;\r\n    deleteCount: number;\r\n}\r\nexport interface IActionArrayConcat extends IAction {\r\n    concatArr: ExpressItem;\r\n}\r\nexport interface IActionCallFunction extends IAction {\r\n    name: string | ExpressItem;\r\n    params?: ExpressItem[];\r\n}\r\nexport interface IActionGoto extends IAction {\r\n    name: string | ExpressItem;\r\n    frame: number | ExpressItem;\r\n    times?: number | ExpressItem;\r\n}\r\nexport interface IActionDefineVariable extends IAction {\r\n    variableType: VariableType;\r\n    varId: string;\r\n}\r\nexport interface IActionInterval extends IAction {\r\n    times?: number | ExpressItem;\r\n}\r\n\r\n","/* eslint-disable no-unused-vars */\r\nimport {VFStage} from '../../display/VFStage';\r\nimport { ITransitionData, TransitionType, SceneEvent } from '../model/IVFData';\r\nimport { ITransition } from './ITransition';\r\nimport { CrossFadeFilter } from './filters/CrossFadeFilter';\r\nimport { CircleFadeFilter } from './filters/CircleFadeFilter';\r\nimport { CrossZoomFilter } from './filters/CrossZoomFilter';\r\nimport { DoomScreenFilter } from './filters/DoomScreenFilter';\r\nimport { HeartWipeFilter } from './filters/HeartWipeFilter';\r\nimport { LinearBlurFilter } from './filters/LinearBlurFilter';\r\nimport { PageCurlFilter } from './filters/PageCurlFilter';\r\nimport { ToTearFilter } from './filters/ToTearFilter';\r\nimport { WindFilter } from './filters/WindFilter';\r\nimport { PageFlipLeftFilter } from './filters/PageFlipLeftFilter';\r\nimport { PageFlipRightFilter } from './filters/PageFlipRightFilter';\r\nimport { FadeoutTran } from './trans/FadeoutTran';\r\nimport trace from '../../utils/Trace';\r\nimport { EventType } from '../../event/EventType';\r\nimport { EventLevel } from '../../event/EventLevel';\r\n\r\nexport class Transition {\r\n\r\n    private vfStage: VFStage;\r\n    private prevTexture: vf.RenderTexture;\r\n    private data: ITransitionData;\r\n    constructor(vfStage: VFStage, prevTexture: vf.RenderTexture, data: ITransitionData) {\r\n        this.vfStage = vfStage;\r\n        this.prevTexture = prevTexture;\r\n        this.data = data;\r\n    }\r\n\r\n    public run(): void {\r\n        const transition = this.getTransition(this.data.type);\r\n        if (transition) {\r\n            const systemEvent = this.vfStage.systemEvent;\r\n            transition.setPreviousTexture(this.prevTexture);\r\n            transition.progress = 0;\r\n            transition.applyTranisition(this.vfStage.container);\r\n            const tween = vf.gui.Tween.to(transition, { progress: 1 }, this.data.duration);\r\n\r\n            tween.once(vf.gui.Tween.Event.complete, () => {\r\n                transition.dispose();\r\n                systemEvent.emit(EventType.STATUS, {\r\n                    code: SceneEvent.TransitionEnd, level: EventLevel.STATUS, data: null,\r\n                });\r\n            });\r\n            tween.start();\r\n            systemEvent.emit(EventType.STATUS, {\r\n                code: SceneEvent.TransitionStart, level: EventLevel.STATUS, data: null,\r\n            });\r\n        }\r\n    }\r\n\r\n    private getTransition(type: TransitionType): ITransition | null {\r\n        if (this.vfStage && (\r\n            this.vfStage.scaleX !== 1 || this.vfStage.scaleY !== 1 ||\r\n            !(this.vfStage.app?.renderer.context as any).webGLVersion)) {\r\n            return new FadeoutTran();\r\n        }\r\n        switch (type) {\r\n            case TransitionType.NONE:\r\n                return null;\r\n            case TransitionType.FADE_OUT:\r\n                return new CrossFadeFilter();\r\n            case TransitionType.CIRCLE_WIPE:\r\n                return new CircleFadeFilter();\r\n            case TransitionType.CROSS_ZOOM:\r\n                return new CrossZoomFilter();\r\n            case TransitionType.DOOM_SCREEN:\r\n                return new DoomScreenFilter();\r\n            case TransitionType.HEART_WIPE:\r\n                return new HeartWipeFilter();\r\n            case TransitionType.LINEAR_BLUR:\r\n                return new LinearBlurFilter();\r\n            case TransitionType.PAGE_CURL:\r\n                return new PageCurlFilter();\r\n            case TransitionType.TO_TEAR:\r\n                return new ToTearFilter();\r\n            case TransitionType.WIND:\r\n                return new WindFilter();\r\n            case TransitionType.PAGE_FLIP_LEFT:\r\n                return new PageFlipLeftFilter();\r\n            case TransitionType.PAGE_FLIP_RIGHT:\r\n                return new PageFlipRightFilter();\r\n            default:\r\n                return null;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\n","import { ITransition } from '../ITransition';\r\n\r\n\r\nexport interface AbstractFilterUniforms {\r\n        filterMatrix: vf.Matrix;\r\n        resolution: number;\r\n        previousTexture: vf.RenderTexture;\r\n        progress: number;\r\n    }\r\n\r\nexport class AbstractFilter extends vf.Filter implements ITransition {\r\n\r\n        public static readonly vertexSrc: string = `\r\n            precision highp float;\r\n            \r\n            attribute vec2 aVertexPosition;\r\n            attribute vec2 aTextureCoord;\r\n            attribute vec4 aColor;\r\n            \r\n            uniform mat3 projectionMatrix;\r\n            uniform mat3 filterMatrix;\r\n            uniform vec4 inputSize;\r\n            uniform vec4 outputFrame;\r\n            uniform float resolution;\r\n            \r\n            varying vec2 vTextureCoord;\r\n            varying vec2 vFilterCoord;\r\n            \r\n            void main(void){\r\n                gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n                // filterMatrix.xy = ((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw;\r\n                vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy / resolution;\r\n                // vFilterCoord = (((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw) * aTextureCoord / resolution;\r\n                vTextureCoord = aTextureCoord ;\r\n            }\r\n        `;\r\n\r\n        private static readonly crossFadeUniforms = {\r\n            filterMatrix: vf.Matrix.TEMP_MATRIX,\r\n            resolution: vf.settings.RESOLUTION,\r\n            previousTexture:  null,\r\n            progress: 0.0,\r\n        };\r\n\r\n        private target?: vf.DisplayObject;\r\n\r\n        constructor(vertexSrc?: string, fragmentSrc?: string, uniforms?: any) {\r\n            super(\r\n                vertexSrc   || AbstractFilter.vertexSrc,\r\n                fragmentSrc,\r\n                uniforms    || AbstractFilter.crossFadeUniforms,\r\n            );\r\n        }\r\n\r\n        public apply(filterManager: vf.systems.FilterSystem, input: vf.RenderTexture, output: vf.RenderTexture) {\r\n            const maskMatrix = new vf.Matrix();\r\n            (filterManager as any).calculateNormalizedScreenSpaceMatrix(maskMatrix);\r\n            this.uniforms.filterMatrix = maskMatrix;\r\n            this.uniforms.resolution = vf.settings.RESOLUTION;\r\n            // super.apply(filterManager, input, output, false); // 这样写ipad下会报错\r\n            filterManager.applyFilter(this, input, output, undefined || false);\r\n        }\r\n\r\n        public setPreviousTexture(value: any): void {\r\n            this.uniforms.previousTexture = value;\r\n        }\r\n        \r\n        public set progress(value: number) {\r\n            value = Math.min(1, value);\r\n            value = Math.max(0, value);\r\n            this.uniforms.progress = value;\r\n        }\r\n        public get progress(): number {\r\n            return this.uniforms.progress;\r\n        }\r\n\r\n        public applyTranisition(target: vf.DisplayObject): void {\r\n            this.target = target;\r\n            this.target.filters = [this];\r\n        }\r\n        public dispose(): void {\r\n            if (this.target) {\r\n                this.target.filters = [];\r\n            }\r\n        }\r\n    }\r\n\r\n","import { AbstractFilter } from './AbstractFilter';\r\n\r\nexport class CircleFadeFilter extends AbstractFilter {\r\n\r\n        private static readonly fragmentSrc: string = `\r\n            precision mediump float;\r\n            uniform sampler2D uSampler;\r\n            uniform sampler2D previousTexture;\r\n            uniform float progress;\r\n\r\n            uniform highp vec4 inputSize;\r\n            uniform highp vec4 outputFrame;\r\n\r\n            varying vec2 vFilterCoord;\r\n            varying vec2 vTextureCoord;\r\n\r\n            void main()\r\n            {\r\n                float m = outputFrame.z / 2000.0;\r\n                float t = inputSize.y / inputSize.x;\r\n                vec2 circle = vFilterCoord - 0.5;\r\n                circle.y = circle.y * t;\r\n                float d = length(circle);\r\n                float p2 = progress * progress;\r\n                if(d > p2) {\r\n                    gl_FragColor = texture2D(previousTexture, vFilterCoord);\r\n                } else {\r\n                    gl_FragColor = texture2D(uSampler, vTextureCoord);\r\n                }\r\n                gl_FragColor = vec4(m, 0.0, 0.0, 1.0);\r\n            }\r\n        `;\r\n\r\n        constructor() {\r\n            super('', CircleFadeFilter.fragmentSrc);\r\n        }\r\n    }\r\n\r\n","import { AbstractFilter } from './AbstractFilter';\r\n\r\nexport class CrossFadeFilter extends AbstractFilter {\r\n\r\n        private static readonly fragmentSrc: string = `\r\n            precision mediump float;\r\n            uniform sampler2D uSampler;\r\n            uniform sampler2D previousTexture;\r\n            uniform float progress;\r\n            varying vec2 vFilterCoord;\r\n            varying vec2 vTextureCoord;\r\n            void main()\r\n            {\r\n                vec4 col = texture2D(previousTexture, vFilterCoord);\r\n                vec4 col2 = texture2D(uSampler, vTextureCoord);\r\n                gl_FragColor = vec4(mix(col, col2, progress));\r\n            }\r\n        `;\r\n\r\n        constructor() {\r\n            super('', CrossFadeFilter.fragmentSrc);\r\n        }\r\n    }\r\n\r\n","import { AbstractFilter } from './AbstractFilter';\r\n\r\n\r\nexport interface CrossZoomFilterUniforms {\r\n        filterMatrix: vf.Matrix;\r\n        resolution: number;\r\n        previousTexture: vf.RenderTexture;\r\n        progress: number;\r\n        strength: number;\r\n    }\r\n\r\nexport class CrossZoomFilter extends AbstractFilter {\r\n\r\n        private static readonly linearBlurUniforms = {\r\n            filterMatrix:    vf.Matrix.TEMP_MATRIX,\r\n            resolution:      vf.settings.RESOLUTION,\r\n            previousTexture: null,\r\n            progress:        0.0,\r\n            strength:        0.4,\r\n        };\r\n\r\n        private static readonly fragmentSrc: string = `\r\n            #ifdef GL_ES\r\n            precision highp float;\r\n            #endif\r\n            uniform sampler2D uSampler;\r\n            uniform sampler2D previousTexture;\r\n            uniform float progress;\r\n            uniform float resolution;\r\n            uniform float strength;\r\n            \r\n            varying vec2 vTextureCoord;\r\n            varying vec2 vFilterCoord;\r\n            \r\n            const float PI = 3.141592653589793;\r\n            \r\n            float Linear_ease(in float begin, in float change, in float duration, in float time) {\r\n                return change * time / duration + begin;\r\n            }\r\n            \r\n            float Exponential_easeInOut(in float begin, in float change, in float duration, in float time) {\r\n                if (time == 0.0)\r\n                    return begin;\r\n                else if (time == duration)\r\n                    return begin + change;\r\n                time = time / (duration / 2.0);\r\n                if (time < 1.0)\r\n                    return change / 2.0 * pow(2.0, 10.0 * (time - 1.0)) + begin;\r\n                return change / 2.0 * (-pow(2.0, -10.0 * (time - 1.0)) + 2.0) + begin;\r\n            }\r\n            \r\n            float Sinusoidal_easeInOut(in float begin, in float change, in float duration, in float time) {\r\n                return -change / 2.0 * (cos(PI * time / duration) - 1.0) + begin;\r\n            }\r\n            \r\n            float random(in vec3 scale, in float seed) {\r\n                return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\r\n            }\r\n            \r\n            vec3 crossFade(in vec2 uv1, in vec2 uv2, in float dissolve) {\r\n                return mix(texture2D(previousTexture, uv1).rgb, texture2D(uSampler, uv2).rgb, dissolve);\r\n            }\r\n            \r\n            void main() {\r\n            \r\n                vec2 center = vec2(Linear_ease(0.25, 0.5, 1.0, progress), 0.5);\r\n                float dissolve = Exponential_easeInOut(0.0, 1.0, 1.0, progress);\r\n            \r\n                float strength = Sinusoidal_easeInOut(0.0, strength, 0.5, progress);\r\n                \r\n                vec3 color = vec3(0.0);\r\n                float total = 0.0;\r\n                vec2 toCenter = center - vTextureCoord;\r\n        \r\n                float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\r\n            \r\n                for (float t = 0.0; t <= 40.0; t++) {\r\n                    float percent = (t + offset) / 40.0;\r\n                    float weight = 4.0 * (percent - percent * percent);\r\n                    vec2 p = toCenter * percent * strength;\r\n                    color += crossFade(vFilterCoord + p, vTextureCoord + p, dissolve) * weight;\r\n                    total += weight;\r\n                }\r\n                gl_FragColor = vec4(color / total, 1.0);\r\n            }\r\n        `;\r\n\r\n        constructor() {\r\n            super(AbstractFilter.vertexSrc, CrossZoomFilter.fragmentSrc, CrossZoomFilter.linearBlurUniforms);\r\n        }\r\n    }\r\n\r\n","/* eslint-disable no-unused-vars */\r\nimport { ITransition } from '../ITransition';\r\nimport { AbstractFilter } from './AbstractFilter';\r\n\r\n\r\nexport interface DoomScreenFilterUniforms {\r\n        resolution: number;\r\n        previousTexture: vf.RenderTexture;\r\n        progress: number;\r\n        barWidth: number;\r\n        amplitude: number;\r\n        noise: number;\r\n        frequency: number;\r\n    }\r\n\r\nexport class DoomScreenFilter extends vf.Filter implements ITransition {\r\n\r\n        private static readonly linearblurUniforms = {\r\n            resolution:      vf.settings.RESOLUTION,\r\n            previousTexture: null,\r\n            progress:        0.0,\r\n            barWidth:        10,\r\n            amplitude:       2.0,\r\n            noise:           0.1,\r\n            frequency:       1.0,\r\n        };\r\n\r\n        private static readonly fragmentSrc: string = `\r\n            #ifdef GL_ES\r\n            precision highp float;\r\n            #endif\r\n            \r\n            uniform sampler2D uSampler;\r\n            uniform sampler2D previousTexture;\r\n            uniform float progress;\r\n            uniform float resolution;\r\n            \r\n            uniform int barWidth;\r\n            uniform float amplitude;\r\n            uniform float noise;\r\n            uniform float frequency;\r\n            \r\n            varying vec2 vTextureCoord;\r\n            varying vec2 vFilterCoord;\r\n            \r\n            float rand(int num) {\r\n                return fract(mod(float(num) * 67123.313, 12.0) * sin(float(num) * 10.3) * cos(float(num)));\r\n            }\r\n            \r\n            float wave(int num) {\r\n                float fn = float(num) * frequency * 0.1  * float(barWidth);\r\n                return cos(fn * 0.5) * cos(fn * 0.13) * sin((fn+10.0) * 0.3) / 2.0 + 0.5;\r\n            }\r\n            \r\n            float pos(int num) {\r\n                return noise == 0.0 ? wave(num) : mix(wave(num), rand(num), noise);\r\n            }\r\n            \r\n            void main() {\r\n                int bar = int(vFilterCoord.x) / barWidth;\r\n                float scale = 1.0 + pos(bar) * amplitude;\r\n                float phase = progress * scale;\r\n                float posY = vFilterCoord.y / resolution;\r\n                vec2 p;\r\n                vec4 c;\r\n                if (phase + posY < 1.0) {\r\n                    p = vec2(vFilterCoord.x, vFilterCoord.y + mix(0.0, resolution, phase)) / resolution;\r\n                    c = texture2D(previousTexture, p);\r\n                } else {\r\n                    p = vTextureCoord.xy / resolution;\r\n                    c = texture2D(uSampler, p);\r\n                }\r\n                gl_FragColor = c;\r\n            }\r\n        `;\r\n\r\n        private target?: vf.DisplayObject;\r\n        constructor() {\r\n            super(AbstractFilter.vertexSrc, DoomScreenFilter.fragmentSrc, DoomScreenFilter.linearblurUniforms);\r\n            this.padding = 0;\r\n        }\r\n\r\n        /**\r\n         * @param {vf.FilterManager} filterManager\r\n         * @param {vf.RenderTarget} input\r\n         * @param {vf.RenderTarget} output\r\n         * @override\r\n         */\r\n        public apply(filterManager: vf.systems.FilterSystem, input: vf.RenderTexture, output: vf.RenderTexture) {\r\n            const maskMatrix = new vf.Matrix();\r\n            // filterManager.calculateNormalizedScreenSpaceMatrix(maskMatrix);\r\n            this.uniforms.filterMatrix = maskMatrix;\r\n            this.uniforms.resolution = vf.settings.RESOLUTION;\r\n            super.apply(filterManager, input, output, (vf as any).CLEAR_MODES.NO);\r\n        }\r\n\r\n        /**\r\n         * 设置前置纹理\r\n         * @param value\r\n         */\r\n        public setPreviousTexture(value: any): void {\r\n            this.uniforms.previousTexture = value;\r\n        }\r\n\r\n        /**\r\n         * 设置变化进度\r\n         * @param {number} value\r\n         */\r\n        public setProgress(value: number): void {\r\n            value = Math.min(1, value);\r\n            value = Math.max(0, value);\r\n            this.uniforms.progress = value;\r\n        }\r\n        public set progress(value: number) {\r\n            value = Math.min(1, value);\r\n            value = Math.max(0, value);\r\n            this.uniforms.progress = value;\r\n        }\r\n        public get progress(): number {\r\n            return this.uniforms.progress;\r\n        }\r\n\r\n        public applyTranisition(target: vf.DisplayObject): void {\r\n            this.target = target;\r\n            this.target.filters = [this];\r\n        }\r\n        public dispose(): void {\r\n            if (this.target) {\r\n                this.target.filters = [];\r\n            }\r\n        }\r\n}\r\n    \r\n\r\n","import { AbstractFilter } from './AbstractFilter';\r\n\r\n\r\nexport interface HeartWipeFilterUniforms {\r\n        filterMatrix: vf.Matrix;\r\n        resolution: number;\r\n        previousTexture: vf.RenderTexture;\r\n        progress: number;\r\n        strength: number;\r\n    }\r\n\r\nexport class HeartWipeFilter extends AbstractFilter {\r\n\r\n        private static readonly linearBlurUniforms = {\r\n            filterMatrix:    vf.Matrix.TEMP_MATRIX,\r\n            resolution:      vf.settings.RESOLUTION,\r\n            previousTexture: null,\r\n            progress:        0.0,\r\n        };\r\n\r\n        private static readonly fragmentSrc: string = `\r\n            #ifdef GL_ES\r\n            precision highp float;\r\n            #endif\r\n            \r\n            uniform sampler2D uSampler;\r\n            uniform sampler2D previousTexture;\r\n            uniform float progress;\r\n            uniform float resolution;\r\n            \r\n            varying vec2 vTextureCoord;\r\n            varying vec2 vFilterCoord;\r\n            \r\n            bool inHeart (vec2 p, vec2 center, float size) {\r\n                if (size == 0.0) return false;\r\n                vec2 o = (p-center)/(1.6*size);\r\n                return pow(o.x*o.x+o.y*o.y-0.3, 3.0) < o.x*o.x*pow(o.y, 3.0);\r\n            }\r\n            \r\n            void main() {\r\n                vec2 p1 = vFilterCoord.xy / resolution;\r\n                vec2 p2 = vTextureCoord.xy / resolution;\r\n                float m = inHeart(p1, vec2(0.5, 0.4), progress) ? 1.0 : 0.0;\r\n                gl_FragColor = mix(texture2D(previousTexture, p1), texture2D(uSampler, p2), m);\r\n            }\r\n        `;\r\n\r\n        constructor() {\r\n            super(AbstractFilter.vertexSrc, HeartWipeFilter.fragmentSrc, HeartWipeFilter.linearBlurUniforms);\r\n        }\r\n    }\r\n\r\n","import { AbstractFilter } from './AbstractFilter';\r\n\r\n\r\nexport interface LinearBlurFilterUniforms {\r\n        filterMatrix: vf.Matrix;\r\n        resolution: number;\r\n        previousTexture: vf.RenderTexture;\r\n        progress: number;\r\n        intensity: number;\r\n    }\r\n\r\nexport class LinearBlurFilter extends AbstractFilter {\r\n\r\n        private static readonly linearBlurUniforms = {\r\n            filterMatrix:    vf.Matrix.TEMP_MATRIX,\r\n            resolution:      vf.settings.RESOLUTION,\r\n            previousTexture: null,\r\n            progress:        0.0,\r\n            intensity:       0.1,\r\n        };\r\n\r\n        private static readonly fragmentSrc: string = `\r\n            #ifdef GL_ES\r\n            precision highp float;\r\n            #endif\r\n            \r\n            uniform sampler2D uSampler;\r\n            uniform sampler2D previousTexture;\r\n            uniform float progress;\r\n            uniform float resolution;\r\n            uniform float intensity;\r\n            \r\n            varying vec2 vTextureCoord;\r\n            varying vec2 vFilterCoord;\r\n            \r\n            const int PASSES = 8;\r\n            \r\n            void main() {\r\n                vec2 p1 = vFilterCoord.xy;\r\n                vec2 p2 = vTextureCoord.xy;\r\n                vec4 c1 = vec4(0.0), c2 = vec4(0.0);\r\n                float disp = intensity*(0.5-distance(0.5, progress));\r\n                for (int xi=0; xi<PASSES; ++xi) {\r\n                        float x = float(xi) / float(PASSES) - 0.5;\r\n                    for (int yi=0; yi<PASSES; ++yi) {\r\n                        float y = float(yi) / float(PASSES) - 0.5;\r\n                        vec2 v = vec2(x,y);\r\n                        float d = disp;\r\n                        c1 += texture2D(previousTexture, p1 + d*v);\r\n                        c2 += texture2D(uSampler, p2 + d*v);\r\n                    }\r\n                }\r\n                c1 /= float(PASSES*PASSES);\r\n                c2 /= float(PASSES*PASSES);\r\n                gl_FragColor = mix(c1, c2, progress);\r\n            }\r\n        `;\r\n\r\n        constructor() {\r\n            super(AbstractFilter.vertexSrc, LinearBlurFilter.fragmentSrc, LinearBlurFilter.linearBlurUniforms);\r\n        }\r\n    }\r\n\r\n","import { AbstractFilter } from './AbstractFilter';\r\n\r\n\r\nexport interface PageCurlFilterUniforms {\r\n        filterMatrix: vf.Matrix;\r\n        resolution: number;\r\n        previousTexture: vf.RenderTexture;\r\n        progress: number;\r\n    }\r\n\r\nexport class PageCurlFilter extends AbstractFilter {\r\n\r\n        private static readonly linearBlurUniforms = {\r\n            filterMatrix:    vf.Matrix.TEMP_MATRIX,\r\n            resolution:      vf.settings.RESOLUTION,\r\n            previousTexture: null,\r\n            progress:        0.0,\r\n        };\r\n\r\n        private static readonly fragmentSrc: string = `\r\n            #ifdef GL_ES\r\n            precision highp float;\r\n            #endif\r\n            \r\n            uniform sampler2D uSampler;\r\n            uniform sampler2D previousTexture;\r\n            uniform float progress;\r\n            uniform float resolution;\r\n            \r\n            varying vec2 vTextureCoord;\r\n            varying vec2 vFilterCoord;\r\n            \r\n            const float MIN_AMOUNT = -0.16;\r\n            const float MAX_AMOUNT = 1.3;\r\n            float amount = progress * (MAX_AMOUNT - MIN_AMOUNT) + MIN_AMOUNT;\r\n            \r\n            const float PI = 3.141592653589793;\r\n            \r\n            const float scale = 512.0;\r\n            const float sharpness = 3.0;\r\n            \r\n            float cylinderCenter = amount;\r\n            float cylinderAngle = 2.0 * PI * amount;\r\n            \r\n            const float cylinderRadius = 1.0 / PI / 2.0;\r\n            \r\n            vec3 hitPoint(float hitAngle, float yc, vec3 point, mat3 rrotation)\r\n            {\r\n                float hitPoint = hitAngle / (2.0 * PI);\r\n                point.y = hitPoint;\r\n                return rrotation * point;\r\n            }\r\n            \r\n            vec4 antiAlias(vec4 color1, vec4 color2, float distanc)\r\n            {\r\n                distanc *= scale;\r\n                if (distanc < 0.0) return color2;\r\n                if (distanc > 2.0) return color1;\r\n                float dd = pow(1.0 - distanc / 2.0, sharpness);\r\n                return ((color2 - color1) * dd) + color1;\r\n            }\r\n            \r\n            float distanceToEdge(vec3 point)\r\n            {\r\n                float dx = abs(point.x > 0.5 ? 1.0 - point.x : point.x);\r\n                float dy = abs(point.y > 0.5 ? 1.0 - point.y : point.y);\r\n                if (point.x < 0.0) dx = -point.x;\r\n                if (point.x > 1.0) dx = point.x - 1.0;\r\n                if (point.y < 0.0) dy = -point.y;\r\n                if (point.y > 1.0) dy = point.y - 1.0;\r\n                if ((point.x < 0.0 || point.x > 1.0) && (point.y < 0.0 || point.y > 1.0)) {\r\n                    return sqrt(dx * dx + dy * dy);\r\n                }\r\n                return min(dx, dy);\r\n            }\r\n            \r\n            vec4 seeThrough(float yc, vec2 p, mat3 rotation, mat3 rrotation)\r\n            {\r\n                float hitAngle = PI - (acos(yc / cylinderRadius) - cylinderAngle);\r\n                vec3 point = hitPoint(hitAngle, yc, rotation * vec3(p, 1.0), rrotation);\r\n                if (yc <= 0.0 && (point.x < 0.0 || point.y < 0.0 || point.x > 1.0 || point.y > 1.0))\r\n                {\r\n                    return texture2D(uSampler, vTextureCoord);\r\n                }\r\n            \r\n                if (yc > 0.0) return texture2D(previousTexture, p);\r\n            \r\n                vec4 color = texture2D(previousTexture, point.xy);\r\n                vec4 tcolor = vec4(0.0);\r\n            \r\n                return antiAlias(color, tcolor, distanceToEdge(point));\r\n            }\r\n            \r\n            vec4 seeThroughWithShadow(float yc, vec2 p, vec3 point, mat3 rotation, mat3 rrotation)\r\n            {\r\n                float shadow = distanceToEdge(point) * 30.0;\r\n                shadow = (1.0 - shadow) / 3.0;\r\n            \r\n                if (shadow < 0.0) shadow = 0.0; else shadow *= amount;\r\n            \r\n                vec4 shadowColor = seeThrough(yc, p, rotation, rrotation);\r\n                shadowColor.r -= shadow;\r\n                shadowColor.g -= shadow;\r\n                shadowColor.b -= shadow;\r\n            \r\n                return shadowColor;\r\n            }\r\n            \r\n            vec4 backside(float yc, vec3 point)\r\n            {\r\n                vec4 color = texture2D(previousTexture, point.xy);\r\n                float gray = (color.r + color.b + color.g) / 15.0;\r\n                gray += (8.0 / 10.0) * (pow(1.0 - abs(yc / cylinderRadius), 2.0 / 10.0) / 2.0 + (5.0 / 10.0));\r\n                color.rgb = vec3(gray);\r\n                return color;\r\n            }\r\n            \r\n            vec4 behindSurface(float yc, vec3 point, mat3 rrotation)\r\n            {\r\n                float shado = (1.0 - ((-cylinderRadius - yc) / amount * 7.0)) / 6.0;\r\n                shado *= 1.0 - abs(point.x - 0.5);\r\n            \r\n                yc = (-cylinderRadius - cylinderRadius - yc);\r\n            \r\n                float hitAngle = (acos(yc / cylinderRadius) + cylinderAngle) - PI;\r\n                point = hitPoint(hitAngle, yc, point, rrotation);\r\n            \r\n                if (yc < 0.0 && point.x >= 0.0 && point.y >= 0.0 && \r\n                    point.x <= 1.0 && point.y <= 1.0 && (hitAngle < PI || amount > 0.5))\r\n                {\r\n                    shado = 1.0 - (sqrt(pow(point.x - 0.5, 2.0) + pow(point.y - 0.5, 2.0)) / (71.0 / 100.0));\r\n                    shado *= pow(-yc / cylinderRadius, 3.0);\r\n                    shado *= 0.5;\r\n                }\r\n                else\r\n                {\r\n                    shado = 0.0;\r\n                }\r\n                return vec4(texture2D(uSampler, vTextureCoord).rgb - shado, 1.0);\r\n            }\r\n            \r\n            void main()\r\n            {\r\n                const float angle = 30.0 * PI / 180.0;\r\n                float c = cos(-angle);\r\n                float s = sin(-angle);\r\n            \r\n                mat3 rotation = mat3( c, s, 0, -s, c, 0, 0.12, 0.258, 1);\r\n                c = cos(angle);\r\n                s = sin(angle);\r\n            \r\n                mat3 rrotation = mat3(\tc, s, 0, -s, c, 0, 0.15, -0.5, 1);\r\n            \r\n                vec3 point = rotation * vec3(vFilterCoord, 1.0);\r\n            \r\n                float yc = point.y - cylinderCenter;\r\n            \r\n                if (yc < -cylinderRadius)\r\n                {\r\n                    gl_FragColor = behindSurface(yc, point, rrotation);\r\n                    return;\r\n                }\r\n            \r\n                if (yc > cylinderRadius)\r\n                {\r\n                    gl_FragColor = texture2D(previousTexture, vFilterCoord);\r\n                    return;\r\n                }\r\n            \r\n                float hitAngle = (acos(yc / cylinderRadius) + cylinderAngle) - PI;\r\n            \r\n                float hitAngleMod = mod(hitAngle, 2.0 * PI);\r\n                if ((hitAngleMod > PI && amount < 0.5) || (hitAngleMod > PI/2.0 && amount < 0.0))\r\n                {\r\n                    gl_FragColor = seeThrough(yc, vFilterCoord, rotation, rrotation);\r\n                    return;\r\n                }\r\n            \r\n                point = hitPoint(hitAngle, yc, point, rrotation);\r\n            \r\n                if (point.x < 0.0 || point.y < 0.0 || point.x > 1.0 || point.y > 1.0)\r\n                {\r\n                    gl_FragColor = seeThroughWithShadow(yc, vFilterCoord, point, rotation, rrotation);\r\n                    return;\r\n                }\r\n            \r\n                vec4 color = backside(yc, point);\r\n            \r\n                vec4 otherColor;\r\n                if (yc < 0.0)\r\n                {\r\n                    float shado = 1.0 - (sqrt(pow(point.x - 0.5, 2.0) + pow(point.y - 0.5, 2.0)) / 0.71);\r\n                    shado *= pow(-yc / cylinderRadius, 3.0);\r\n                    shado *= 0.5;\r\n                    otherColor = vec4(0.0, 0.0, 0.0, shado);\r\n                }\r\n                else\r\n                {\r\n                    otherColor = texture2D(previousTexture, vFilterCoord);\r\n                }\r\n            \r\n                color = antiAlias(color, otherColor, cylinderRadius - abs(yc));\r\n            \r\n                vec4 cl = seeThroughWithShadow(yc, vFilterCoord, point, rotation, rrotation);\r\n                float dist = distanceToEdge(point);\r\n            \r\n                gl_FragColor = antiAlias(color, cl, dist);\r\n            }\r\n        `;\r\n\r\n        constructor() {\r\n            super(AbstractFilter.vertexSrc, PageCurlFilter.fragmentSrc, PageCurlFilter.linearBlurUniforms);\r\n        }\r\n    }\r\n\r\n","import { AbstractFilter } from './AbstractFilter';\r\n\r\n\r\nexport interface PageFlipFilterUniforms {\r\n        filterMatrix: vf.Matrix;\r\n        resolution: number;\r\n        previousTexture: vf.RenderTexture;\r\n        progress: number;\r\n    }\r\n\r\nexport class PageFlipLeftFilter extends AbstractFilter {\r\n\r\n        private static readonly uniforms = {\r\n            filterMatrix:    vf.Matrix.TEMP_MATRIX,\r\n            resolution:      vf.settings.RESOLUTION,\r\n            previousTexture: null,\r\n            progress:        0.0,\r\n        };\r\n\r\n        private static readonly fragmentSrc: string = `\r\n            #ifdef GL_ES\r\n            precision highp float;\r\n            #endif\r\n            \r\n            uniform sampler2D uSampler;\r\n            uniform sampler2D previousTexture;\r\n            uniform float progress;\r\n            uniform float resolution;\r\n            \r\n            varying vec2 vTextureCoord;\r\n            varying vec2 vFilterCoord;\r\n            \r\n            const float PI = 3.141592653589793;\r\n            const float MIN_ANGLE = PI / 4.0;\r\n            const float MAX_ANGLE = PI / 2.0;\r\n            const float MIN_X = 0.5;\r\n            const float MAX_X = 0.95;\r\n            const float sharpness = 3.0;\r\n            const float scale = 512.0;\r\n            // float easeProgress = ( pow((progress - 1.0), 3.0) + 1.0 );\r\n            // float easeProgress = (progress == 1.0) ? 1.0 : -pow(2.0, -10.0 * progress) + 1.0;\r\n            float p = progress > 0.99 ? 0.99 : progress;\r\n            float easeProgress =  sqrt(1.0 - pow((p - 1.0), 2.0));\r\n            float curX = (1.0 - easeProgress) * (MAX_X - MIN_X) + MIN_X;\r\n            float angle = (easeProgress) * (MAX_ANGLE - MIN_ANGLE) + MIN_ANGLE;\r\n                     \r\n            float distanceToLine(vec2 point)\r\n            {\r\n                vec2 p0 = vec2(1.0-curX, 1.0);\r\n                vec2 p1 = vec2(0.0, -(1.0 - curX) * tan(angle) + 1.0);\r\n                float a = p1.y - p0.y;\r\n                float b = p0.x - p1.x;\r\n                float c = p1.x * p0.y - p0.x * p1.y;\r\n                return abs(a * point.x + b * point.y + c) / sqrt(a * a + b * b);\r\n            }\r\n\r\n            vec4 antiAlias(vec4 color1, vec4 color2, float distanc)\r\n            {\r\n                distanc *= scale;\r\n                if (distanc < 0.0) return color2;\r\n                if (distanc > 2.0) return color1;\r\n                float dd = pow(1.0 - distanc / 2.0, sharpness);\r\n                return ((color2 - color1) * dd) + color1;\r\n            }\r\n\r\n            vec2 getMirro(vec2 point ) \r\n            {\r\n                vec2 p0 = vec2(1.0-curX, 1.0);\r\n                vec2 p1 = vec2(0.0, -(1.0 - curX) * tan(angle) + 1.0);\r\n                float a = p1.y - p0.y;\r\n                float b = p0.x - p1.x;\r\n                float c = p1.x * p0.y - p0.x * p1.y;\r\n                float k = -2.0 * (a * point.x + b * point.y + c) / (a * a + b * b);\r\n                vec2 p2 = vec2(point.x + k * a, point.y + k * b);\r\n                return p2;\r\n            }\r\n\r\n            vec4 curPageBack(vec2 point)\r\n            {\r\n                vec2 mirror = getMirro(point);\r\n                vec4 color = texture2D(uSampler, vec2(1.0 - mirror.x, mirror.y));\r\n                return color;\r\n            }\r\n\r\n            vec4 curPage(vec2 point)\r\n            {\r\n                vec4 color = texture2D(previousTexture, point.xy);\r\n                return color;\r\n            }\r\n            vec4 nextPage(vec2 point)\r\n            {\r\n                vec4 color = texture2D(uSampler, point);\r\n                float d = distanceToLine(point);\r\n                vec4 shadow = vec4(1.0, 0.0, 0.0, d);\r\n                if(d < 0.02) {\r\n                    float c = (0.1 - (0.02 - d)) * (10.0 + progress * 1.5);\r\n                    return vec4(color.r * c, color.g * c, color.b * c, 1.0);\r\n                };\r\n                return color;\r\n            }\r\n            bool isNextPage(vec2 point) \r\n            {\r\n                vec2 p0 = vec2(1.0-curX, 1.0);\r\n                vec2 p1 = vec2(0.0, -(1.0 - curX) * tan(angle) + 1.0);\r\n                vec2 p2 = vec2(point.x - p0.x, point.y - p0.y);\r\n                vec2 p3 = vec2(point.x - p1.x, point.y - p1.y);\r\n                return p2.x * p3.y - p3.x * p2.y < 0.0;\r\n            }\r\n            bool isCurPageBack(vec2 point)\r\n            {\r\n                vec2 p0 = vec2(1.0-curX, 1.0);\r\n                vec2 p1 = vec2(0.0, -(1.0 - curX) * tan(angle) + 1.0);\r\n                float a = p1.y - p0.y;\r\n                float b = p0.x - p1.x;\r\n                float c = p1.x * p0.y - p0.x * p1.y;\r\n                float k = -2.0 * (a * point.x + b * point.y + c) / (a * a + b * b);\r\n                vec2 p2 = vec2(point.x + k * a, point.y + k * b);\r\n                return p2.x > 0.0 && p2.x < 1.0 && p2.y > 0.0 && p2.y < 1.0;\r\n            }\r\n            \r\n            void main()\r\n            {\r\n            \r\n                vec4 color = vec4(1.0, 0.0, 0.0, 1.0);\r\n                if (isNextPage(vTextureCoord)) {\r\n                    color = nextPage(vTextureCoord);\r\n                } else if (isCurPageBack(vTextureCoord)) {\r\n                    color = curPageBack(vTextureCoord);\r\n                } else {\r\n                    color = curPage(vTextureCoord);\r\n                }\r\n                gl_FragColor = color;\r\n            }\r\n        `;\r\n\r\n        constructor() {\r\n            super(AbstractFilter.vertexSrc, PageFlipLeftFilter.fragmentSrc, PageFlipLeftFilter.uniforms);\r\n        }\r\n    }\r\n\r\n","import { AbstractFilter } from './AbstractFilter';\r\n\r\n\r\nexport interface PageFlipRightFilterUniforms {\r\n        filterMatrix: vf.Matrix;\r\n        resolution: number;\r\n        previousTexture: vf.RenderTexture;\r\n        progress: number;\r\n    }\r\n\r\nexport class PageFlipRightFilter extends AbstractFilter {\r\n\r\n        private static readonly uniforms = {\r\n            filterMatrix:    vf.Matrix.TEMP_MATRIX,\r\n            resolution:      vf.settings.RESOLUTION,\r\n            previousTexture: null,\r\n            progress:        0.0,\r\n        };\r\n\r\n        private static readonly fragmentSrc: string = `\r\n            #ifdef GL_ES\r\n            precision highp float;\r\n            #endif\r\n            \r\n            uniform sampler2D uSampler;\r\n            uniform sampler2D previousTexture;\r\n            uniform float progress;\r\n            uniform float resolution;\r\n            \r\n            varying vec2 vTextureCoord;\r\n            varying vec2 vFilterCoord;\r\n            \r\n            const float PI = 3.141592653589793;\r\n            const float MIN_ANGLE = PI / 4.0;\r\n            const float MAX_ANGLE = PI / 2.0;\r\n            const float MIN_X = 0.5;\r\n            const float MAX_X = 0.95;\r\n            const float sharpness = 3.0;\r\n            const float scale = 512.0;\r\n\r\n            // float easeProgress = ( pow((progress - 1.0), 3.0) + 1.0 );\r\n            // float easeProgress = (progress == 1.0) ? 1.0 : -pow(2.0, -10.0 * progress) + 1.0;\r\n            float p = progress > 0.99 ? 0.99 : progress;\r\n            float easeProgress =  sqrt(1.0 - pow((p - 1.0), 2.0));\r\n            float curX = (1.0 - easeProgress) * (MAX_X - MIN_X) + MIN_X;\r\n            float angle = (easeProgress) * (MAX_ANGLE - MIN_ANGLE) + MIN_ANGLE;\r\n                     \r\n            float distanceToLine(vec2 point)\r\n            {\r\n                vec2 p0 = vec2(curX, 1.0);\r\n                vec2 p1 = vec2(1.0, -(1.0 - curX) * tan(angle) + 1.0);\r\n                float a = p1.y - p0.y;\r\n                float b = p0.x - p1.x;\r\n                float c = p1.x * p0.y - p0.x * p1.y;\r\n                return abs(a * point.x + b * point.y + c) / sqrt(a * a + b * b);\r\n            }\r\n\r\n            vec4 antiAlias(vec4 color1, vec4 color2, float distanc)\r\n            {\r\n                distanc *= scale;\r\n                if (distanc < 0.0) return color2;\r\n                if (distanc > 2.0) return color1;\r\n                float dd = pow(1.0 - distanc / 2.0, sharpness);\r\n                return ((color2 - color1) * dd) + color1;\r\n            }\r\n\r\n            vec2 getMirro(vec2 point ) \r\n            {\r\n                vec2 p0 = vec2(curX, 1.0);\r\n                vec2 p1 = vec2(1.0, -(1.0 - curX) * tan(angle) + 1.0);\r\n                float a = p1.y - p0.y;\r\n                float b = p0.x - p1.x;\r\n                float c = p1.x * p0.y - p0.x * p1.y;\r\n                float k = -2.0 * (a * point.x + b * point.y + c) / (a * a + b * b);\r\n                vec2 p2 = vec2(point.x + k * a, point.y + k * b);\r\n                return p2;\r\n            }\r\n\r\n            vec4 curPageBack(vec2 point)\r\n            {\r\n                vec2 mirror = getMirro(point);\r\n                vec4 color = texture2D(uSampler, vec2(1.0 - mirror.x, mirror.y));\r\n                return color;\r\n            }\r\n\r\n            vec4 curPage(vec2 point)\r\n            {\r\n                vec4 color = texture2D(previousTexture, point);\r\n                float d = distanceToLine(point);\r\n                vec4 shadow = vec4(1.0, 0.0, 0.0, 1.0);\r\n                // return shadow;\r\n                // if(d < 0.2) {\r\n                //     float c = (0.1 - (0.02 - d)) * (10.0 + progress * 1.5);\r\n                //     return vec4(color.r * c, color.g * c, color.b * c, 1.0);\r\n                // };\r\n                return color;\r\n            }\r\n            vec4 nextPage(vec2 point)\r\n            {\r\n                vec4 color = texture2D(uSampler, point);\r\n                float d = distanceToLine(point);\r\n                vec4 shadow = vec4(1.0, 0.0, 0.0, d);\r\n                if(d < 0.02) {\r\n                    float c = (0.1 - (0.02 - d)) * (10.0 + progress * 1.5);\r\n                    return vec4(color.r * c, color.g * c, color.b * c, 1.0);\r\n                };\r\n                return color;\r\n            }\r\n            bool isNextPage(vec2 point) \r\n            {\r\n                vec2 p0 = vec2(curX, 1.0);\r\n                vec2 p1 = vec2(1.0, -(1.0 - curX) * tan(angle) + 1.0);\r\n                vec2 p2 = vec2(point.x - p0.x, point.y - p0.y);\r\n                vec2 p3 = vec2(point.x - p1.x, point.y - p1.y);\r\n                return p2.x * p3.y - p3.x * p2.y > 0.0;\r\n            }\r\n            bool isCurPageBack(vec2 point)\r\n            {\r\n                vec2 p0 = vec2(curX, 1.0);\r\n                vec2 p1 = vec2(1.0, -(1.0 - curX) * tan(angle) + 1.0);\r\n                float a = p1.y - p0.y;\r\n                float b = p0.x - p1.x;\r\n                float c = p1.x * p0.y - p0.x * p1.y;\r\n                float k = -2.0 * (a * point.x + b * point.y + c) / (a * a + b * b);\r\n                vec2 p2 = vec2(point.x + k * a, point.y + k * b);\r\n                return p2.x > 0.0 && p2.x < 1.0 && p2.y > 0.0 && p2.y < 1.0;\r\n            }\r\n            \r\n            \r\n            void main()\r\n            {\r\n            \r\n                vec4 color = vec4(1.0, 0.0, 0.0, 1.0);\r\n                if (isNextPage(vTextureCoord)) {\r\n                    color = nextPage(vTextureCoord);\r\n                } else if (isCurPageBack(vTextureCoord)) {\r\n                    color = curPageBack(vTextureCoord);\r\n                } else {\r\n                    color = curPage(vTextureCoord);\r\n                }\r\n                gl_FragColor = color;\r\n            }\r\n        `;\r\n\r\n        constructor() {\r\n            super(AbstractFilter.vertexSrc, PageFlipRightFilter.fragmentSrc, PageFlipRightFilter.uniforms);\r\n        }\r\n    }\r\n\r\n","import { AbstractFilter } from './AbstractFilter';\r\n\r\nexport class ToTearFilter extends AbstractFilter {\r\n\r\n        private static readonly fragmentSrc: string = `\r\n            precision highp float;\r\n            varying vec2 vTextureCoord;\r\n            varying vec2 vFilterCoord;\r\n            uniform sampler2D uSampler;\r\n            uniform sampler2D previousTexture;\r\n            uniform float progress;\r\n            \r\n            void main() {\r\n                vec4 displacement1 = texture2D( previousTexture, vTextureCoord);\r\n                vec4 displacement2 = texture2D( uSampler, vFilterCoord);\r\n                vec4 displacement = mix(displacement1, displacement2, vec4(progress));\r\n                vec2 mixTexture = mix(displacement.xy, vTextureCoord.xy, vec2(progress));\r\n                vec2 testPos1 = mixTexture + (1.0 - progress) * displacement.xy * 0.5;\r\n                vec2 testPos = mix(testPos1, vec2(1.0), vec2(1.0 - progress));\r\n                vec2 distUv = vec2(testPos.x, vTextureCoord.y);\r\n                vec4 color = texture2D(uSampler, distUv);\r\n                vec4 color1 = texture2D(previousTexture, distUv);\r\n                gl_FragColor = vec4(mix(color, vec4(vec3(color1), 0.0), 0.18));\r\n            }\r\n        `;\r\n\r\n        constructor() {\r\n            super('', ToTearFilter.fragmentSrc);\r\n            this.padding = 0;\r\n        }\r\n    }\r\n\r\n","import { AbstractFilter } from './AbstractFilter';\r\n\r\n\r\nexport interface WindFilterUniforms {\r\n        filterMatrix: vf.Matrix;\r\n        resolution: number;\r\n        previousTexture: vf.RenderTexture;\r\n        progress: number;\r\n        size: number;\r\n    }\r\n\r\nexport class WindFilter extends AbstractFilter {\r\n\r\n        private static readonly linearBlurUniforms = {\r\n            filterMatrix:    vf.Matrix.TEMP_MATRIX,\r\n            resolution:      vf.settings.RESOLUTION,\r\n            previousTexture: null,\r\n            progress:        0.0,\r\n            size:            0.2,\r\n        };\r\n\r\n        private static readonly fragmentSrc: string = `\r\n            #ifdef GL_ES\r\n            precision highp float;\r\n            #endif\r\n            \r\n            uniform sampler2D uSampler;\r\n            uniform sampler2D previousTexture;\r\n            uniform float progress;\r\n            uniform float resolution;\r\n            uniform float size;\r\n            \r\n            varying vec2 vTextureCoord;\r\n            varying vec2 vFilterCoord;\r\n            \r\n            float rand (vec2 co) {\r\n                return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\r\n            }\r\n            \r\n            void main() {\r\n                float r = rand(vec2(0, vTextureCoord.y));\r\n                float m = smoothstep(0.0, -size, vTextureCoord.x*(1.0-size) + size*r - (progress * (1.0 + size)));\r\n                gl_FragColor = mix(texture2D(previousTexture, vFilterCoord), texture2D(uSampler, vTextureCoord), m);\r\n            }\r\n        `;\r\n\r\n        constructor() {\r\n            super(AbstractFilter.vertexSrc, WindFilter.fragmentSrc, WindFilter.linearBlurUniforms);\r\n        }\r\n    }\r\n\r\n","import { ITransition } from '../ITransition';\r\n\r\nexport class FadeoutTran implements ITransition {\r\n\r\n    private prevTexture?: vf.RenderTexture;\r\n    private target?: vf.DisplayObject;\r\n    private prevSprite?: vf.Sprite;\r\n    private _progress: number = 0;\r\n\r\n    public set progress(v: number) {\r\n        this._progress = v;\r\n        if (this.prevSprite) {\r\n            this.prevSprite.alpha = (1 - this._progress);\r\n        }\r\n    }\r\n    public get progress(): number {\r\n        return this._progress;\r\n    }\r\n    public setPreviousTexture(value: any): void {\r\n        this.prevTexture = value;\r\n        if (this.prevTexture) {\r\n            this.prevSprite = vf.Sprite.from(this.prevTexture);\r\n        }\r\n    }\r\n    public applyTranisition(target: vf.DisplayObject): void {\r\n        this.target = target;\r\n        if (this.target && this.target.parent && this.prevSprite) {\r\n            this.prevSprite.x = this.target.x;\r\n            this.prevSprite.y = this.target.y;\r\n            this.target.parent.addChild(this.prevSprite);\r\n        }\r\n    }\r\n    public dispose(): void {\r\n        if (this.prevSprite && this.prevSprite.parent) {\r\n            this.prevSprite.parent.removeChild(this.prevSprite);\r\n            this.prevTexture?.destroy();\r\n            this.prevTexture = undefined;\r\n            this.prevSprite = undefined;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { IVFDataV1, IScene, IAsset, AssetType, LoadMode } from '../core/model/IVFData';\r\n\r\n/**\r\n * 获取场景数据\r\n * @param data 需要处理的完整json数据\r\n * @param id 不传id,获取第一个场景数据\r\n */\r\nexport function getSceneData(data: IVFDataV1, id?: string): IScene | undefined {\r\n    const scenes = data.scenes;\r\n\r\n    if (scenes) {\r\n        if ((id === undefined || id === '') && scenes[0]) {\r\n            return scenes[0];\r\n        }\r\n        id = id?.toString();\r\n        for (let i = 0, len = scenes.length; i < len; i++) {\r\n            if (scenes[i].id.toString() === id) {\r\n                return scenes[i];\r\n            }\r\n        }\r\n    }\r\n\r\n    return undefined;\r\n}\r\n\r\n/**\r\n * 根据索引获取场景数据\r\n * @param data 需要处理的完整json数据\r\n * @param index 索引号\r\n */\r\nexport function getSceneDataByIndex(data: IVFDataV1, index: number): IScene | undefined {\r\n    const scenes = data.scenes;\r\n\r\n    if (scenes && scenes[index]) {\r\n        return scenes[index];\r\n    }\r\n\r\n    return undefined;\r\n}\r\n\r\n/**\r\n * 获取下一个场景数据\r\n * @param curId\r\n */\r\nexport function getNextSceneData(data: IVFDataV1, curId?: string): IScene | undefined {\r\n    if (data.scenes && curId) {\r\n        for (let i = 0, len = data.scenes.length; i < len; i++) {\r\n            if (data.scenes[i].id === curId) {\r\n                if (i < len - 1) {\r\n                    return data.scenes[i + 1];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return undefined;\r\n}\r\n/**\r\n * 获取上一个场景数据\r\n * @param curId\r\n */\r\nexport function getPrevSceneData(data: IVFDataV1, curId?: string): IScene | undefined {\r\n    if (data.scenes && curId) {\r\n        for (let i = 0, len = data.scenes.length; i < len; i++) {\r\n            if (data.scenes[i].id === curId) {\r\n                if (i > 0) {\r\n                    return data.scenes[i - 1];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return undefined;\r\n}\r\n/**\r\n * 获取当前场景需要的js库\r\n * @param data json完整数据\r\n * @param cdns cdn路径\r\n */\r\nexport function getSceneJS(data: IVFDataV1): IAsset[] {\r\n    const assets: IAsset[] = [];\r\n\r\n    for (const key in data.assets) {\r\n        const item = data.assets[key];\r\n\r\n        if (item.type === AssetType.JS) {\r\n            if (item.name === undefined) {\r\n                throw new Error(`loader ${item.url} failed, missing name field`);\r\n            }\r\n            assets.push(item);\r\n        }\r\n    }\r\n\r\n    return assets;\r\n}\r\n\r\n/**\r\n * 获取当前场景的资源加载项\r\n * @param data json完整数据\r\n * @param sceneData 场景数据\r\n */\r\nexport function getSceneAssets(data: IVFDataV1, sceneData: IScene): IAsset[] {\r\n    const assets: IAsset[] = [];\r\n\r\n    // 场景是否单独配置加载策略\r\n    if (data.loadMode === LoadMode.ALL || sceneData.assets === undefined) {\r\n        for (const key in data.assets) {\r\n            if (data.assets[key].type !== AssetType.JS) {\r\n                assets.push(data.assets[key]);\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        let item: IAsset;\r\n\r\n        sceneData.assets.forEach((value) => {\r\n            item = data.assets[value];\r\n            if (item && item.type !== AssetType.JS) {\r\n                assets.push(item);\r\n            }\r\n        });\r\n    }\r\n\r\n    return assets;\r\n}\r\n\r\n/**\r\n * 修复资源数据,补充ID\r\n * @param data\r\n */\r\nexport function assetsRepair(data: IVFDataV1): IVFDataV1 {\r\n    let item: IAsset;\r\n\r\n    for (const key in data.assets) {\r\n        item = data.assets[key];\r\n        if (item.id === undefined) {\r\n            item.id = key;\r\n        }\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\n","/* eslint-disable no-unused-vars */\r\nimport { ActionList } from '../core/actionTask/ActionList';\r\nimport { Animation } from '../core/animation/Animation';\r\nimport { VFStage } from './VFStage';\r\nimport { IVariableData, ComponentEvent } from '../core/model/IVFData';\r\nimport { DisplayObjectAbstract } from 'src/core/DisplayObjectAbstract';\r\n\r\nexport class VFComponent extends vf.gui.ScrollingContainer {\r\n\r\n        public static maxHashCode: number = 10000;\r\n        public hashCode: number = ++VFComponent.maxHashCode;\r\n        public actionList: ActionList | undefined;\r\n        public animation: Animation | undefined;\r\n        public libId: string = '0';\r\n        public id: string = '0';\r\n        protected childrenMap: {[id: string]: DisplayObjectAbstract} = {};\r\n\r\n        protected _vfStage: VFStage | undefined;\r\n        protected pauseData?: {animation: string, frame: number, times: number} = undefined;\r\n        constructor() {\r\n            super();\r\n            this.interactabled = false;\r\n        }\r\n\r\n        public set vfStage(stage: VFStage | undefined) {\r\n            this._vfStage = stage; \r\n            for ( const id in this.childrenMap) {\r\n                if (this.childrenMap[id]) {\r\n                    const child = this.childrenMap[id];\r\n                    if (child instanceof VFComponent) {\r\n                        child.vfStage = stage;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        public get vfStage(): VFStage | undefined {\r\n            return this._vfStage;\r\n        }\r\n\r\n        public pause(): void {\r\n\r\n            for ( const id in this.childrenMap) {\r\n                if (this.childrenMap[id]) {\r\n                    const child = this.childrenMap[id];\r\n                    if (child instanceof VFComponent) {\r\n                        child.pause();\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (this.animation) {\r\n                this.pauseData = this.animation.getPauseData();\r\n                this.animation.stop();\r\n            }\r\n            if (this.actionList) {\r\n                this.actionList.pause();\r\n            }\r\n        }\r\n\r\n        public resume(): void {\r\n            for ( const id in this.childrenMap) {\r\n                if (this.childrenMap[id]) {\r\n                    const child = this.childrenMap[id];\r\n                    if (child instanceof VFComponent) {\r\n                        child.resume();\r\n                    }\r\n                }\r\n            }\r\n            if (this.animation) {\r\n                if (this.pauseData) {\r\n                    this.animation.gotoPlay(this.pauseData.animation, this.pauseData.frame, this.pauseData.times);\r\n                    this.pauseData = undefined;\r\n                }\r\n            }\r\n            if (this.actionList) {\r\n                this.actionList.resume();\r\n            }\r\n            \r\n        }\r\n\r\n        public playDefaultAnimation(): void {\r\n            if (this.animation) {\r\n                this.animation.playDefaultAnimation();\r\n            }\r\n        }\r\n        public gotoPlay(name: string, frame: number, times: number = 1): void {\r\n            if (this.animation) {\r\n                this.animation.gotoPlay(name, frame, times);\r\n            }\r\n        }\r\n        public gotoStop(name: string, frame: number): void {\r\n            if (this.animation) {\r\n                this.animation.gotoStop(name, frame);\r\n            }\r\n        }\r\n        public play(name: string, times: number = 1): void {\r\n            if (this.animation) {\r\n                this.animation.play(name, times);\r\n            }\r\n        }\r\n\r\n        public stop(): void {\r\n            if (this.animation) {\r\n                this.animation.stop();\r\n            }\r\n        }\r\n\r\n        public getChildById(id: string): vf.gui.DisplayObject {\r\n            return this.childrenMap[id] as vf.gui.DisplayObject;\r\n        }\r\n\r\n        public getVariable(id: string): IVariableData | undefined {\r\n            if (this._vfStage) {\r\n                const vm = this._vfStage.variableManager;\r\n                const variable = vm.getVariable(this.hashCode.toString(), id);\r\n                return variable;\r\n            }\r\n            return undefined;\r\n        }\r\n\r\n        public getVariableValue(id: string): IVariableData | undefined {\r\n            const variable = this.getVariable(id);\r\n            if (variable) {\r\n                return variable.value;\r\n            }\r\n            return undefined;\r\n        }\r\n\r\n        public setVariableValue(id: string, value: any): void {\r\n            const variable = this.getVariable(id);\r\n            if (variable) {\r\n                variable.value = value;\r\n            }\r\n        }\r\n\r\n        public addChildAt<T extends DisplayObjectAbstract>(item: T, index: number): T {\r\n            // tslint:disable-next-line: no-string-literal\r\n            const cid = (item as any)['id'];\r\n            if (this.childrenMap[cid.toString()]) {\r\n                // throw new Error('duplicate id; ' + cid);\r\n            } else {\r\n                this.childrenMap[cid.toString()] = item;\r\n            }\r\n            if (item instanceof VFComponent) {\r\n                item.vfStage = this.vfStage;\r\n            }\r\n            const child = super.addChildAt(item, index);\r\n            if (item instanceof VFComponent) {\r\n                item.playDefaultAnimation();\r\n            }\r\n            return child as any;\r\n        }\r\n\r\n        public removeChild<T extends DisplayObjectAbstract>(UIObject: T): T {\r\n            // this.vfStage = undefined;\r\n            // tslint:disable-next-line: no-string-literal\r\n            const cid = (UIObject as any)['id'];\r\n            // delete this.childrenMap[cid.toString()];\r\n            return super.removeChild(UIObject);\r\n        }\r\n\r\n        public runAction(): void {\r\n            for ( const id in this.childrenMap) {\r\n                if (this.childrenMap[id]) {\r\n                    const child = this.childrenMap[id];\r\n                    if (child instanceof VFComponent) {\r\n                        child.runAction();\r\n                    }\r\n                }\r\n            }\r\n            if (this.actionList) {\r\n                this.actionList.run();\r\n            }\r\n            this.on(ComponentEvent.Remove, this.onRemoved, this);\r\n        }\r\n\r\n        public emitAddToChildBefore(): void {\r\n            for ( const id in this.childrenMap) {\r\n                if (this.childrenMap[id]) {\r\n                    const child = this.childrenMap[id];\r\n                    if (child instanceof VFComponent) {\r\n                        child.emitAddToChildBefore();\r\n                    }\r\n                }\r\n            }\r\n            this.emit(ComponentEvent.Add, this);\r\n        }\r\n\r\n        public emitAddToChild(): void {\r\n            for ( const id in this.childrenMap) {\r\n                if (this.childrenMap[id]) {\r\n                    const child = this.childrenMap[id];\r\n                    if (child instanceof VFComponent) {\r\n                        child.emitAddToChild();\r\n                    }\r\n                }\r\n            }\r\n            this.emit(ComponentEvent.Added, this);\r\n        }\r\n\r\n        public emitRemoveToChild(): void {\r\n            for ( const id in this.childrenMap) {\r\n                if (this.childrenMap[id]) {\r\n                    const child = this.childrenMap[id];\r\n                    if (child instanceof VFComponent) {\r\n                        child.emitRemoveToChild();\r\n                    }\r\n                }\r\n            }\r\n            this.emit(ComponentEvent.Removed, this);\r\n        }\r\n        public emitRemoveToChildBefore(): void {\r\n            for ( const id in this.childrenMap) {\r\n                if (this.childrenMap[id]) {\r\n                    const child = this.childrenMap[id];\r\n                    if (child instanceof VFComponent) {\r\n                        child.emitRemoveToChildBefore();\r\n                    }\r\n                }\r\n            }\r\n            this.emit(ComponentEvent.Remove, this);\r\n        }\r\n\r\n        public dispose(): void {\r\n            this._vfStage = undefined;\r\n            this.interactabled = false;\r\n            if (this.animation) {\r\n                this.animation.stop();\r\n            }\r\n            \r\n            for ( const id in this.childrenMap) {\r\n                if (this.childrenMap[id]) {\r\n                    const child = this.childrenMap[id];\r\n                    if (child instanceof VFComponent) {\r\n                        child.dispose();\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.releaseAll();\r\n        }\r\n\r\n        private onRemoved(): void {\r\n            if (this.actionList) {\r\n                this.actionList.stop();\r\n            }\r\n            this.off(ComponentEvent.Remove);\r\n        }\r\n        \r\n}\r\n\r\n","import { VFStage } from './VFStage';\r\nimport { ITransitionData } from '../core/model/IVFData';\r\nimport { VFComponent } from './VFComponent';\r\n\r\nexport class VFScene extends vf.gui.Container {\r\n\r\n        public vfStage: VFStage;\r\n        public id: string = '-1';\r\n        public transition: ITransitionData | undefined;\r\n        \r\n        private component: VFComponent = null as any;\r\n\r\n        constructor(vfStage: VFStage) {\r\n            super();\r\n            this.vfStage = vfStage;\r\n        }\r\n\r\n        public pause(): void {\r\n            if (this.component) {\r\n                this.component.pause();\r\n            }\r\n        }\r\n\r\n        public resume(): void {\r\n            if (this.component) {\r\n                this.component.resume();\r\n            }\r\n        }\r\n\r\n        public addComponent(vfComponent: VFComponent): void {\r\n            this.component = vfComponent;\r\n            this.component.vfStage = this.vfStage;\r\n            this.component.runAction();\r\n            this.component.emitAddToChildBefore();\r\n            const child = this.addChild(vfComponent);\r\n            this.component.emitAddToChild();\r\n            this.component.playDefaultAnimation();\r\n        }\r\n\r\n        public removeComponent(): void {\r\n            if (this.component) {\r\n                this.component.emitRemoveToChildBefore();\r\n                const child = this.removeChild(this.component);\r\n                this.component.emitRemoveToChild();\r\n                this.component.stop();\r\n                this.component.vfStage = undefined;\r\n            }\r\n        }\r\n        public dispose(): void {\r\n            if (this.component) {\r\n                this.removeComponent();\r\n                this.component.dispose();\r\n            }\r\n            this.component = null as any;\r\n        }\r\n    }\r\n\r\n","/* eslint-disable max-len */\r\n/* eslint-disable no-new */\r\nimport { ITransitionData, IVFDataV1, SceneEvent } from '../core/model/IVFData';\r\nimport { VariableManager } from '../core/VariableManager';\r\nimport { SoundManager } from '../sound/SoundManager';\r\nimport { VFScene } from './VFScene';\r\nimport { RES } from '../core/RES';\r\nimport { renderTexture, applyTransition } from '../utils/VFUtil';\r\nimport Config from '../core/Config';\r\nimport * as Plugs from './plugs/PlugIndex';\r\nimport { IPlug } from './plugs/IPlug';\r\nimport { EventLevel } from '../event/EventLevel';\r\nimport { EventType } from '../event/EventType';\r\nimport { Player } from '../Player';\r\nimport IEvent from '../event/IEvent';\r\nimport StateEvent from '@player/event/StateEvent';\r\nimport { getSceneData, getSceneAssets, getSceneJS, assetsRepair, getNextSceneData, getPrevSceneData, getSceneDataByIndex } from './SceneDataUtils';\r\n\r\nenum STAGE_STATUS {\r\n    NONE,\r\n    LOADING,\r\n    READY,\r\n    PLAYING,\r\n    PAUSED,\r\n    STOP,\r\n}\r\n\r\n// eslint-disable-next-line no-undef\r\nexport class VFStage extends vf.gui.Stage {\r\n    public readonly data: IVFDataV1;\r\n    public readonly config: Config;\r\n    public readonly player: Player;\r\n    public readonly res: RES;\r\n    public readonly variableManager: VariableManager;\r\n    public readonly soundManager: SoundManager;\r\n    public readonly plugs = new Map<string, IPlug>(); // 插件列表\r\n\r\n    /**\r\n     * 延迟一帧显示，避免坐标0，0\r\n     */\r\n    private _delayedDisplayId: any = -1;\r\n\r\n    private curScene?: VFScene;\r\n    private curSceneId?: string;\r\n    private curSceneTransition?: ITransitionData;\r\n\r\n    private status: STAGE_STATUS = STAGE_STATUS.NONE;\r\n\r\n    constructor(data: IVFDataV1, config: Config, player: Player) {\r\n        super(config.width, config.height, player.app);\r\n        this.data = assetsRepair(data);\r\n        this.config = config;\r\n        this.player = player;\r\n        this.variableManager = new VariableManager();\r\n        this.soundManager = new SoundManager(this);\r\n        new Plugs.PlugIndex();\r\n        const res = this.res = new RES(this);\r\n\r\n        res.on(SceneEvent.LoadComplete, this.loadAssetCompleted, this);\r\n        res.on(SceneEvent.LoadProgress, this.loadProgress, this);\r\n    }\r\n\r\n    /**\r\n     * 获取系统总线\r\n     */\r\n    public get systemEvent(): StateEvent {\r\n        return this.config.systemEvent;\r\n    }\r\n\r\n    /** 获取当前的场景 */\r\n    public getCurScene(): VFScene | undefined {\r\n        return this.curScene;\r\n    }\r\n\r\n    /**\r\n     * 即使没有引用也不要删除这个接口，GUI在调用\r\n     * @param msg\r\n     */\r\n    public inputLog(msg: IEvent): void {\r\n        if (msg.message === undefined) {\r\n            msg.message = '';\r\n        }\r\n        if (msg.target && msg.target.libId) {\r\n            msg.message += `, id = ${msg.target.id} , libId = ${msg.target.libId}`;\r\n        }\r\n        this.player.runtimeLog(msg);\r\n    }\r\n\r\n    public start(): void {\r\n        // 初始化加载界面\r\n        this.status = STAGE_STATUS.LOADING;\r\n\r\n        const data = this.data;\r\n\r\n        const sceneData = getSceneData(data, this.curSceneId);\r\n\r\n        if (sceneData === undefined) {\r\n            throw new Error(`scene does not exist!`);\r\n        }\r\n        this.systemEvent.emit(EventType.STATUS, {\r\n            code: SceneEvent.SceneLoad, level: EventLevel.STATUS, data: [this.curSceneId],\r\n        });\r\n        this.curSceneId = sceneData.id;// 首次加载curSceneId = null.\r\n        this.res.loadData(getSceneAssets(data, sceneData), getSceneJS(data));\r\n    }\r\n\r\n    public pause(): void {\r\n        if (this.curScene) {\r\n            this.status = STAGE_STATUS.PAUSED;\r\n            this.curScene.pause();\r\n            this.soundManager.pause();\r\n        }\r\n    }\r\n    public resume(): void {\r\n        if (this.curScene) {\r\n            this.curScene.resume();\r\n            this.soundManager.resume();\r\n            this.status = STAGE_STATUS.PLAYING;\r\n        }\r\n    }\r\n    public reset(): void {\r\n        if (this.status === STAGE_STATUS.NONE ||\r\n            this.status === STAGE_STATUS.LOADING) {\r\n            return;\r\n        }\r\n        if (this.curScene) {\r\n            this.curScene.dispose();\r\n            this.curScene = undefined;\r\n        }\r\n        this.variableManager.clear();\r\n        this.soundManager.clear();\r\n        this.start();\r\n    }\r\n    public dispose(): void {\r\n        this.curSceneId = undefined;\r\n        this.curSceneTransition = undefined;\r\n\r\n        if (this.app && this.app.ticker) {\r\n            this.app.ticker.stop();\r\n            // this.app.ticker.destroy();\r\n        }\r\n\r\n        this.releaseAll();\r\n\r\n        if (this.curScene) {\r\n            this.curScene.dispose();\r\n        }\r\n\r\n        if (this.res) {\r\n            this.res.removeAllListeners();\r\n            this.res.destroy();\r\n            (this as any).res = null as any;\r\n        }\r\n\r\n        this.plugs.forEach((value) => {\r\n            value.release();\r\n        });\r\n    }\r\n\r\n    public switchToSceneId(sceneId: string, transition?: ITransitionData): void {\r\n        this.curSceneId = sceneId;\r\n        this.curSceneTransition = transition;\r\n        this.start();\r\n    }\r\n\r\n    public switchToSceneIndex(index: number, transition?: ITransitionData): void {\r\n        const sceneData = getSceneDataByIndex(this.data, parseInt(index as any, 0));\r\n\r\n        if (sceneData) {\r\n            this.switchToSceneId(sceneData.id, transition);\r\n        }\r\n    }\r\n\r\n    public switchToNextScene(transition?: ITransitionData): void {\r\n        const sceneData = getNextSceneData(this.data, this.curSceneId);\r\n\r\n        if (sceneData) {\r\n            this.switchToSceneId(sceneData.id, transition);\r\n        }\r\n    }\r\n\r\n    public switchToPrevScene(transition?: ITransitionData): void {\r\n        const sceneData = getPrevSceneData(this.data, this.curSceneId);\r\n\r\n        if (sceneData) {\r\n            this.switchToSceneId(sceneData.id, transition);\r\n        }\r\n    }\r\n\r\n    private switchToScene(scene: VFScene, transition?: ITransitionData): void {\r\n        if (scene && this.app) {\r\n            let transitionData = transition;\r\n            let prevTexture: vf.RenderTexture | undefined;\r\n\r\n            if (this.curScene) {\r\n                if (this.curScene.transition || transitionData) {\r\n                    if (transitionData === undefined) {\r\n                        transitionData = this.curScene.transition;\r\n                    }\r\n                    prevTexture = renderTexture(this.app, this.container, this.container.width, this.container.height);\r\n                }\r\n                this.removeChild(this.curScene);\r\n                this.curScene.dispose();\r\n            }\r\n            this.curScene = scene;\r\n            this.curScene.width = this.width;\r\n            this.curScene.height = this.height;\r\n            this.addChild(scene);\r\n            if (transitionData && prevTexture) {\r\n                applyTransition(this, prevTexture, transitionData);\r\n            }\r\n            else {\r\n                this.emit(SceneEvent.TransitionStart);\r\n                this.emit(SceneEvent.TransitionEnd);\r\n            }\r\n\r\n            this.visible = false;\r\n            clearTimeout(this._delayedDisplayId);\r\n            this._delayedDisplayId = setTimeout(() => {\r\n                this.visible = true;\r\n            }, 60);\r\n\r\n            this.status = STAGE_STATUS.PLAYING;\r\n        }\r\n    }\r\n\r\n    private loadAssetCompleted(): void {\r\n        this.systemEvent.emit(EventType.STATUS, {\r\n            code: SceneEvent.LoadComplete, level: EventLevel.STATUS, data: [this.curSceneId],\r\n        });\r\n        // 加载完毕\r\n        this.status = STAGE_STATUS.READY;\r\n\r\n        if (this.curSceneId !== undefined) {\r\n            const scene = this.res.createScene(this.curSceneId, this);\r\n\r\n            if (scene) {\r\n                this.switchToScene(scene, this.curSceneTransition);\r\n            }\r\n\r\n            this.createPlugs();\r\n            this.systemEvent.emit(EventType.STATUS, {\r\n                code: SceneEvent.ScenComplete, level: EventLevel.STATUS, data: null,\r\n            });\r\n        }\r\n    }\r\n\r\n    private loadProgress(e: any): void {\r\n        this.systemEvent.emit(EventType.STATUS, {\r\n            code: SceneEvent.LoadProgress, level: EventLevel.STATUS, data: e,\r\n        });\r\n    }\r\n\r\n    private createPlugs(): void {\r\n        const plugsData = this.config.plugs;\r\n\r\n        for (const value of plugsData) {\r\n            const PlugsClass = ((Plugs as any)[value.id]);\r\n\r\n            if (PlugsClass) {\r\n                const plug: IPlug = new PlugsClass(value.id, this);\r\n\r\n                plug.load(value);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","import { VFStage } from '../VFStage';\r\nimport {Plug } from './Plug';\r\nimport { EventLevel } from '../../event/EventLevel';\r\nimport { EventType } from '../../event/EventType';\r\n\r\n/** \r\n * 画板插件 \r\n * @author yangxiao \r\n */\r\nexport class BoardDrawPlug extends Plug {\r\n\r\n    private followLine?: vf.gui.FollowLine;\r\n\r\n    constructor(className: string, parent: VFStage) {\r\n        super(className, parent);\r\n    }\r\n\r\n    public onLoad(data: any) {\r\n        const { parent } = this;\r\n        this.followLine = new vf.gui.FollowLine(parent as any);\r\n        const followLine = this.followLine;\r\n        followLine.role =  data.role === 1 ? \r\n        vf.gui.Enum.FollowLineEnum.Role.teacher : \r\n        vf.gui.Enum.FollowLineEnum.Role.student;\r\n        followLine.width = parent.width;\r\n        followLine.height = parent.height;\r\n        parent.addChild(followLine);\r\n\r\n        followLine.on(vf.gui.Interaction.ComponentEvent.COMPLETE, this.onComplete, this);\r\n\r\n        parent.config.systemEvent.on(EventType.MESSAGE, this.onReceipt, this);\r\n        return  this;\r\n    }\r\n\r\n    public onRelease() {\r\n        this.parent.config.systemEvent.off(EventType.MESSAGE, this.onReceipt, this);\r\n        this.followLine?.off(vf.gui.Interaction.ComponentEvent.COMPLETE, this.onComplete, this);\r\n        this.followLine?.offAll();\r\n        this.followLine?.release(); \r\n    }\r\n\r\n    private onComplete(display: vf.gui.FollowLine, data: string) {\r\n        this.parent.config.systemEvent.emit(EventType.MESSAGE, \r\n            { \r\n                type: 'sendSignal', \r\n                code: 'sendSignal', \r\n                level : EventLevel.COMMAND , \r\n                data: {name: 'boardDraw', val: data},\r\n            });\r\n    }\r\n\r\n    private onReceipt(msg: {type: string, code: string, data: {name: string, val: any}}) {\r\n        if (msg.data && msg.code === 'sendSignal' &&  this.followLine) {\r\n            const followLine = this.followLine;\r\n            if (msg.data.name === 'boardDraw') {\r\n                followLine.setData(msg.data.val);\r\n            } else if (msg.data.name === 'boardRestore') { // 重置\r\n                followLine.reset();\r\n            } else if (msg.data.name === 'boardErase') { // 橡皮檫\r\n                followLine.isErasing = msg.data.val;\r\n            } else if (msg.data.name === 'boardLineColor') { // 线段颜色\r\n                followLine.lineColor = msg.data.val;\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { VFStage } from '../VFStage';\r\nimport {Plug } from './Plug';\r\n\r\n/**\r\n * 数字图书馆\r\n * @author yangxiao\r\n */\r\nexport class DigitalLibraryPlug extends Plug {\r\n    // eslint-disable-next-line @typescript-eslint/no-useless-constructor\r\n    constructor(className: string, parent: VFStage) {\r\n        super(className, parent);\r\n    }\r\n\r\n    protected onLoad(): void {\r\n        const { parent } = this;\r\n        // eslint-disable-next-line no-undef\r\n        const interaction = (parent.app?.renderer as vf.Renderer).plugins.interaction as vf.interaction.InteractionManager;\r\n\r\n        interaction.autoPreventDefault = false;\r\n    }\r\n\r\n    protected onRelease(): void {\r\n        //\r\n    }\r\n}\r\n","import { IPlug } from './IPlug';\r\nimport { VFStage } from '../VFStage';\r\nimport { VFStateCode } from '../../core/model/IVFData';\r\n\r\n/** \r\n * 基于接口的抽象实现\r\n * @author yangxiao\r\n */\r\nexport class Plug implements IPlug {\r\n\r\n    public id: string;\r\n    public parent: VFStage;\r\n    public status: VFStateCode;\r\n\r\n    constructor(className: string, parent: VFStage) {\r\n        this.id = className;\r\n        this.parent = parent;\r\n        this.status = VFStateCode.INIT;\r\n    }\r\n\r\n    public load(data: any) {\r\n        if (this.status !== VFStateCode.INIT) {\r\n            return;\r\n        }\r\n        this.onLoad(data);\r\n        this.status = VFStateCode.READY;\r\n        this.parent.plugs.set(this.id, this);\r\n        return this;\r\n    }\r\n\r\n    public release() {\r\n        if (this.status === VFStateCode.INIT) {\r\n            return;\r\n        }\r\n        this.onRelease();\r\n        this.parent.plugs.delete(this.id);\r\n        this.parent = null as any;\r\n        this.status = VFStateCode.INIT;\r\n    }\r\n\r\n    /**\r\n     * 子类实现\r\n     */\r\n    protected onLoad(data: any) {\r\n        //\r\n    }\r\n    \r\n    /**\r\n     * 子类实现\r\n     */\r\n    protected onRelease() {\r\n        //\r\n    }\r\n\r\n}\r\n","export { BoardDrawPlug } from './BoardDrawPlug';\r\nexport { SliderEditorPlug } from './SliderEditorPlug';\r\nexport { DigitalLibraryPlug } from './DigitalLibraryPlug';\r\n\r\nexport class PlugIndex {\r\n    // eslint-disable-next-line @typescript-eslint/no-useless-constructor\r\n    constructor() {\r\n        //\r\n    }\r\n}\r\n\r\n","// eslint-disable-next-line no-unused-vars\r\nimport { VFStage } from '../VFStage';\r\nimport { Plug } from './Plug';\r\nimport { EventLevel } from '../../event/EventLevel';\r\n/**\r\n * 基于互动课件slider业务的特殊插件，用于解决穿透，鼠标事件等问题\r\n * @author yangxiao\r\n */\r\nexport class SliderEditorPlug extends Plug {\r\n    private dom?: HTMLElement | null;\r\n    private observer?: MutationObserver;\r\n\r\n    constructor(className: string, parent: VFStage) {\r\n        super(className, parent);\r\n        parent.originalEventPreventDefault = true;\r\n        let element = document.getElementById('drawCanvas');\r\n\r\n        // eslint-disable-next-line no-eq-null\r\n        if (element == null) {\r\n            const canvasContainer = document.getElementsByClassName('canvas-container')[0];\r\n\r\n            if (canvasContainer && canvasContainer.children[1]) {\r\n                element = canvasContainer.children[1] as HTMLElement;\r\n            }\r\n        }\r\n        // eslint-disable-next-line no-eq-null\r\n        if (element == null) {\r\n            // 无法找到画线，可能是回放模式\r\n            this.parent.systemEvent.emitError('E0002', ['drawCanvas|canvas-container'], EventLevel.WARNING);\r\n\r\n            return;\r\n        }\r\n        this.dom = element;\r\n    }\r\n\r\n    protected onLoad(data: any) {\r\n        if (this.dom === undefined) {\r\n            return;\r\n        }\r\n\r\n        const element = this.dom as HTMLElement;\r\n\r\n        const { parent } = this;\r\n\r\n        // tslint:disable-next-line: max-line-length\r\n        const MutationObserver = window.MutationObserver || (window as any).WebKitMutationObserver || (window as any).MozMutationObserver;\r\n        // eslint-disable-next-line no-undef\r\n        const interaction = (parent.app?.renderer as vf.Renderer).plugins.interaction;\r\n\r\n        this.observer = new MutationObserver((mutations) => {\r\n            mutations.forEach((mutation) => {\r\n                if (mutation.type === 'attributes') {\r\n                    const node = mutation.target as any;\r\n                    const currentCursorMode = interaction.currentCursorMode;\r\n\r\n                    if (node.dataset.cursor !== node.style.cursor) {\r\n                        if (currentCursorMode === 'pointer') {\r\n                            node.style.cursor = 'pointer';\r\n                            node.dataset.cursor = node.style.cursor;\r\n\r\n                            return;\r\n                        }\r\n                        node.dataset.cursor = node.style.cursor;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        this.observer.observe(element, {\r\n            attributes: true, // configure it to listen to attribute changes,\r\n            attributeFilter: ['style'],\r\n        });\r\n\r\n        const defaultCursor = element.style.cursor;\r\n\r\n        interaction.setTargetElement(element, parent.app?.renderer.resolution);\r\n        const cursorStyles: any = interaction.cursorStyles;\r\n\r\n        cursorStyles.default = defaultCursor;\r\n\r\n        element.style.display = 'none';\r\n\r\n        setTimeout(() => {\r\n            // BUG 边检检查\r\n            if (element) { element.style.display = ''; }\r\n        }, 60);\r\n\r\n        return;\r\n    }\r\n\r\n    protected onRelease() {\r\n        this.observer?.disconnect();\r\n        this.dom = null;\r\n    }\r\n}\r\n","import Config from '../core/Config';\r\nimport { EventType } from '../event/EventType';\r\n/**\r\n * 显示错误信息\r\n * TODO:\r\n *  1、仅处理影响运行/使用的Error。\r\n *  2、支持国际化显示Error信息。\r\n *  3、可配置不使用内置Error，外部可根据API抛出的异常自定义显示Error信息。\r\n */\r\nexport default class ErrorDisplay {\r\n    private _config: Config;\r\n    private _errPanel?: HTMLElement;\r\n    private _showCode: string;\r\n    constructor(config: Config, useCustomErrorPanel?: boolean) {\r\n        this._config = config;\r\n        this._showCode = '';\r\n        if (useCustomErrorPanel) {\r\n            this._errPanel = document.createElement('div');\r\n            this._errPanel.style.background = 'rgba(0,0,0,0.8)';\r\n            this._errPanel.style.position = 'absolute';\r\n            this._errPanel.style.width = '100%';\r\n            this._errPanel.style.height = '100%';\r\n            this._errPanel.style.zIndex = '8088';\r\n            this._errPanel.style.display = 'none';\r\n            const _span = document.createElement('span');\r\n\r\n            _span.style.display = 'table-cell';\r\n            _span.style.verticalAlign = 'middle';\r\n            _span.style.textAlign = 'center';\r\n            _span.style.color = '#eee';\r\n            this._errPanel.appendChild(_span);\r\n            this._config.container.appendChild(this._errPanel);\r\n            this._config.i18n.addListener(EventType.STATE, this.onChange, this);\r\n        }\r\n    }\r\n\r\n    public setMessage(code: string, data?: string[]): void {\r\n        // mark: need check code is supported\r\n        if (code && this._errPanel) {\r\n            this._showCode = code;\r\n            this._errPanel.style.display = 'table';\r\n            const _span = this._errPanel.children[0];\r\n\r\n            if (_span.hasChildNodes()) {\r\n                _span.removeChild(_span.childNodes[0]);\r\n            }\r\n            const _text = document.createTextNode(this.getText(code, data));\r\n\r\n            _span.appendChild(_text);\r\n        }\r\n    }\r\n\r\n    public getText(code: string, data?: string[]): string {\r\n        return `${this._config.i18n.t(code, data)} #${code}`;\r\n    }\r\n\r\n    public close(): void {\r\n        this._showCode = '';\r\n        if (this._errPanel) {\r\n            this._errPanel.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    private onChange(evt: any): void {\r\n        if (this._showCode && evt.code === 'I18N.Property.Changed') {\r\n            this.setMessage(this._showCode);\r\n        }\r\n    }\r\n}\r\n","import IEvent from './IEvent';\r\nimport IEventObserver from './IEventObserver';\r\nimport { EventLevel } from './EventLevel';\r\nimport { EventType } from './EventType';\r\n\r\nexport default class StateEvent extends vf.utils.EventEmitter {\r\n\r\n    private _observers: IEventObserver[];\r\n\r\n    public constructor() {\r\n        super();\r\n        this._observers = [];\r\n    }\r\n\r\n    public emit(type: string, event: IEvent): boolean {\r\n        if (type === undefined) {\r\n            throw new Error(`emitEvent ==> ${type} is undefined`);\r\n        }\r\n        if (event.code === undefined) {\r\n            throw new Error(`emitEvent ==> ${type} args.code is undefined`);\r\n        }\r\n        if (event.level === undefined) {\r\n            throw new Error(`emitEvent ==> ${type} args.level is undefined`);\r\n        }\r\n        const result = super.emit(type, event);\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 扩展的发送，事件名与数据\r\n     * @param event 事件名 event = code \r\n     * @param _data \r\n     * @param _target \r\n     */\r\n    public emitExt(event: string,  _data: any, _target?: any) {\r\n        this.emit(event, { code: event, level: EventLevel.COMMAND, data: _data, target: _target } );\r\n    }\r\n\r\n    /**\r\n     * 抛出错误信息\r\n     * @param errorCode 错误码，指定packages.i18n中的文件\r\n     * @param data 需要解析的变量\r\n     */\r\n    public emitError(errorCode: string, data?: any[], level = EventLevel.ERROR , target?: any) {\r\n        this.error({code: errorCode, level, data, message: errorCode, target,});\r\n    }\r\n\r\n    public error(msg:IEvent){\r\n        this.emit(EventType.STATUS, msg);\r\n    }\r\n}\r\n","export * from './Player';\r\n","/* eslint-disable no-unused-vars */\r\nimport { VFStage } from '../display/VFStage';\r\nimport { IActionSound } from '../core/model/IVFData';\r\nimport { EventLevel } from '../event/EventLevel';\r\nimport { EventType } from '../event/EventType';\r\n\r\nexport class SoundManager {\r\n    private stage: VFStage;\r\n    private trackIdMap: string[] = [];\r\n\r\n    constructor(vfStage: VFStage) {\r\n        this.stage = vfStage;\r\n        // vfStage.config.vfvars.useNativeAudio // 如果使用了native播放，不要加载和设置PIXI.sound， 在互动课件中会有问题，教室中使用audioContext会出错。\r\n    }\r\n\r\n    private getAudio(trackId: string | undefined): undefined | vf.IAudio {\r\n        const ae = vf.AudioEngine.Ins();\r\n\r\n        if (trackId === undefined) {\r\n            return undefined;\r\n        }\r\n\r\n        return ae.map.get(this.stage.config.uuid.toString() + trackId);\r\n    }\r\n\r\n    public clear(): void {\r\n        this.pause();\r\n        const trackMap = this.trackIdMap;\r\n        let audio: vf.IAudio | undefined;\r\n\r\n        while (trackMap.length > 0) {\r\n            audio = this.getAudio(trackMap.shift());\r\n\r\n            if (audio) {\r\n                audio.dispose();\r\n            }\r\n        }\r\n    }\r\n\r\n    public pause(): void {\r\n        let audio: vf.IAudio | undefined;\r\n\r\n        this.trackIdMap.forEach((trackId) => {\r\n            audio = this.getAudio(trackId);\r\n\r\n            if (audio) {\r\n                audio.pause();\r\n            }\r\n        });\r\n    }\r\n\r\n    public resume(): void {\r\n        let audio: vf.IAudio | undefined;\r\n\r\n        this.trackIdMap.forEach((trackId) => {\r\n            audio = this.getAudio(trackId);\r\n\r\n            if (audio) {\r\n                audio.play();\r\n            }\r\n        });\r\n    }\r\n\r\n    public pauseSound(data: IActionSound = {} as any): void {\r\n        if (this.nativeEmit(data.assetId as number, 'pauseAudio', data)) {\r\n            return;\r\n        }\r\n\r\n        if (this.weixinEmit()) {\r\n            return;\r\n        }\r\n\r\n        const audio = this.getAudio(data.trackId);\r\n\r\n        if (audio) {\r\n            audio.pause();\r\n        }\r\n    }\r\n\r\n    public resumeSound(data: IActionSound): void {\r\n        if (this.nativeEmit(data.assetId as number, 'resumeAudio', data)) {\r\n            return;\r\n        }\r\n\r\n        if (this.weixinEmit()) {\r\n            return;\r\n        }\r\n\r\n        const audio = this.getAudio(data.trackId);\r\n\r\n        if (audio && audio.paused) {\r\n            audio.play();\r\n        }\r\n    }\r\n\r\n    // tslint:disable-next-line: max-line-length\r\n    public playSound(data: IActionSound): void {\r\n        const asset = this.stage.res.data.assets[data.assetId.toString()];\r\n\r\n        if (asset === undefined || asset.url === undefined || asset.url === '') {\r\n            console.warn('playback failed,missing assetId!', data);\r\n\r\n            return;\r\n        }\r\n\r\n        if (this.nativeEmit(data.assetId as number, 'playAudio', data)) {\r\n            return;\r\n        }\r\n\r\n        if (this.weixinEmit()) {\r\n            return;\r\n        }\r\n\r\n        let audio = this.getAudio(data.trackId);\r\n\r\n        if (audio) {\r\n            audio.play(0, 0);\r\n        }\r\n        else {\r\n            // eslint-disable-next-line max-len\r\n            audio = vf.AudioEngine.Ins().createAudio(this.stage.config.uuid.toString() + data.trackId, asset.url, { autoplay: false } as any);\r\n            audio.play(data.time, data.offset, data.length);\r\n            this.trackIdMap.push(data.trackId);\r\n        }\r\n    }\r\n\r\n    public isWeixin(): boolean {\r\n        const ua = window.navigator.userAgent.toLowerCase();\r\n\r\n        return (/micromessenger/).test(ua);\r\n    }\r\n\r\n    private weixinEmit(): boolean {\r\n        return false;\r\n        // eslint-disable-next-line no-unreachable\r\n        if (this.isWeixin()) {\r\n            // document.addEventListener('WeixinJSBridgeReady', () => {audio.play(); }, false);\r\n            // if (( window as any).WeixinJSBridge &&\r\n            //     typeof ( window as any).WeixinJSBridge === 'object' &&\r\n            //     typeof ( window as any).WeixinJSBridge.invoke === 'function') {\r\n            //     ( window as any).WeixinJSBridge.invoke('getNetworkType', {}, () => {audio.pause(); });\r\n            // }\r\n        }\r\n    }\r\n\r\n    private nativeEmit(assetId: number | string, typeTag: string, data: IActionSound = {} as any): boolean {\r\n        const useNative = this.stage.config.vfvars.useNativeAudio;\r\n\r\n        if (useNative) { // 先放这里，后期soundManager完成后，合并\r\n            const asset = this.stage.res.getAsset(assetId);\r\n\r\n            this.stage.systemEvent.emit(EventType.MESSAGE, {\r\n                code: EventLevel.NATIVE,\r\n                type: EventLevel.NATIVE,\r\n                level: EventLevel.COMMAND,\r\n                data: {\r\n                    type: typeTag,\r\n                    id: data.trackId || 0,\r\n                    src: asset.url,\r\n                    mode: data.mode || 'sound',\r\n                },\r\n            });\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n","/* eslint-disable no-undef */\r\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\r\nimport { ScaleMode } from '../core/model/IVFData';\r\nimport { VFStage } from '../display/VFStage';\r\n\r\n/**\r\n * @private\r\n * 计算舞台显示尺寸\r\n * @param scaleMode 当前的缩放模式\r\n * @param screenWidth 播放器视口宽度\r\n * @param screenHeight 播放器视口高度\r\n * @param contentWidth 初始化内容宽度\r\n * @param contentHeight 初始化内容高度\r\n */\r\nfunction calculateStageSize(\r\n    scaleMode: ScaleMode,\r\n    screenWidth: number,\r\n    screenHeight: number,\r\n    contentWidth: number,\r\n    contentHeight: number) {\r\n    let displayWidth = screenWidth;\r\n    let displayHeight = screenHeight;\r\n    let stageWidth = contentWidth;\r\n    let stageHeight = contentHeight;\r\n    const scaleX = (screenWidth / stageWidth) || 0;\r\n    const scaleY = (screenHeight / stageHeight) || 0;\r\n\r\n    switch (scaleMode) {\r\n        case 'showAll':\r\n            if (scaleX > scaleY) {\r\n                displayWidth = Math.round(stageWidth * scaleY);\r\n            }\r\n            else {\r\n                displayHeight = Math.round(stageHeight * scaleX);\r\n            }\r\n            break;\r\n        case 'cover':\r\n            if (scaleX > scaleY) {\r\n                displayHeight = Math.round(stageHeight * scaleX);\r\n            }\r\n            else {\r\n                displayWidth = Math.round(stageWidth * scaleY);\r\n            }\r\n            break;\r\n        case 'contain':\r\n            if (scaleX > scaleY) {\r\n                stageWidth = Math.round(screenWidth / scaleY);\r\n            }\r\n            else {\r\n                stageHeight = Math.round(screenHeight / scaleX);\r\n            }\r\n            break;\r\n        default:\r\n            stageWidth = screenWidth;\r\n            stageHeight = screenHeight;\r\n            break;\r\n    }\r\n    // 宽高不是2的整数倍会导致图片绘制出现问题\r\n    if (stageWidth % 2 !== 0) {\r\n        stageWidth += 1;\r\n    }\r\n    if (stageHeight % 2 !== 0) {\r\n        stageHeight += 1;\r\n    }\r\n    if (displayWidth % 2 !== 0) {\r\n        displayWidth += 1;\r\n    }\r\n    if (displayHeight % 2 !== 0) {\r\n        displayHeight += 1;\r\n    }\r\n\r\n    return {\r\n        stageWidth,\r\n        stageHeight,\r\n        displayWidth,\r\n        displayHeight,\r\n    };\r\n}\r\n\r\nexport function getBoundingClientRect(dom: HTMLElement): DOMRect {\r\n    if (dom === null) {\r\n        throw new Error(`Error No find canvas parent dom`);\r\n    }\r\n\r\n    const rect = {} as any;\r\n\r\n    rect.width = dom.offsetWidth;\r\n    rect.height = dom.offsetHeight;\r\n    return rect;\r\n}\r\n/**\r\n * @private\r\n *\r\n * 更新播放器视口尺寸\r\n *\r\n * noScale 不对内容进行任何缩放，保持原始的1:1比例。如果播放器窗口比内容小，则可能进行一些裁切。\r\n *\r\n * showAll 非溢出居中，显示全部内容。水平或垂直“两侧”可能会不够宽而留有黑边。\r\n *\r\n * contain 非溢出，显示全部内容，水平或垂直“一侧”方向有黑边。\r\n *\r\n * cover 溢出居中，某些部分也许无法显示在播放器视口。\r\n */\r\n// eslint-disable-next-line max-len\r\nexport function calculateUpdatePlayerSize(player: HTMLElement, canvas: HTMLCanvasElement, stage: VFStage, scaleMode: ScaleMode, canvasScaleFactor = 1, isWebGl = true) {\r\n    const top = 0;\r\n\r\n    const clientRect = getBoundingClientRect(player);\r\n    const screenWidth = clientRect.width;\r\n    const screenHeight = clientRect.height;\r\n\r\n    const stageSize = calculateStageSize(scaleMode, screenWidth, screenHeight, stage.width || canvas.width, stage.height || canvas.height);\r\n\r\n    const stageWidth = stageSize.stageWidth;\r\n    const stageHeight = stageSize.stageHeight;\r\n    const displayWidth = stageSize.displayWidth;\r\n    const displayHeight = stageSize.displayHeight;\r\n\r\n    if (canvas.style.transformOrigin) {\r\n        canvas.style.transformOrigin = '0% 0% 0px';\r\n    }\r\n    else {\r\n        canvas.style.webkitTransformOrigin = '0% 0% 0px';\r\n    }\r\n\r\n    if (canvas.width !== stageWidth) {\r\n        canvas.width = stageWidth;\r\n    }\r\n    if (canvas.height !== stageHeight) {\r\n        canvas.height = stageHeight;\r\n    }\r\n\r\n    const rotation = 0;\r\n\r\n    canvas.style.top = `${top + ((screenHeight - displayHeight) / 2)}px`;\r\n    canvas.style.left = `${(screenWidth - displayWidth) / 2}px`;\r\n\r\n    const scalex = displayWidth / stageWidth;\r\n    const scaley = displayHeight / stageHeight;\r\n\r\n    let canvasScaleX = scalex * canvasScaleFactor;\r\n    let canvasScaleY = scaley * canvasScaleFactor;\r\n\r\n    if (!isWebGl) {\r\n        canvasScaleX = Math.ceil(canvasScaleX);\r\n        canvasScaleY = Math.ceil(canvasScaleY);\r\n    }\r\n\r\n    const m = new vf.Matrix();\r\n\r\n    m.identity();\r\n    m.scale(scalex / canvasScaleX, scaley / canvasScaleY);\r\n    m.rotate(rotation * Math.PI / 180);\r\n\r\n    canvas.style.position = 'absolute';\r\n    if (canvas.style.transform) {\r\n        canvas.style.transform = `matrix(${m.a},${m.b},${m.c},${m.d},${m.tx},${m.ty})`;\r\n    }\r\n    else {\r\n        canvas.style.webkitTransform = `matrix(${m.a},${m.b},${m.c},${m.d},${m.tx},${m.ty})`;\r\n    }\r\n\r\n    canvas.width = stageWidth * canvasScaleX;\r\n    canvas.height = stageHeight * canvasScaleY;\r\n    // canvas.style.border = '5px solid red';\r\n    stage.container.hitArea = new vf.Rectangle(0, 0, stageWidth, stageHeight);\r\n    stage.scaleX = canvasScaleX / canvasScaleFactor;\r\n    stage.scaleY = canvasScaleY / canvasScaleFactor;\r\n\r\n    return { width: canvas.width, height: canvas.height, scaleX: canvasScaleX, scaleY: canvasScaleY };\r\n}\r\n","/* eslint-disable no-undef */\r\n/* eslint-disable max-len */\r\n/* eslint-disable consistent-return */\r\n/* eslint-disable func-names */\r\n/* eslint-disable func-style */\r\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\r\n/* eslint-disable @typescript-eslint/no-use-before-define */\r\n/* eslint-disable no-prototype-builtins */\r\nimport { EventLevel } from '../event/EventLevel';\r\nimport { getUrl } from './getUrl';\r\nimport { CDN } from '../core/model/IVFData';\r\n\r\n/**\r\n * 加载script js 或js模块\r\n * 1. 支持普通的全局js加载，常规script标签方式引入\r\n * 2. 支持通过 “tsc xxx.ts -m umd” 编译生成的文件动态加载\r\n *\r\n * @param url url地址\r\n * @param moduleName 模块名，可加载umd模块，访问形式为gui.moduleName\r\n *\r\n * @example\r\n * let Cls = await importScript('http://127.0.0.1:5501/dist/test2.js',\"Test\");\r\n * let text = new Cls(); //或 let text = new vf.gui.Test();\r\n *\r\n */\r\nexport default async function importScript(url: string, cdns?: CDN, moduleName?: string, loadCompleteCallBack?: Function): Promise<boolean | any> {\r\n\r\n    const gui = vf.gui as any;\r\n\r\n    if (moduleName && gui[moduleName]) {\r\n        return gui[moduleName];\r\n    }\r\n\r\n    const errorUrls: any[] = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        let errorLoadCount = 0;\r\n\r\n        const loadScript = function (index: number) {\r\n            const s = document.createElement('script');\r\n\r\n            s.async = false;\r\n            s.src = index === 0 ? url : getUrl(url, '', cdns, index - 1);\r\n            s.addEventListener('load', loadComplete, false);\r\n            s.addEventListener('error', loadError, false);\r\n            document.body.appendChild(s);\r\n        };\r\n\r\n        const loadComplete = function (this: HTMLScriptElement, e: Event) {\r\n            removeEvent(this);\r\n            if (loadCompleteCallBack) {\r\n                loadCompleteCallBack();\r\n            }\r\n            if (moduleName) {\r\n                if (gui.module && gui.module.hasOwnProperty(moduleName)) {\r\n                    gui[moduleName] = gui.module[moduleName];\r\n                    gui.module = null;\r\n\r\n                    return resolve(gui[moduleName]);\r\n                }\r\n\r\n                // eslint-disable-next-line no-console\r\n                console.log(`[VF LOG]error gui module (${moduleName}) load failed`);\r\n\r\n                return resolve(false);\r\n            }\r\n\r\n            resolve(true);\r\n        };\r\n        const loadError = function (this: HTMLScriptElement, e: Event) {\r\n            removeEvent(this);\r\n            if (errorLoadCount > 3) {\r\n                reject({ code: '404', level: EventLevel.ERROR, data: [errorUrls.join('\\n')] });\r\n            }\r\n            else {\r\n                if (errorUrls.indexOf(this.src) === -1) {\r\n                    errorUrls.push(this.src);\r\n                }\r\n                loadScript(1);\r\n                errorLoadCount++;\r\n            }\r\n        };\r\n        const removeEvent = function (thisObj: any) {\r\n            thisObj.parentNode.removeChild(thisObj);\r\n            thisObj.removeEventListener('load', loadComplete, false);\r\n            thisObj.removeEventListener('error', loadError, false);\r\n        };\r\n\r\n        loadScript(0);\r\n    });\r\n}\r\n","import getTimer from './getTimer';\r\nexport default function trace(...args: any[]) {\r\n    const title = '[VF LOG]';\r\n    switch (args.length) {\r\n        // tslint:disable-next-line: no-console\r\n        case 1: return console.log(title, args[0]);\r\n        // tslint:disable-next-line: no-console\r\n        case 2: return console.log(title, args[0], args[1]);\r\n        // tslint:disable-next-line: no-console\r\n        case 3: return console.log(title, args[0], args[1], args[2]);\r\n        // tslint:disable-next-line: no-console\r\n        case 4: return console.log(title, args[0], args[1], args[2], args[3]);\r\n        // tslint:disable-next-line: no-console\r\n        case 5: return console.log(title, args[0], args[1], args[2], args[3], args[4]);\r\n        // tslint:disable-next-line: no-console\r\n        case 6: return console.log(title, args[0], args[1], args[2], args[3], args[4], args[5]);\r\n    }\r\n}\r\n//\r\n// export default class Trace {\r\n//     public static NAME\t\t    :string = 'Trace';\r\n//     public static VERSION\t\t:string = '1.0.0';\r\n//\r\n//     // public static ignoreStatus\t\t:boolean = true;\r\n//     // public static secure\t\t\t:boolean = false;\r\n//     // public static secureDomain\t\t:string  = '*';\r\n//     // public static allowLog\t\t\t:boolean = true;\r\n//     // public static allowAdvancedTrace:boolean = true;\r\n//     //\r\n//     // public static DEFAULT_COLOR\t:number\t= 6710886;\r\n//     // public static RED\t\t\t:number = 0xE40D0D;\r\n//     // public static ORANGE\t\t:number = 0xFF6600;\r\n//     // public static GREEN\t\t\t:number = 0x4FE10F;\r\n//     // public static BLUE\t\t\t:number = 0x118EE6;\r\n//     // public static PINK\t\t\t:number = 0xE40DE4;\r\n//     // public static YELLOW\t\t:number = 0xE9E610;\r\n//     // public static LIGHT_BLUE\t:number = 0x15E0DE;\r\n//     // public static START_TIME    :number = Date.now();\r\n//\r\n//     public static logAdvancedTrace  :boolean = false;\r\n//\r\n//     /**\r\n//      * 可以通过属性设置功能开关：\r\n//      *\r\n//      * - 输出堆栈调用跟踪日志（Trace.logAdvancedTrace = true;）\r\n//      *\r\n//      * 使用示例：\r\n//      * trace(\"year={}, month={}, day={}\", 2014, 9, 5); // [VF LOG] year=2014 month=9 day=5\r\n//      * trace(Object); // [VF LOG] {\"a\":\"aa\", \"b\":\"bb\", ...}\r\n//      * trace(Array); // [VF LOG] [0, 1, 2, ...]\r\n//      * trace(\"test message\", 0xFF6600, \"LOGO\"); // [LOGO LOG] test message\r\n//      * trace(\"test1\", \"test2\", 0xFF6600, \"test3\", \"CORE\"); // [CORE LOG] test1 test2 test3\r\n//      */\r\n//     public static log(any: any, ...args: any[]): void {\r\n//         let _msg: string = '';\r\n//         let _color: number = Trace.DEFAULT_COLOR;\r\n//         let _logo: string = 'VF';\r\n//\r\n//         if(typeof any === 'object') {\r\n//             try {\r\n//                 _msg = JSON.stringify(any);\r\n//                if(_msg === '{}') {\r\n//                    _msg = JSON.stringify((<any>Object).fromEntries(any.entries()));\r\n//                }\r\n//             }\r\n//             catch (err) {\r\n//                  return console.log(err);\r\n//             }\r\n//         }\r\n//         else {\r\n//             _msg = String(any);\r\n//         }\r\n//\r\n//         if(args.length) {\r\n//             let placeholder: string = '{}';\r\n//             let pIndex: number = 0;\r\n//             let arg: string = '';\r\n//             let i: number = 0;\r\n//\r\n//             while ((pIndex = _msg.indexOf(placeholder, pIndex)) != -1)\r\n//             {\r\n//                 arg = String(args.shift());\r\n//                 _msg = _msg.substring(0, pIndex) + arg + _msg.substring(pIndex + 2);\r\n//                 pIndex += arg.length;\r\n//             }\r\n//\r\n//             while (i<args.length)\r\n//             {\r\n//                 let _type: string = typeof args[i];\r\n//                 if (_type === \"number\" && args[i].toString(16).length == 6)\r\n//                 {\r\n//                     _color = args[i];\r\n//                     i++;\r\n//                     continue;\r\n//                 }\r\n//\r\n//                 if (_type === \"string\" && args[i].length<=5)\r\n//                 {\r\n//                     var re: RegExp = /^[A-Z]+[A-Z0-9]*$/;\r\n//                     if (re.test(args[i]))\r\n//                     {\r\n//                         _logo = args[i];\r\n//                         i++;\r\n//                         continue;\r\n//                     }\r\n//                 }\r\n//                 _msg += \" \" + String(args[i]);\r\n//                 i++;\r\n//             }\r\n//\r\n//         }\r\n//\r\n//         if(_logo || Trace.logAdvancedTrace) {\r\n//             _msg = `[${(_logo ? (_logo + ' LOG') : '')}${Trace.logAdvancedTrace?Trace.wrapMessage():''}] ` + _msg;\r\n//         }\r\n//         /* mark：颜色看需求再加...\r\n//         let style = [\r\n//             'background: linear-gradient(#D33106, #571402)'\r\n//             , 'border: 1px solid #3E0E02'\r\n//             , 'color: white'\r\n//             , 'display: block'\r\n//             , 'text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)'\r\n//             , 'box-shadow: 0 1px 0 rgba(255, 255, 255, 0.4) inset, 0 5px 3px -5px rgba(0, 0, 0, 0.5), 0 -13px 5px -10px rgba(255, 255, 255, 0.4) inset'\r\n//             , 'line-height: 40px'\r\n//             , 'text-align: center'\r\n//             , 'font-weight: bold'\r\n//         ].join(';');\r\n//         // console.log('%c test message!', style); */\r\n//         Trace.logAdvancedTrace?console.trace(_msg):console.log(_msg);\r\n//     }\r\n//\r\n//     private static wrapMessage(allowAdvancedTrace: boolean = true): string {\r\n//         let date: Date = new Date();\r\n//         let time: string = String('00' + date.getHours()).substr(-2) + ':' +\r\n//             String('00' + date.getMinutes()).substr(-2) + ':' +\r\n//             String('00' + date.getSeconds()).substr(-2) + '.' +\r\n//             String('000' + date.getUTCMilliseconds()).substr(-3);\r\n//         let str: string = '->' + getTimer(Trace.START_TIME) + ' ' + time;\r\n//\r\n//         // ...\r\n//\r\n//         return str;\r\n//     }\r\n// }\r\n//(<any>window).trace = trace;","/* eslint-disable no-mixed-operators */\r\nimport { CurveType, ITransitionData, ExpressItemType } from '../core/model/IVFData';\r\nimport { VFComponent } from '../display/VFComponent';\r\nimport { VFStage } from '../display/VFStage';\r\n// import { ITransition } from '../core/transition/ITransition';\r\n// import { CrossFadeFilter } from '../core/transition/filters/CrossFadeFilter';\r\n// import { CircleFadeFilter } from '../core/transition/filters/CircleFadeFilter';\r\n// import { CrossZoomFilter } from '../core/transition/filters/CrossZoomFilter';\r\n// import { DoomScreenFilter } from '../core/transition/filters/DoomScreenFilter';\r\n// import { HeartWipeFilter } from '../core/transition/filters/HeartWipeFilter';\r\n// import { LinearBlurFilter } from '../core/transition/filters/LinearBlurFilter';\r\n// import { PageCurlFilter } from '../core/transition/filters/PageCurlFilter';\r\n// import { WindFilter } from '../core/transition/filters/WindFilter';\r\n// import { ToTearFilter } from '../core/transition/filters/ToTearFilter';\r\n// import { PageFlipLeftFilter } from '../core/transition/filters/PageFlipLeftFilter';\r\n// import { PageFlipRightFilter } from '../core/transition/filters/PageFlipRightFilter';\r\nimport { Transition } from '../core/transition/Tranistion';\r\n\r\n/**\r\n * 获取从父级开始的对象\r\n */\r\nfunction getParentByTargetComponent(component: VFComponent, targets: string[]): vf.gui.DisplayObject | undefined {\r\n    let com: vf.gui.DisplayObject = component as any;\r\n\r\n    while (targets.length > 0) {\r\n        const childId = targets.shift();\r\n\r\n        if (com && com instanceof VFComponent && childId) {\r\n            com = (com as VFComponent).getChildById(childId) as any;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    return com;\r\n}\r\n\r\n/**\r\n * 获取从舞台顶级开始的对象，请标注targets的数组首位为-1\r\n * @param component\r\n * @param targets\r\n */\r\nfunction getRootByTargetComponent(component: VFComponent, targets: string[]): vf.gui.DisplayObject | undefined {\r\n    targets.shift(); // type\r\n    if (!component.vfStage) {\r\n        return undefined;\r\n    }\r\n    const curScene = component.vfStage.getCurScene();\r\n    let curCom: VFComponent | undefined;\r\n    const rootComID = targets.shift();\r\n\r\n    if (!curScene) {\r\n        return undefined;\r\n    }\r\n    for (let i = 0, len = curScene.uiChildren.length; i < len; i++) {\r\n        curCom = curScene.uiChildren[i] as any;\r\n        if (curCom instanceof VFComponent && curCom.id === rootComID) {\r\n            break;\r\n        }\r\n    }\r\n    if (curCom === undefined) {\r\n        return undefined;\r\n    }\r\n\r\n    return getParentByTargetComponent(curCom, targets);\r\n}\r\n\r\n// eslint-disable-next-line max-len\r\nexport function getComponentOrChild(component: VFComponent, targetData: string[] | undefined): vf.gui.DisplayObject | undefined {\r\n    if (!targetData) {\r\n        return component as any;\r\n    }\r\n    else if (targetData.length <= 0) {\r\n        return component as any;\r\n    }\r\n    const targets = targetData.concat();\r\n\r\n    if (targets[0] === '-1') {\r\n        // 从顶级开始\r\n        return getRootByTargetComponent(component, targets);\r\n    }\r\n\r\n    // 从父级开始\r\n    return getParentByTargetComponent(component, targets);\r\n}\r\n\r\nexport function getTargetComponent(component: VFComponent, targetData: any[] | undefined): vf.gui.DisplayObject | undefined {\r\n    // 支持从变量，属性，数组，参数中获取 组件\r\n    if (component && Array.isArray(targetData) && targetData.length > 1) {\r\n        if (targetData[0] === ExpressItemType.VARIABLE\r\n            || targetData[0] === ExpressItemType.PROPERTY\r\n            || targetData[0] === ExpressItemType.ARRAY_VALUE\r\n            || targetData[0] === ExpressItemType.PARAM_VALUE\r\n            || targetData[0] === ExpressItemType.OBJECT_VALUE\r\n            || targetData[0] === ExpressItemType.COMPONENT) {\r\n            const vfStage = component.vfStage;\r\n\r\n            if (vfStage && vfStage.variableManager) {\r\n                const variableManager = vfStage.variableManager;\r\n                const comp = variableManager.getExpressItemValue(component, targetData);\r\n\r\n                if (comp && comp instanceof vf.gui.DisplayObject) {\r\n                    return comp;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return getComponentOrChild(component, targetData);\r\n}\r\n\r\nexport function getCurveProgress(type: CurveType, pos: number): number {\r\n    let s = 0;\r\n\r\n    switch (type) {\r\n        case CurveType.None:\r\n            return 0;\r\n        case CurveType.Linear:\r\n            return pos;\r\n        case CurveType.EaseOutQuad:\r\n            return -(Math.pow((pos - 1), 2) - 1);\r\n        case CurveType.EaseInQuad:\r\n            return Math.pow(pos, 2);\r\n        case CurveType.EaseInOutQuad:\r\n            if ((pos /= 0.5) < 1) {\r\n                return 0.5 * Math.pow(pos, 2);\r\n            }\r\n\r\n            return -0.5 * ((pos -= 2) * pos - 2);\r\n        case CurveType.EaseInCubic:\r\n            return Math.pow(pos, 3);\r\n        case CurveType.EaseOutCubic:\r\n            return (Math.pow((pos - 1), 3) + 1);\r\n        case CurveType.EaseInOutCubic:\r\n            if ((pos /= 0.5) < 1) {\r\n                return 0.5 * Math.pow(pos, 3);\r\n            }\r\n\r\n            return 0.5 * (Math.pow((pos - 2), 3) + 2);\r\n        case CurveType.EaseInQuart:\r\n            return Math.pow(pos, 3);\r\n        case CurveType.EaseOutQuart:\r\n            return -(Math.pow((pos - 1), 4) - 1);\r\n        case CurveType.EaseInOutQuart:\r\n            if ((pos /= 0.5) < 1) {\r\n                return 0.5 * Math.pow(pos, 4);\r\n            }\r\n\r\n            return -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2);\r\n        case CurveType.EaseInQuint:\r\n            return Math.pow(pos, 5);\r\n        case CurveType.EaseOutQuint:\r\n            return (Math.pow((pos - 1), 5) + 1);\r\n        case CurveType.EaseInOutQuint:\r\n            if ((pos /= 0.5) < 1) {\r\n                return 0.5 * Math.pow(pos, 5);\r\n            }\r\n\r\n            return 0.5 * (Math.pow((pos - 2), 5) + 2);\r\n        case CurveType.EaseInSine:\r\n            return -Math.cos(pos * (Math.PI / 2)) + 1;\r\n        case CurveType.EaseOutSine:\r\n            return Math.sin(pos * (Math.PI / 2));\r\n        case CurveType.EaseInOutSine:\r\n            return (-0.5 * (Math.cos(Math.PI * pos) - 1));\r\n        case CurveType.EaseInExpo:\r\n            return (pos === 0) ? 0 : Math.pow(2, 10 * (pos - 1));\r\n        case CurveType.EaseOutExpo:\r\n            return (pos === 1) ? 1 : -Math.pow(2, -10 * pos) + 1;\r\n        case CurveType.EaseInOutExpo:\r\n            if (pos === 0) {\r\n                return 0;\r\n            }\r\n            if (pos === 1) {\r\n                return 1;\r\n            }\r\n            if ((pos /= 0.5) < 1) {\r\n                return 0.5 * Math.pow(2, 10 * (pos - 1));\r\n            }\r\n\r\n            return 0.5 * (-Math.pow(2, -10 * --pos) + 2);\r\n        case CurveType.EaseInCirc:\r\n            return -(Math.sqrt(1 - (pos * pos)) - 1);\r\n        case CurveType.EaseOutCirc:\r\n            return Math.sqrt(1 - Math.pow((pos - 1), 2));\r\n        case CurveType.EaseInOutCirc:\r\n            if ((pos /= 0.5) < 1) {\r\n                return -0.5 * (Math.sqrt(1 - pos * pos) - 1);\r\n            }\r\n\r\n            return 0.5 * (Math.sqrt(1 - (pos -= 2) * pos) + 1);\r\n        case CurveType.EaseOutBounce:\r\n            if ((pos) < (1 / 2.75)) {\r\n                return (7.5625 * pos * pos);\r\n            }\r\n            else if (pos < (2 / 2.75)) {\r\n                return (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);\r\n            }\r\n            else if (pos < (2.5 / 2.75)) {\r\n                return (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);\r\n            }\r\n\r\n            return (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);\r\n        case CurveType.EaseInBack:\r\n            s = 1.70158;\r\n\r\n            return (pos) * pos * ((s + 1) * pos - s);\r\n        case CurveType.EaseOutBack:\r\n            s = 1.70158;\r\n\r\n            return (pos = pos - 1) * pos * ((s + 1) * pos + s) + 1;\r\n        case CurveType.EaseInOutBack:\r\n            s = 1.70158;\r\n            if ((pos /= 0.5) < 1) {\r\n                return 0.5 * (pos * pos * (((s *= (1.525)) + 1) * pos - s));\r\n            }\r\n\r\n            return 0.5 * ((pos -= 2) * pos * (((s *= (1.525)) + 1) * pos + s) + 2);\r\n        case CurveType.Elastic:\r\n        case CurveType.EaseOutElastic:\r\n            return -1 * Math.pow(4, -8 * pos) * Math.sin((pos * 6 - 1) * (2 * Math.PI) / 2) + 1;\r\n        case CurveType.EaseOutElasticTmp:\r\n            return -1 * Math.pow(6, -6 * pos) * Math.sin((pos * 6 - 1) * (2 * Math.PI) / 2) + 1;\r\n        case CurveType.SwingFromTo:\r\n            s = 1.70158;\r\n\r\n            return ((pos /= 0.5) < 1) ? 0.5 * (pos * pos * (((s *= (1.525)) + 1) * pos - s))\r\n                : 0.5 * ((pos -= 2) * pos * (((s *= (1.525)) + 1) * pos + s) + 2);\r\n        case CurveType.SwingFrom:\r\n            s = 1.70158;\r\n\r\n            return pos * pos * ((s + 1) * pos - s);\r\n        case CurveType.SwingTo:\r\n            s = 1.70158;\r\n\r\n            return (pos -= 1) * pos * ((s + 1) * pos + s) + 1;\r\n        case CurveType.Bounce:\r\n            if (pos < (1 / 2.75)) {\r\n                return (7.5625 * pos * pos);\r\n            }\r\n            else if (pos < (2 / 2.75)) {\r\n                return (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);\r\n            }\r\n            else if (pos < (2.5 / 2.75)) {\r\n                return (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);\r\n            }\r\n\r\n            return (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);\r\n        case CurveType.BouncePast:\r\n            if (pos < (1 / 2.75)) {\r\n                return (7.5625 * pos * pos);\r\n            }\r\n            else if (pos < (2 / 2.75)) {\r\n                return 2 - (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);\r\n            }\r\n            else if (pos < (2.5 / 2.75)) {\r\n                return 2 - (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);\r\n            }\r\n\r\n            return 2 - (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);\r\n        case CurveType.EaseFromTo:\r\n            if ((pos /= 0.5) < 1) {\r\n                return 0.5 * Math.pow(pos, 4);\r\n            }\r\n\r\n            return -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2);\r\n        case CurveType.EaseFrom:\r\n            return Math.pow(pos, 4);\r\n        case CurveType.EaseTo:\r\n            return Math.pow(pos, 0.25);\r\n        case CurveType.Sinusoidal:\r\n            return (-Math.cos(pos * Math.PI) / 2) + 0.5;\r\n        case CurveType.Reverse:\r\n            return 1 - pos;\r\n        case CurveType.Wobble:\r\n            return (-Math.cos(pos * Math.PI * (9 * pos)) / 2) + 0.5;\r\n        case CurveType.Spring:\r\n            return 1 - (Math.cos(pos * 4.5 * Math.PI) * Math.exp(-pos * 6));\r\n        default:\r\n            return pos;\r\n    }\r\n}\r\n\r\nexport function applyTransition(vfStage: VFStage, prevTexture: vf.RenderTexture, data: ITransitionData): void {\r\n    const transition = new Transition(vfStage, prevTexture, data);\r\n\r\n    transition.run();\r\n}\r\n\r\nexport function renderTexture(app: vf.Application, container: vf.Container\r\n    , width: number, height: number): vf.RenderTexture {\r\n    const w: number = width || app.view.width;\r\n    const h: number = height || app.view.height;\r\n\r\n    const texture = vf.RenderTexture.create({\r\n        width: w,\r\n        height: h,\r\n        scaleMode: vf.SCALE_MODES.LINEAR,\r\n    });\r\n\r\n    app.renderer.render(container, texture);\r\n\r\n    return texture;\r\n}\r\n\r\nexport function getCanvasColor(app: vf.Application, container: vf.Container, x: number, y: number): Uint8Array {\r\n    // const canvas = app.view;\r\n    // console.log('canvas', canvas)\r\n    // const ctx = canvas.getContext('2d');\r\n    // console.log('2d', ctx)\r\n    // const c = ctx.getImageData(x, y, 1, 1).data;\r\n    // return c;\r\n    const texture = vf.RenderTexture.create({\r\n        width: 1,\r\n        height: 1,\r\n        scaleMode: vf.SCALE_MODES.LINEAR,\r\n    });\r\n\r\n    app.renderer.render(container, texture);\r\n    const pixels = app.renderer.extract.pixels(texture);\r\n\r\n    return pixels as any;\r\n}\r\n\r\nexport function webglDebug(app: vf.Application, container: vf.Container): void {\r\n    const c = getCanvasColor(app, container, 0, 0);\r\n\r\n    // eslint-disable-next-line no-console\r\n    console.log(' canvas 0,0, color:', 'r:', c[0] / 255, 'g:', c[1], 'b:', c[2], c);\r\n}\r\n\r\nexport function isObject(obj: any): boolean {\r\n    return Object.prototype.toString.call(obj) === '[object Object]';\r\n}\r\n\r\nexport function isNumber(obj: any): boolean {\r\n    return typeof obj === 'number' && !isNaN(obj);\r\n}\r\n\r\nexport function isString(obj: any): boolean {\r\n    return typeof obj === 'string';\r\n}\r\n\r\nexport function isBoolean(obj: any): boolean {\r\n    return typeof obj === 'boolean';\r\n}\r\n\r\nexport function isArray(obj: any): boolean {\r\n    return Array.isArray(obj);\r\n}\r\n/**\r\n *\t 按指定格式替换字符串\r\n* @param str 原字符串 var str:string=\"a{0}c{1}e\";\r\n* @param rest 替换参数 stringFormat(str,\"b\",\"d\")\r\n* @return\r\n*\r\n*/\r\nexport function stringFormat(str: string, ...rest: any[]): string {\r\n    if (str === null || str === undefined) return '';\r\n    if (rest === undefined) return str;\r\n\r\n    let len: number = rest.length;\r\n    let args: string[];\r\n\r\n    if (len === 1 && Array.isArray(rest[0])) {\r\n        args = rest[0];\r\n        len = args.length;\r\n    }\r\n    else {\r\n        args = rest;\r\n    }\r\n\r\n    for (let i = 0; i < len; i++) {\r\n        str = str.replace(new RegExp(`\\\\\\${${i}\\\\}`, 'g'), args[i]);\r\n    }\r\n\r\n    return str;\r\n}\r\n","export function dataURLtoBlob(dataurl: string) {\r\n    let arr = dataurl.split(',') as any[];\r\n    let mime = arr[0].match(/:(.*?);/)[1],\r\n        bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\r\n    while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    return new Blob([u8arr], { type: mime });\r\n}\r\n\r\nexport function getObjectURL(base64: string) {\r\n    const data = URL.createObjectURL(dataURLtoBlob(base64));\r\n    return data;\r\n}\r\n\r\nexport function compatible(base64: string) {\r\n   \r\n    if(vf.utils.getSystemInfo().os.name === 'iOS') {\r\n        const osVersion = parseFloat(vf.utils.getSystemInfo().os.version);\r\n        if(osVersion < 9){\r\n            return getObjectURL(base64);\r\n        }\r\n    }\r\n    return base64;\r\n}","/**\r\n * 获取加载文件的扩展名\r\n */\r\nexport function getFileExtension(url: string){\r\n    const isDataUrl = url.indexOf('data:') === 0;\r\n    let ext = '';\r\n\r\n    if (isDataUrl){\r\n        const slashIndex = url.indexOf('/');\r\n\r\n        ext = url.substring(slashIndex + 1, url.indexOf(';', slashIndex));\r\n    }else{\r\n        const queryStart = url.indexOf('?');\r\n        const hashStart = url.indexOf('#');\r\n        const index = Math.min(\r\n            queryStart > -1 ? queryStart : url.length,\r\n            hashStart > -1 ? hashStart : url.length\r\n        );\r\n\r\n        url = url.substring(0, index);\r\n        ext = url.substring(url.lastIndexOf('.') + 1);\r\n    }\r\n\r\n    return ext.toLowerCase();\r\n}","import { getFileExtension } from './getFileExtension';\r\nimport { getAssetType } from '../../../assets/Assets';\r\nimport { CDN } from '../core/model/IVFData';\r\nimport { AssetsType } from '../../../assets/IAssets';\r\n\r\nexport function getCdnUrl(url: string, cdns: CDN, index = 0): string {\r\n    if (url.indexOf('data:') === 0) {\r\n        return url;\r\n    }\r\n    const type = getAssetType(getFileExtension(url));\r\n    let cdn: string[] | string;\r\n\r\n    switch (type) {\r\n        case AssetsType.Image:\r\n            cdn = cdns.image;\r\n            break;\r\n        case AssetsType.Audio:\r\n        case AssetsType.Video:\r\n            cdn = cdns.media;\r\n            break;\r\n        default:\r\n            cdn = cdns.default;\r\n    }\r\n    cdn = cdn[Math.max(index, cdn.length - 1) % cdn.length];\r\n    if (url.indexOf('http') !== -1 || url.indexOf('//') === 0) {\r\n        cdn += url.substr(url.indexOf('/', url.indexOf('.')));\r\n    }\r\n    else {\r\n        cdn += url;\r\n    }\r\n\r\n    return cdn;\r\n}\r\n\r\nexport function getUrl(url: string, baseUrl = '', cdns?: CDN, index = 0): string {\r\n    if (baseUrl) {\r\n        if (url.indexOf('http') === -1 && url.indexOf('//') === -1) {\r\n            url = baseUrl + url;\r\n        }\r\n    }\r\n    else if (cdns) {\r\n        url = getCdnUrl(url, cdns, index);\r\n    }\r\n    else {\r\n        // 根据index.json的路径选择host，同时判断是否本地数据\r\n    }\r\n\r\n    return url;\r\n}\r\n","import IEvent from '../event/IEvent';\r\n\r\nexport interface Options {\r\n    timeout?: number;\r\n    responseType?: '' | 'arraybuffer' | 'blob' | 'json' | 'text';\r\n    method?: 'GET' | 'POST';\r\n    errorCount?: number;\r\n}\r\n\r\n/**\r\n * 读取文件\r\n * @param url 文件路径\r\n * @param cdns  CDN路径 ，如果设置CDN，最终的地址为 cdn + url\r\n * @param options 选项\r\n * @param listener 可选监听\r\n * @example\r\n * const data = await readFileSyncExt('assets/xxx.mp3', []).catch(value=>{console.log(value)});\r\n */\r\n// eslint-disable-next-line max-len\r\nexport async function readFileSyncExt<K extends keyof XMLHttpRequestEventTargetEventMap>(url: string, cdns: string[], options: Options = {}, listener?: Array<[ K, (this: XMLHttpRequestEventTarget, ev: XMLHttpRequestEventTargetEventMap[K]) => any]>): Promise < any > {\r\n    if (cdns.length === 0) {\r\n        return await vf.utils.readFileSync(url, options, listener);\r\n    }\r\n\r\n    let err: any;\r\n\r\n    for (const value of cdns) {\r\n        // eslint-disable-next-line no-loop-func\r\n        const data = await vf.utils.readFileSync((value || '') + url, options, listener).catch((error: IEvent) => {\r\n            err = error;\r\n        });\r\n\r\n        if (data) {\r\n            return data;\r\n        }\r\n    }\r\n\r\n    return new Promise((resolve, reject) => { reject(err); });\r\n}\r\n"],"sourceRoot":""}